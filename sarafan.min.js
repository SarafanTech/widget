/*!
 * in-view 0.6.1 - Get notified when a DOM element enters or exits the viewport.
 * Copyright (c) 2016 Cam Wiegert <cam@camwiegert.com> - https://camwiegert.github.io/in-view
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.inView=e():t.inView=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(2),o=r(i);t.exports=o["default"]},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=r(i),u=n(3),f=r(u),s=n(4),c=function(){if("undefined"!=typeof window){var t=100,e=["scroll","resize","load"],n={history:[]},r={offset:{},threshold:0,test:s.inViewport},i=(0,o["default"])(function(){n.history.forEach(function(t){n[t].check()})},t);e.forEach(function(t){return addEventListener(t,i)}),window.MutationObserver&&addEventListener("DOMContentLoaded",function(){new MutationObserver(i).observe(document.body,{attributes:!0,childList:!0,subtree:!0})});var u=function(t){if("string"==typeof t){var e=[].slice.call(document.querySelectorAll(t));return n.history.indexOf(t)>-1?n[t].elements=e:(n[t]=(0,f["default"])(e,r),n.history.push(t)),n[t]}};return u.offset=function(t){if(void 0===t)return r.offset;var e=function(t){return"number"==typeof t};return["top","right","bottom","left"].forEach(e(t)?function(e){return r.offset[e]=t}:function(n){return e(t[n])?r.offset[n]=t[n]:null}),r.offset},u.threshold=function(t){return"number"==typeof t&&t>=0&&t<=1?r.threshold=t:r.threshold},u.test=function(t){return"function"==typeof t?r.test=t:r.test},u.is=function(t){return r.test(t,r)},u.offset(0),u}};e["default"]=c()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r){n(this,t),this.options=r,this.elements=e,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return r(t,[{key:"check",value:function(){var t=this;return this.elements.forEach(function(e){var n=t.options.test(e,t.options),r=t.current.indexOf(e),i=r>-1,o=n&&!i,u=!n&&i;o&&(t.current.push(e),t.emit("enter",e)),u&&(t.current.splice(r,1),t.emit("exit",e))}),this}},{key:"on",value:function(t,e){return this.handlers[t].push(e),this}},{key:"once",value:function(t,e){return this.singles[t].unshift(e),this}},{key:"emit",value:function(t,e){for(;this.singles[t].length;)this.singles[t].pop()(e);for(var n=this.handlers[t].length;--n>-1;)this.handlers[t][n](e);return this}}]),t}();e["default"]=function(t,e){return new i(t,e)}},function(t,e){"use strict";function n(t,e){var n=t.getBoundingClientRect(),r=n.top,i=n.right,o=n.bottom,u=n.left,f=n.width,s=n.height,c={t:o,r:window.innerWidth-u,b:window.innerHeight-r,l:i},a={x:e.threshold*f,y:e.threshold*s};return c.t>e.offset.top+a.y&&c.r>e.offset.right+a.x&&c.b>e.offset.bottom+a.y&&c.l>e.offset.left+a.x}Object.defineProperty(e,"__esModule",{value:!0}),e.inViewport=n},function(t,e){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,n){var r=n(5),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){function r(t,e,n){function r(e){var n=x,r=m;return x=m=void 0,E=e,w=t.apply(r,n)}function a(t){return E=t,j=setTimeout(h,e),M?r(t):w}function l(t){var n=t-O,r=t-E,i=e-n;return _?c(i,g-r):i}function d(t){var n=t-O,r=t-E;return void 0===O||n>=e||n<0||_&&r>=g}function h(){var t=o();return d(t)?p(t):void(j=setTimeout(h,l(t)))}function p(t){return j=void 0,T&&x?r(t):(x=m=void 0,w)}function v(){void 0!==j&&clearTimeout(j),E=0,x=O=m=j=void 0}function y(){return void 0===j?w:p(o())}function b(){var t=o(),n=d(t);if(x=arguments,m=this,O=t,n){if(void 0===j)return a(O);if(_)return j=setTimeout(h,e),r(O)}return void 0===j&&(j=setTimeout(h,e)),w}var x,m,g,w,j,O,E=0,M=!1,_=!1,T=!0;if("function"!=typeof t)throw new TypeError(f);return e=u(e)||0,i(n)&&(M=!!n.leading,_="maxWait"in n,g=_?s(u(n.maxWait)||0,e):g,T="trailing"in n?!!n.trailing:T),b.cancel=v,b.flush=y,b}var i=n(1),o=n(8),u=n(10),f="Expected a function",s=Math.max,c=Math.min;t.exports=r},function(t,e,n){var r=n(6),i=function(){return r.Date.now()};t.exports=i},function(t,e,n){function r(t,e,n){var r=!0,f=!0;if("function"!=typeof t)throw new TypeError(u);return o(n)&&(r="leading"in n?!!n.leading:r,f="trailing"in n?!!n.trailing:f),i(t,e,{leading:r,maxWait:e,trailing:f})}var i=n(7),o=n(1),u="Expected a function";t.exports=r},function(t,e){function n(t){return t}t.exports=n}])});"use strict";function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(_dereq_,module,exports){(function(global){"use strict";_dereq_(327);_dereq_(328);_dereq_(2);if(global._babelPolyfill){throw new Error("only one instance of babel-polyfill is allowed");}global._babelPolyfill=true;var DEFINE_PROPERTY="defineProperty";function define(O,key,value){O[key]||Object[DEFINE_PROPERTY](O,key,{writable:true,configurable:true,value:value});}define(String.prototype,"padLeft","".padStart);define(String.prototype,"padRight","".padEnd);"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(key){[][key]&&define(Array,key,Function.call.bind([][key]));});}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{"2":2,"327":327,"328":328}],2:[function(_dereq_,module,exports){_dereq_(130);module.exports=_dereq_(23).RegExp.escape;},{"130":130,"23":23}],3:[function(_dereq_,module,exports){module.exports=function(it){if(typeof it!='function')throw TypeError(it+' is not a function!');return it;};},{}],4:[function(_dereq_,module,exports){var cof=_dereq_(18);module.exports=function(it,msg){if(typeof it!='number'&&cof(it)!='Number')throw TypeError(msg);return+it;};},{"18":18}],5:[function(_dereq_,module,exports){// 22.1.3.31 Array.prototype[@@unscopables]
var UNSCOPABLES=_dereq_(128)('unscopables');var ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)_dereq_(42)(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true;};},{"128":128,"42":42}],6:[function(_dereq_,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it){throw TypeError(name+': incorrect invocation!');}return it;};},{}],7:[function(_dereq_,module,exports){var isObject=_dereq_(51);module.exports=function(it){if(!isObject(it))throw TypeError(it+' is not an object!');return it;};},{"51":51}],8:[function(_dereq_,module,exports){// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)
'use strict';var toObject=_dereq_(119);var toAbsoluteIndex=_dereq_(114);var toLength=_dereq_(118);module.exports=[].copyWithin||function copyWithin(target/* = 0 */,start/* = 0, end = @length */){var O=toObject(this);var len=toLength(O.length);var to=toAbsoluteIndex(target,len);var from=toAbsoluteIndex(start,len);var end=arguments.length>2?arguments[2]:undefined;var count=Math.min((end===undefined?len:toAbsoluteIndex(end,len))-from,len-to);var inc=1;if(from<to&&to<from+count){inc=-1;from+=count-1;to+=count-1;}while(count-->0){if(from in O)O[to]=O[from];else delete O[to];to+=inc;from+=inc;}return O;};},{"114":114,"118":118,"119":119}],9:[function(_dereq_,module,exports){// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)
'use strict';var toObject=_dereq_(119);var toAbsoluteIndex=_dereq_(114);var toLength=_dereq_(118);module.exports=function fill(value/* , start = 0, end = @length */){var O=toObject(this);var length=toLength(O.length);var aLen=arguments.length;var index=toAbsoluteIndex(aLen>1?arguments[1]:undefined,length);var end=aLen>2?arguments[2]:undefined;var endPos=end===undefined?length:toAbsoluteIndex(end,length);while(endPos>index){O[index++]=value;}return O;};},{"114":114,"118":118,"119":119}],10:[function(_dereq_,module,exports){var forOf=_dereq_(39);module.exports=function(iter,ITERATOR){var result=[];forOf(iter,false,result.push,result,ITERATOR);return result;};},{"39":39}],11:[function(_dereq_,module,exports){// false -> Array#indexOf
// true  -> Array#includes
var toIObject=_dereq_(117);var toLength=_dereq_(118);var toAbsoluteIndex=_dereq_(114);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;// Array#includes uses SameValueZero equality algorithm
// eslint-disable-next-line no-self-compare
if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];// eslint-disable-next-line no-self-compare
if(value!=value)return true;// Array#indexOf ignores holes, Array#includes - not
}else for(;length>index;index++){if(IS_INCLUDES||index in O){if(O[index]===el)return IS_INCLUDES||index||0;}}return!IS_INCLUDES&&-1;};};},{"114":114,"117":117,"118":118}],12:[function(_dereq_,module,exports){// 0 -> Array#forEach
// 1 -> Array#map
// 2 -> Array#filter
// 3 -> Array#some
// 4 -> Array#every
// 5 -> Array#find
// 6 -> Array#findIndex
var ctx=_dereq_(25);var IObject=_dereq_(47);var toObject=_dereq_(119);var toLength=_dereq_(118);var asc=_dereq_(15);module.exports=function(TYPE,$create){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;var create=$create||asc;return function($this,callbackfn,that){var O=toObject($this);var self=IObject(O);var f=ctx(callbackfn,that,3);var length=toLength(self.length);var index=0;var result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var val,res;for(;length>index;index++){if(NO_HOLES||index in self){val=self[index];res=f(val,index,O);if(TYPE){if(IS_MAP)result[index]=res;// map
else if(res)switch(TYPE){case 3:return true;// some
case 5:return val;// find
case 6:return index;// findIndex
case 2:result.push(val);// filter
}else if(IS_EVERY)return false;// every
}}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result;};};},{"118":118,"119":119,"15":15,"25":25,"47":47}],13:[function(_dereq_,module,exports){var aFunction=_dereq_(3);var toObject=_dereq_(119);var IObject=_dereq_(47);var toLength=_dereq_(118);module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that);var self=IObject(O);var length=toLength(O.length);var index=isRight?length-1:0;var i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index];index+=i;break;}index+=i;if(isRight?index<0:length<=index){throw TypeError('Reduce of empty array with no initial value');}}for(;isRight?index>=0:length>index;index+=i){if(index in self){memo=callbackfn(memo,self[index],index,O);}}return memo;};},{"118":118,"119":119,"3":3,"47":47}],14:[function(_dereq_,module,exports){var isObject=_dereq_(51);var isArray=_dereq_(49);var SPECIES=_dereq_(128)('species');module.exports=function(original){var C;if(isArray(original)){C=original.constructor;// cross-realm fallback
if(typeof C=='function'&&(C===Array||isArray(C.prototype)))C=undefined;if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined;}}return C===undefined?Array:C;};},{"128":128,"49":49,"51":51}],15:[function(_dereq_,module,exports){// 9.4.2.3 ArraySpeciesCreate(originalArray, length)
var speciesConstructor=_dereq_(14);module.exports=function(original,length){return new(speciesConstructor(original))(length);};},{"14":14}],16:[function(_dereq_,module,exports){'use strict';var aFunction=_dereq_(3);var isObject=_dereq_(51);var invoke=_dereq_(46);var arraySlice=[].slice;var factories={};var construct=function construct(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++){n[i]='a['+i+']';}// eslint-disable-next-line no-new-func
factories[len]=Function('F,a','return new F('+n.join(',')+')');}return factories[len](F,args);};module.exports=Function.bind||function bind(that/* , ...args */){var fn=aFunction(this);var partArgs=arraySlice.call(arguments,1);var bound=function bound()/* args... */{var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?construct(fn,args.length,args):invoke(fn,args,that);};if(isObject(fn.prototype))bound.prototype=fn.prototype;return bound;};},{"3":3,"46":46,"51":51}],17:[function(_dereq_,module,exports){// getting tag from 19.1.3.6 Object.prototype.toString()
var cof=_dereq_(18);var TAG=_dereq_(128)('toStringTag');// ES3 wrong here
var ARG=cof(function(){return arguments;}())=='Arguments';// fallback for IE11 Script Access Denied error
var tryGet=function tryGet(it,key){try{return it[key];}catch(e){/* empty */}};module.exports=function(it){var O,T,B;return it===undefined?'Undefined':it===null?'Null'// @@toStringTag case
:typeof(T=tryGet(O=Object(it),TAG))=='string'?T// builtinTag case
:ARG?cof(O)// ES3 arguments fallback
:(B=cof(O))=='Object'&&typeof O.callee=='function'?'Arguments':B;};},{"128":128,"18":18}],18:[function(_dereq_,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1);};},{}],19:[function(_dereq_,module,exports){'use strict';var dP=_dereq_(72).f;var create=_dereq_(71);var redefineAll=_dereq_(93);var ctx=_dereq_(25);var anInstance=_dereq_(6);var forOf=_dereq_(39);var $iterDefine=_dereq_(55);var step=_dereq_(57);var setSpecies=_dereq_(100);var DESCRIPTORS=_dereq_(29);var fastKey=_dereq_(66).fastKey;var validate=_dereq_(125);var SIZE=DESCRIPTORS?'_s':'size';var getEntry=function getEntry(that,key){// fast case
var index=fastKey(key);var entry;if(index!=='F')return that._i[index];// frozen object case
for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry;}};module.exports={getConstructor:function getConstructor(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,'_i');that._t=NAME;// collection type
that._i=create(null);// index
that._f=undefined;// first entry
that._l=undefined;// last entry
that[SIZE]=0;// size
if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);});redefineAll(C.prototype,{// 23.1.3.1 Map.prototype.clear()
// 23.2.3.2 Set.prototype.clear()
clear:function clear(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i];}that._f=that._l=undefined;that[SIZE]=0;},// 23.1.3.3 Map.prototype.delete(key)
// 23.2.3.4 Set.prototype.delete(value)
'delete':function _delete(key){var that=validate(this,NAME);var entry=getEntry(that,key);if(entry){var next=entry.n;var prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--;}return!!entry;},// 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)
// 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)
forEach:function forEach(callbackfn/* , that = undefined */){validate(this,NAME);var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3);var entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);// revert to the last existing entry
while(entry&&entry.r){entry=entry.p;}}},// 23.1.3.7 Map.prototype.has(key)
// 23.2.3.7 Set.prototype.has(value)
has:function has(key){return!!getEntry(validate(this,NAME),key);}});if(DESCRIPTORS)dP(C.prototype,'size',{get:function get(){return validate(this,NAME)[SIZE];}});return C;},def:function def(that,key,value){var entry=getEntry(that,key);var prev,index;// change existing entry
if(entry){entry.v=value;// create new entry
}else{that._l=entry={i:index=fastKey(key,true),// <- index
k:key,// <- key
v:value,// <- value
p:prev=that._l,// <- previous entry
n:undefined,// <- next entry
r:false// <- removed
};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;// add to index
if(index!=='F')that._i[index]=entry;}return that;},getEntry:getEntry,setStrong:function setStrong(C,NAME,IS_MAP){// add .keys, .values, .entries, [@@iterator]
// 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11
$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME);// target
this._k=kind;// kind
this._l=undefined;// previous
},function(){var that=this;var kind=that._k;var entry=that._l;// revert to the last existing entry
while(entry&&entry.r){entry=entry.p;}// get next entry
if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){// or finish the iteration
that._t=undefined;return step(1);}// return step by kind
if(kind=='keys')return step(0,entry.k);if(kind=='values')return step(0,entry.v);return step(0,[entry.k,entry.v]);},IS_MAP?'entries':'values',!IS_MAP,true);// add [@@species], 23.1.2.2, 23.2.2.2
setSpecies(NAME);}};},{"100":100,"125":125,"25":25,"29":29,"39":39,"55":55,"57":57,"6":6,"66":66,"71":71,"72":72,"93":93}],20:[function(_dereq_,module,exports){// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var classof=_dereq_(17);var from=_dereq_(10);module.exports=function(NAME){return function toJSON(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return from(this);};};},{"10":10,"17":17}],21:[function(_dereq_,module,exports){'use strict';var redefineAll=_dereq_(93);var getWeak=_dereq_(66).getWeak;var anObject=_dereq_(7);var isObject=_dereq_(51);var anInstance=_dereq_(6);var forOf=_dereq_(39);var createArrayMethod=_dereq_(12);var $has=_dereq_(41);var validate=_dereq_(125);var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var id=0;// fallback for uncaught frozen keys
var uncaughtFrozenStore=function uncaughtFrozenStore(that){return that._l||(that._l=new UncaughtFrozenStore());};var UncaughtFrozenStore=function UncaughtFrozenStore(){this.a=[];};var findUncaughtFrozen=function findUncaughtFrozen(store,key){return arrayFind(store.a,function(it){return it[0]===key;});};UncaughtFrozenStore.prototype={get:function get(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1];},has:function has(key){return!!findUncaughtFrozen(this,key);},set:function set(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.a.push([key,value]);},'delete':function _delete(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key;});if(~index)this.a.splice(index,1);return!!~index;}};module.exports={getConstructor:function getConstructor(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,'_i');that._t=NAME;// collection type
that._i=id++;// collection id
that._l=undefined;// leak store for uncaught frozen objects
if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);});redefineAll(C.prototype,{// 23.3.3.2 WeakMap.prototype.delete(key)
// 23.4.3.3 WeakSet.prototype.delete(value)
'delete':function _delete(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME))['delete'](key);return data&&$has(data,this._i)&&delete data[this._i];},// 23.3.3.4 WeakMap.prototype.has(key)
// 23.4.3.4 WeakSet.prototype.has(value)
has:function has(key){if(!isObject(key))return false;var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,NAME)).has(key);return data&&$has(data,this._i);}});return C;},def:function def(that,key,value){var data=getWeak(anObject(key),true);if(data===true)uncaughtFrozenStore(that).set(key,value);else data[that._i]=value;return that;},ufstore:uncaughtFrozenStore};},{"12":12,"125":125,"39":39,"41":41,"51":51,"6":6,"66":66,"7":7,"93":93}],22:[function(_dereq_,module,exports){'use strict';var global=_dereq_(40);var $export=_dereq_(33);var redefine=_dereq_(94);var redefineAll=_dereq_(93);var meta=_dereq_(66);var forOf=_dereq_(39);var anInstance=_dereq_(6);var isObject=_dereq_(51);var fails=_dereq_(35);var $iterDetect=_dereq_(56);var setToStringTag=_dereq_(101);var inheritIfRequired=_dereq_(45);module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME];var C=Base;var ADDER=IS_MAP?'set':'add';var proto=C&&C.prototype;var O={};var fixMethod=function fixMethod(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=='delete'?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a);}:KEY=='has'?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a);}:KEY=='get'?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a);}:KEY=='add'?function add(a){fn.call(this,a===0?0:a);return this;}:function set(a,b){fn.call(this,a===0?0:a,b);return this;});};if(typeof C!='function'||!(IS_WEAK||proto.forEach&&!fails(function(){new C().entries().next();}))){// create collection constructor
C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods);meta.NEED=true;}else{var instance=new C();// early implementations not supports chaining
var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;// V8 ~  Chromium 40- weak-collections throws on primitives, but should return false
var THROWS_ON_PRIMITIVES=fails(function(){instance.has(1);});// most early implementations doesn't supports iterables, most modern - not close it correctly
var ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter);});// eslint-disable-line no-new
// for early implementations -0 and +0 not the same
var BUGGY_ZERO=!IS_WEAK&&fails(function(){// V8 ~ Chromium 42- fails only with 5+ elements
var $instance=new C();var index=5;while(index--){$instance[ADDER](index,index);}return!$instance.has(-0);});if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base(),target,C);if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that;});C.prototype=proto;proto.constructor=C;}if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod('delete');fixMethod('has');IS_MAP&&fixMethod('get');}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);// weak collections should not contains .clear method
if(IS_WEAK&&proto.clear)delete proto.clear;}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C;};},{"101":101,"33":33,"35":35,"39":39,"40":40,"45":45,"51":51,"56":56,"6":6,"66":66,"93":93,"94":94}],23:[function(_dereq_,module,exports){var core=module.exports={version:'2.5.0'};if(typeof __e=='number')__e=core;// eslint-disable-line no-undef
},{}],24:[function(_dereq_,module,exports){'use strict';var $defineProperty=_dereq_(72);var createDesc=_dereq_(92);module.exports=function(object,index,value){if(index in object)$defineProperty.f(object,index,createDesc(0,value));else object[index]=value;};},{"72":72,"92":92}],25:[function(_dereq_,module,exports){// optional / simple context binding
var aFunction=_dereq_(3);module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a);};case 2:return function(a,b){return fn.call(that,a,b);};case 3:return function(a,b,c){return fn.call(that,a,b,c);};}return function()/* ...args */{return fn.apply(that,arguments);};};},{"3":3}],26:[function(_dereq_,module,exports){'use strict';// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var fails=_dereq_(35);var getTime=Date.prototype.getTime;var $toISOString=Date.prototype.toISOString;var lz=function lz(num){return num>9?num:'0'+num;};// PhantomJS / old WebKit has a broken implementations
module.exports=fails(function(){return $toISOString.call(new Date(-5e13-1))!='0385-07-25T07:06:39.999Z';})||!fails(function(){$toISOString.call(new Date(NaN));})?function toISOString(){if(!isFinite(getTime.call(this)))throw RangeError('Invalid time value');var d=this;var y=d.getUTCFullYear();var m=d.getUTCMilliseconds();var s=y<0?'-':y>9999?'+':'';return s+('00000'+Math.abs(y)).slice(s?-6:-4)+'-'+lz(d.getUTCMonth()+1)+'-'+lz(d.getUTCDate())+'T'+lz(d.getUTCHours())+':'+lz(d.getUTCMinutes())+':'+lz(d.getUTCSeconds())+'.'+(m>99?m:'0'+lz(m))+'Z';}:$toISOString;},{"35":35}],27:[function(_dereq_,module,exports){'use strict';var anObject=_dereq_(7);var toPrimitive=_dereq_(120);var NUMBER='number';module.exports=function(hint){if(hint!=='string'&&hint!==NUMBER&&hint!=='default')throw TypeError('Incorrect hint');return toPrimitive(anObject(this),hint!=NUMBER);};},{"120":120,"7":7}],28:[function(_dereq_,module,exports){// 7.2.1 RequireObjectCoercible(argument)
module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it;};},{}],29:[function(_dereq_,module,exports){// Thank's IE8 for his funny defineProperty
module.exports=!_dereq_(35)(function(){return Object.defineProperty({},'a',{get:function get(){return 7;}}).a!=7;});},{"35":35}],30:[function(_dereq_,module,exports){var isObject=_dereq_(51);var document=_dereq_(40).document;// typeof document.createElement is 'object' in old IE
var is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{};};},{"40":40,"51":51}],31:[function(_dereq_,module,exports){// IE 8- don't enum bug keys
module.exports='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',');},{}],32:[function(_dereq_,module,exports){// all enumerable object keys, includes symbols
var getKeys=_dereq_(81);var gOPS=_dereq_(78);var pIE=_dereq_(82);module.exports=function(it){var result=getKeys(it);var getSymbols=gOPS.f;if(getSymbols){var symbols=getSymbols(it);var isEnum=pIE.f;var i=0;var key;while(symbols.length>i){if(isEnum.call(it,key=symbols[i++]))result.push(key);}}return result;};},{"78":78,"81":81,"82":82}],33:[function(_dereq_,module,exports){var global=_dereq_(40);var core=_dereq_(23);var hide=_dereq_(42);var redefine=_dereq_(94);var ctx=_dereq_(25);var PROTOTYPE='prototype';var $export=function $export(type,name,source){var IS_FORCED=type&$export.F;var IS_GLOBAL=type&$export.G;var IS_STATIC=type&$export.S;var IS_PROTO=type&$export.P;var IS_BIND=type&$export.B;var target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE];var exports=IS_GLOBAL?core:core[name]||(core[name]={});var expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={});var key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){// contains in native
own=!IS_FORCED&&target&&target[key]!==undefined;// export native or passed
out=(own?target:source)[key];// bind timers to global for call from export context
exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=='function'?ctx(Function.call,out):out;// extend global
if(target)redefine(target,key,out,type&$export.U);// export
if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out;}};global.core=core;// type bitmap
$export.F=1;// forced
$export.G=2;// global
$export.S=4;// static
$export.P=8;// proto
$export.B=16;// bind
$export.W=32;// wrap
$export.U=64;// safe
$export.R=128;// real proto method for `library`
module.exports=$export;},{"23":23,"25":25,"40":40,"42":42,"94":94}],34:[function(_dereq_,module,exports){var MATCH=_dereq_(128)('match');module.exports=function(KEY){var re=/./;try{'/./'[KEY](re);}catch(e){try{re[MATCH]=false;return!'/./'[KEY](re);}catch(f){/* empty */}}return true;};},{"128":128}],35:[function(_dereq_,module,exports){module.exports=function(exec){try{return!!exec();}catch(e){return true;}};},{}],36:[function(_dereq_,module,exports){'use strict';var hide=_dereq_(42);var redefine=_dereq_(94);var fails=_dereq_(35);var defined=_dereq_(28);var wks=_dereq_(128);module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY);var fns=exec(defined,SYMBOL,''[KEY]);var strfn=fns[0];var rxfn=fns[1];if(fails(function(){var O={};O[SYMBOL]=function(){return 7;};return''[KEY](O)!=7;})){redefine(String.prototype,KEY,strfn);hide(RegExp.prototype,SYMBOL,length==2// 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)
// 21.2.5.11 RegExp.prototype[@@split](string, limit)
?function(string,arg){return rxfn.call(string,this,arg);}// 21.2.5.6 RegExp.prototype[@@match](string)
// 21.2.5.9 RegExp.prototype[@@search](string)
:function(string){return rxfn.call(string,this);});}};},{"128":128,"28":28,"35":35,"42":42,"94":94}],37:[function(_dereq_,module,exports){'use strict';// 21.2.5.3 get RegExp.prototype.flags
var anObject=_dereq_(7);module.exports=function(){var that=anObject(this);var result='';if(that.global)result+='g';if(that.ignoreCase)result+='i';if(that.multiline)result+='m';if(that.unicode)result+='u';if(that.sticky)result+='y';return result;};},{"7":7}],38:[function(_dereq_,module,exports){'use strict';// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray
var isArray=_dereq_(49);var isObject=_dereq_(51);var toLength=_dereq_(118);var ctx=_dereq_(25);var IS_CONCAT_SPREADABLE=_dereq_(128)('isConcatSpreadable');function flattenIntoArray(target,original,source,sourceLen,start,depth,mapper,thisArg){var targetIndex=start;var sourceIndex=0;var mapFn=mapper?ctx(mapper,thisArg,3):false;var element,spreadable;while(sourceIndex<sourceLen){if(sourceIndex in source){element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex];spreadable=false;if(isObject(element)){spreadable=element[IS_CONCAT_SPREADABLE];spreadable=spreadable!==undefined?!!spreadable:isArray(element);}if(spreadable&&depth>0){targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;}else{if(targetIndex>=0x1fffffffffffff)throw TypeError();target[targetIndex]=element;}targetIndex++;}sourceIndex++;}return targetIndex;}module.exports=flattenIntoArray;},{"118":118,"128":128,"25":25,"49":49,"51":51}],39:[function(_dereq_,module,exports){var ctx=_dereq_(25);var call=_dereq_(53);var isArrayIter=_dereq_(48);var anObject=_dereq_(7);var toLength=_dereq_(118);var getIterFn=_dereq_(129);var BREAK={};var RETURN={};var exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var iterFn=ITERATOR?function(){return iterable;}:getIterFn(iterable);var f=ctx(fn,that,entries?2:1);var index=0;var length,step,iterator,result;if(typeof iterFn!='function')throw TypeError(iterable+' is not iterable!');// fast case for arrays with default iterator
if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]);if(result===BREAK||result===RETURN)return result;}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){result=call(iterator,f,step.value,entries);if(result===BREAK||result===RETURN)return result;}};exports.BREAK=BREAK;exports.RETURN=RETURN;},{"118":118,"129":129,"25":25,"48":48,"53":53,"7":7}],40:[function(_dereq_,module,exports){// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global=module.exports=typeof window!='undefined'&&window.Math==Math?window:typeof self!='undefined'&&self.Math==Math?self// eslint-disable-next-line no-new-func
:Function('return this')();if(typeof __g=='number')__g=global;// eslint-disable-line no-undef
},{}],41:[function(_dereq_,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key);};},{}],42:[function(_dereq_,module,exports){var dP=_dereq_(72);var createDesc=_dereq_(92);module.exports=_dereq_(29)?function(object,key,value){return dP.f(object,key,createDesc(1,value));}:function(object,key,value){object[key]=value;return object;};},{"29":29,"72":72,"92":92}],43:[function(_dereq_,module,exports){var document=_dereq_(40).document;module.exports=document&&document.documentElement;},{"40":40}],44:[function(_dereq_,module,exports){module.exports=!_dereq_(29)&&!_dereq_(35)(function(){return Object.defineProperty(_dereq_(30)('div'),'a',{get:function get(){return 7;}}).a!=7;});},{"29":29,"30":30,"35":35}],45:[function(_dereq_,module,exports){var isObject=_dereq_(51);var setPrototypeOf=_dereq_(99).set;module.exports=function(that,target,C){var S=target.constructor;var P;if(S!==C&&typeof S=='function'&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf){setPrototypeOf(that,P);}return that;};},{"51":51,"99":99}],46:[function(_dereq_,module,exports){// fast apply, http://jsperf.lnkit.com/fast-apply/5
module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3]);}return fn.apply(that,args);};},{}],47:[function(_dereq_,module,exports){// fallback for non-array-like ES3 and non-enumerable old V8 strings
var cof=_dereq_(18);// eslint-disable-next-line no-prototype-builtins
module.exports=Object('z').propertyIsEnumerable(0)?Object:function(it){return cof(it)=='String'?it.split(''):Object(it);};},{"18":18}],48:[function(_dereq_,module,exports){// check on default Array iterator
var Iterators=_dereq_(58);var ITERATOR=_dereq_(128)('iterator');var ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it);};},{"128":128,"58":58}],49:[function(_dereq_,module,exports){// 7.2.2 IsArray(argument)
var cof=_dereq_(18);module.exports=Array.isArray||function isArray(arg){return cof(arg)=='Array';};},{"18":18}],50:[function(_dereq_,module,exports){// 20.1.2.3 Number.isInteger(number)
var isObject=_dereq_(51);var floor=Math.floor;module.exports=function isInteger(it){return!isObject(it)&&isFinite(it)&&floor(it)===it;};},{"51":51}],51:[function(_dereq_,module,exports){module.exports=function(it){return _typeof(it)==='object'?it!==null:typeof it==='function';};},{}],52:[function(_dereq_,module,exports){// 7.2.8 IsRegExp(argument)
var isObject=_dereq_(51);var cof=_dereq_(18);var MATCH=_dereq_(128)('match');module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:cof(it)=='RegExp');};},{"128":128,"18":18,"51":51}],53:[function(_dereq_,module,exports){// call something on iterator step with safe closing on error
var anObject=_dereq_(7);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value);// 7.4.6 IteratorClose(iterator, completion)
}catch(e){var ret=iterator['return'];if(ret!==undefined)anObject(ret.call(iterator));throw e;}};},{"7":7}],54:[function(_dereq_,module,exports){'use strict';var create=_dereq_(71);var descriptor=_dereq_(92);var setToStringTag=_dereq_(101);var IteratorPrototype={};// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
_dereq_(42)(IteratorPrototype,_dereq_(128)('iterator'),function(){return this;});module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+' Iterator');};},{"101":101,"128":128,"42":42,"71":71,"92":92}],55:[function(_dereq_,module,exports){'use strict';var LIBRARY=_dereq_(60);var $export=_dereq_(33);var redefine=_dereq_(94);var hide=_dereq_(42);var has=_dereq_(41);var Iterators=_dereq_(58);var $iterCreate=_dereq_(54);var setToStringTag=_dereq_(101);var getPrototypeOf=_dereq_(79);var ITERATOR=_dereq_(128)('iterator');var BUGGY=!([].keys&&'next'in[].keys());// Safari has buggy iterators w/o `next`
var FF_ITERATOR='@@iterator';var KEYS='keys';var VALUES='values';var returnThis=function returnThis(){return this;};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function getMethod(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind);};case VALUES:return function values(){return new Constructor(this,kind);};}return function entries(){return new Constructor(this,kind);};};var TAG=NAME+' Iterator';var DEF_VALUES=DEFAULT==VALUES;var VALUES_BUG=false;var proto=Base.prototype;var $native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT];var $default=$native||getMethod(DEFAULT);var $entries=DEFAULT?!DEF_VALUES?$default:getMethod('entries'):undefined;var $anyNative=NAME=='Array'?proto.entries||$native:$native;var methods,key,IteratorPrototype;// Fix native
if($anyNative){IteratorPrototype=getPrototypeOf($anyNative.call(new Base()));if(IteratorPrototype!==Object.prototype&&IteratorPrototype.next){// Set @@toStringTag to native iterators
setToStringTag(IteratorPrototype,TAG,true);// fix for some old engines
if(!LIBRARY&&!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);}}// fix Array#{values, @@iterator}.name in V8 / FF
if(DEF_VALUES&&$native&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this);};}// Define iterator
if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default);}// Plug for library
Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key]);}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);}return methods;};},{"101":101,"128":128,"33":33,"41":41,"42":42,"54":54,"58":58,"60":60,"79":79,"94":94}],56:[function(_dereq_,module,exports){var ITERATOR=_dereq_(128)('iterator');var SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter['return']=function(){SAFE_CLOSING=true;};// eslint-disable-next-line no-throw-literal
Array.from(riter,function(){throw 2;});}catch(e){/* empty */}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7];var iter=arr[ITERATOR]();iter.next=function(){return{done:safe=true};};arr[ITERATOR]=function(){return iter;};exec(arr);}catch(e){/* empty */}return safe;};},{"128":128}],57:[function(_dereq_,module,exports){module.exports=function(done,value){return{value:value,done:!!done};};},{}],58:[function(_dereq_,module,exports){module.exports={};},{}],59:[function(_dereq_,module,exports){var getKeys=_dereq_(81);var toIObject=_dereq_(117);module.exports=function(object,el){var O=toIObject(object);var keys=getKeys(O);var length=keys.length;var index=0;var key;while(length>index){if(O[key=keys[index++]]===el)return key;}};},{"117":117,"81":81}],60:[function(_dereq_,module,exports){module.exports=false;},{}],61:[function(_dereq_,module,exports){// 20.2.2.14 Math.expm1(x)
var $expm1=Math.expm1;module.exports=!$expm1// Old FF bug
||$expm1(10)>22025.465794806719||$expm1(10)<22025.4657948067165168// Tor Browser bug
||$expm1(-2e-17)!=-2e-17?function expm1(x){return(x=+x)==0?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1;}:$expm1;},{}],62:[function(_dereq_,module,exports){// 20.2.2.16 Math.fround(x)
var sign=_dereq_(65);var pow=Math.pow;var EPSILON=pow(2,-52);var EPSILON32=pow(2,-23);var MAX32=pow(2,127)*(2-EPSILON32);var MIN32=pow(2,-126);var roundTiesToEven=function roundTiesToEven(n){return n+1/EPSILON-1/EPSILON;};module.exports=Math.fround||function fround(x){var $abs=Math.abs(x);var $sign=sign(x);var a,result;if($abs<MIN32)return $sign*roundTiesToEven($abs/MIN32/EPSILON32)*MIN32*EPSILON32;a=(1+EPSILON32/EPSILON)*$abs;result=a-(a-$abs);// eslint-disable-next-line no-self-compare
if(result>MAX32||result!=result)return $sign*Infinity;return $sign*result;};},{"65":65}],63:[function(_dereq_,module,exports){// 20.2.2.20 Math.log1p(x)
module.exports=Math.log1p||function log1p(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x);};},{}],64:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
module.exports=Math.scale||function scale(x,inLow,inHigh,outLow,outHigh){if(arguments.length===0// eslint-disable-next-line no-self-compare
||x!=x// eslint-disable-next-line no-self-compare
||inLow!=inLow// eslint-disable-next-line no-self-compare
||inHigh!=inHigh// eslint-disable-next-line no-self-compare
||outLow!=outLow// eslint-disable-next-line no-self-compare
||outHigh!=outHigh)return NaN;if(x===Infinity||x===-Infinity)return x;return(x-inLow)*(outHigh-outLow)/(inHigh-inLow)+outLow;};},{}],65:[function(_dereq_,module,exports){// 20.2.2.28 Math.sign(x)
module.exports=Math.sign||function sign(x){// eslint-disable-next-line no-self-compare
return(x=+x)==0||x!=x?x:x<0?-1:1;};},{}],66:[function(_dereq_,module,exports){var META=_dereq_(124)('meta');var isObject=_dereq_(51);var has=_dereq_(41);var setDesc=_dereq_(72).f;var id=0;var isExtensible=Object.isExtensible||function(){return true;};var FREEZE=!_dereq_(35)(function(){return isExtensible(Object.preventExtensions({}));});var setMeta=function setMeta(it){setDesc(it,META,{value:{i:'O'+ ++id,// object ID
w:{}// weak collections IDs
}});};var fastKey=function fastKey(it,create){// return primitive with prefix
if(!isObject(it))return _typeof(it)=='symbol'?it:(typeof it=='string'?'S':'P')+it;if(!has(it,META)){// can't set metadata to uncaught frozen object
if(!isExtensible(it))return'F';// not necessary to add metadata
if(!create)return'E';// add missing metadata
setMeta(it);// return object ID
}return it[META].i;};var getWeak=function getWeak(it,create){if(!has(it,META)){// can't set metadata to uncaught frozen object
if(!isExtensible(it))return true;// not necessary to add metadata
if(!create)return false;// add missing metadata
setMeta(it);// return hash weak collections IDs
}return it[META].w;};// add metadata on freeze-family methods calling
var onFreeze=function onFreeze(it){if(FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META))setMeta(it);return it;};var meta=module.exports={KEY:META,NEED:false,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze};},{"124":124,"35":35,"41":41,"51":51,"72":72}],67:[function(_dereq_,module,exports){var Map=_dereq_(160);var $export=_dereq_(33);var shared=_dereq_(103)('metadata');var store=shared.store||(shared.store=new(_dereq_(266))());var getOrCreateMetadataMap=function getOrCreateMetadataMap(target,targetKey,create){var targetMetadata=store.get(target);if(!targetMetadata){if(!create)return undefined;store.set(target,targetMetadata=new Map());}var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return undefined;targetMetadata.set(targetKey,keyMetadata=new Map());}return keyMetadata;};var ordinaryHasOwnMetadata=function ordinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?false:metadataMap.has(MetadataKey);};var ordinaryGetOwnMetadata=function ordinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,false);return metadataMap===undefined?undefined:metadataMap.get(MetadataKey);};var ordinaryDefineOwnMetadata=function ordinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,true).set(MetadataKey,MetadataValue);};var ordinaryOwnMetadataKeys=function ordinaryOwnMetadataKeys(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,false);var keys=[];if(metadataMap)metadataMap.forEach(function(_,key){keys.push(key);});return keys;};var toMetaKey=function toMetaKey(it){return it===undefined||_typeof(it)=='symbol'?it:String(it);};var exp=function exp(O){$export($export.S,'Reflect',O);};module.exports={store:store,map:getOrCreateMetadataMap,has:ordinaryHasOwnMetadata,get:ordinaryGetOwnMetadata,set:ordinaryDefineOwnMetadata,keys:ordinaryOwnMetadataKeys,key:toMetaKey,exp:exp};},{"103":103,"160":160,"266":266,"33":33}],68:[function(_dereq_,module,exports){var global=_dereq_(40);var macrotask=_dereq_(113).set;var Observer=global.MutationObserver||global.WebKitMutationObserver;var process=global.process;var Promise=global.Promise;var isNode=_dereq_(18)(process)=='process';module.exports=function(){var head,last,notify;var flush=function flush(){var parent,fn;if(isNode&&(parent=process.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn();}catch(e){if(head)notify();else last=undefined;throw e;}}last=undefined;if(parent)parent.enter();};// Node.js
if(isNode){notify=function notify(){process.nextTick(flush);};// browsers with MutationObserver
}else if(Observer){var toggle=true;var node=document.createTextNode('');new Observer(flush).observe(node,{characterData:true});// eslint-disable-line no-new
notify=function notify(){node.data=toggle=!toggle;};// environments with maybe non-completely correct, but existent Promise
}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function notify(){promise.then(flush);};// for other environments - macrotask based on:
// - setImmediate
// - MessageChannel
// - window.postMessag
// - onreadystatechange
// - setTimeout
}else{notify=function notify(){// strange IE + webpack dev server bug - use .call(global)
macrotask.call(global,flush);};}return function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify();}last=task;};};},{"113":113,"18":18,"40":40}],69:[function(_dereq_,module,exports){'use strict';// 25.4.1.5 NewPromiseCapability(C)
var aFunction=_dereq_(3);function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError('Bad Promise constructor');resolve=$$resolve;reject=$$reject;});this.resolve=aFunction(resolve);this.reject=aFunction(reject);}module.exports.f=function(C){return new PromiseCapability(C);};},{"3":3}],70:[function(_dereq_,module,exports){'use strict';// 19.1.2.1 Object.assign(target, source, ...)
var getKeys=_dereq_(81);var gOPS=_dereq_(78);var pIE=_dereq_(82);var toObject=_dereq_(119);var IObject=_dereq_(47);var $assign=Object.assign;// should work with symbols and should have deterministic property order (V8 bug)
module.exports=!$assign||_dereq_(35)(function(){var A={};var B={};// eslint-disable-next-line no-undef
var S=Symbol();var K='abcdefghijklmnopqrst';A[S]=7;K.split('').forEach(function(k){B[k]=k;});return $assign({},A)[S]!=7||Object.keys($assign({},B)).join('')!=K;})?function assign(target,source){// eslint-disable-line no-unused-vars
var T=toObject(target);var aLen=arguments.length;var index=1;var getSymbols=gOPS.f;var isEnum=pIE.f;while(aLen>index){var S=IObject(arguments[index++]);var keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S);var length=keys.length;var j=0;var key;while(length>j){if(isEnum.call(S,key=keys[j++]))T[key]=S[key];}}return T;}:$assign;},{"119":119,"35":35,"47":47,"78":78,"81":81,"82":82}],71:[function(_dereq_,module,exports){// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
var anObject=_dereq_(7);var dPs=_dereq_(73);var enumBugKeys=_dereq_(31);var IE_PROTO=_dereq_(102)('IE_PROTO');var Empty=function Empty(){/* empty */};var PROTOTYPE='prototype';// Create object with fake `null` prototype: use iframe Object with cleared prototype
var _createDict=function createDict(){// Thrash, waste and sodomy: IE GC bug
var iframe=_dereq_(30)('iframe');var i=enumBugKeys.length;var lt='<';var gt='>';var iframeDocument;iframe.style.display='none';_dereq_(43).appendChild(iframe);iframe.src='javascript:';// eslint-disable-line no-script-url
// createDict = iframe.contentWindow.Object;
// html.removeChild(iframe);
iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+'script'+gt+'document.F=Object'+lt+'/script'+gt);iframeDocument.close();_createDict=iframeDocument.F;while(i--){delete _createDict[PROTOTYPE][enumBugKeys[i]];}return _createDict();};module.exports=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty();Empty[PROTOTYPE]=null;// add "__proto__" for Object.getPrototypeOf polyfill
result[IE_PROTO]=O;}else result=_createDict();return Properties===undefined?result:dPs(result,Properties);};},{"102":102,"30":30,"31":31,"43":43,"7":7,"73":73}],72:[function(_dereq_,module,exports){var anObject=_dereq_(7);var IE8_DOM_DEFINE=_dereq_(44);var toPrimitive=_dereq_(120);var dP=Object.defineProperty;exports.f=_dereq_(29)?Object.defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(IE8_DOM_DEFINE)try{return dP(O,P,Attributes);}catch(e){/* empty */}if('get'in Attributes||'set'in Attributes)throw TypeError('Accessors not supported!');if('value'in Attributes)O[P]=Attributes.value;return O;};},{"120":120,"29":29,"44":44,"7":7}],73:[function(_dereq_,module,exports){var dP=_dereq_(72);var anObject=_dereq_(7);var getKeys=_dereq_(81);module.exports=_dereq_(29)?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=getKeys(Properties);var length=keys.length;var i=0;var P;while(length>i){dP.f(O,P=keys[i++],Properties[P]);}return O;};},{"29":29,"7":7,"72":72,"81":81}],74:[function(_dereq_,module,exports){'use strict';// Forced replacement prototype accessors methods
module.exports=_dereq_(60)||!_dereq_(35)(function(){var K=Math.random();// In FF throws only define methods
// eslint-disable-next-line no-undef, no-useless-call
__defineSetter__.call(null,K,function(){/* empty */});delete _dereq_(40)[K];});},{"35":35,"40":40,"60":60}],75:[function(_dereq_,module,exports){var pIE=_dereq_(82);var createDesc=_dereq_(92);var toIObject=_dereq_(117);var toPrimitive=_dereq_(120);var has=_dereq_(41);var IE8_DOM_DEFINE=_dereq_(44);var gOPD=Object.getOwnPropertyDescriptor;exports.f=_dereq_(29)?gOPD:function getOwnPropertyDescriptor(O,P){O=toIObject(O);P=toPrimitive(P,true);if(IE8_DOM_DEFINE)try{return gOPD(O,P);}catch(e){/* empty */}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P]);};},{"117":117,"120":120,"29":29,"41":41,"44":44,"82":82,"92":92}],76:[function(_dereq_,module,exports){// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
var toIObject=_dereq_(117);var gOPN=_dereq_(77).f;var toString={}.toString;var windowNames=(typeof window==="undefined"?"undefined":_typeof(window))=='object'&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function getWindowNames(it){try{return gOPN(it);}catch(e){return windowNames.slice();}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&toString.call(it)=='[object Window]'?getWindowNames(it):gOPN(toIObject(it));};},{"117":117,"77":77}],77:[function(_dereq_,module,exports){// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)
var $keys=_dereq_(80);var hiddenKeys=_dereq_(31).concat('length','prototype');exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return $keys(O,hiddenKeys);};},{"31":31,"80":80}],78:[function(_dereq_,module,exports){exports.f=Object.getOwnPropertySymbols;},{}],79:[function(_dereq_,module,exports){// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)
var has=_dereq_(41);var toObject=_dereq_(119);var IE_PROTO=_dereq_(102)('IE_PROTO');var ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){O=toObject(O);if(has(O,IE_PROTO))return O[IE_PROTO];if(typeof O.constructor=='function'&&O instanceof O.constructor){return O.constructor.prototype;}return O instanceof Object?ObjectProto:null;};},{"102":102,"119":119,"41":41}],80:[function(_dereq_,module,exports){var has=_dereq_(41);var toIObject=_dereq_(117);var arrayIndexOf=_dereq_(11)(false);var IE_PROTO=_dereq_(102)('IE_PROTO');module.exports=function(object,names){var O=toIObject(object);var i=0;var result=[];var key;for(key in O){if(key!=IE_PROTO)has(O,key)&&result.push(key);}// Don't enum bug & hidden keys
while(names.length>i){if(has(O,key=names[i++])){~arrayIndexOf(result,key)||result.push(key);}}return result;};},{"102":102,"11":11,"117":117,"41":41}],81:[function(_dereq_,module,exports){// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var $keys=_dereq_(80);var enumBugKeys=_dereq_(31);module.exports=Object.keys||function keys(O){return $keys(O,enumBugKeys);};},{"31":31,"80":80}],82:[function(_dereq_,module,exports){exports.f={}.propertyIsEnumerable;},{}],83:[function(_dereq_,module,exports){// most Object methods by ES6 should accept primitives
var $export=_dereq_(33);var core=_dereq_(23);var fails=_dereq_(35);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY];var exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1);}),'Object',exp);};},{"23":23,"33":33,"35":35}],84:[function(_dereq_,module,exports){var getKeys=_dereq_(81);var toIObject=_dereq_(117);var isEnum=_dereq_(82).f;module.exports=function(isEntries){return function(it){var O=toIObject(it);var keys=getKeys(O);var length=keys.length;var i=0;var result=[];var key;while(length>i){if(isEnum.call(O,key=keys[i++])){result.push(isEntries?[key,O[key]]:O[key]);}}return result;};};},{"117":117,"81":81,"82":82}],85:[function(_dereq_,module,exports){// all object keys, includes non-enumerable and symbols
var gOPN=_dereq_(77);var gOPS=_dereq_(78);var anObject=_dereq_(7);var Reflect=_dereq_(40).Reflect;module.exports=Reflect&&Reflect.ownKeys||function ownKeys(it){var keys=gOPN.f(anObject(it));var getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys;};},{"40":40,"7":7,"77":77,"78":78}],86:[function(_dereq_,module,exports){var $parseFloat=_dereq_(40).parseFloat;var $trim=_dereq_(111).trim;module.exports=1/$parseFloat(_dereq_(112)+'-0')!==-Infinity?function parseFloat(str){var string=$trim(String(str),3);var result=$parseFloat(string);return result===0&&string.charAt(0)=='-'?-0:result;}:$parseFloat;},{"111":111,"112":112,"40":40}],87:[function(_dereq_,module,exports){var $parseInt=_dereq_(40).parseInt;var $trim=_dereq_(111).trim;var ws=_dereq_(112);var hex=/^[-+]?0[xX]/;module.exports=$parseInt(ws+'08')!==8||$parseInt(ws+'0x16')!==22?function parseInt(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10));}:$parseInt;},{"111":111,"112":112,"40":40}],88:[function(_dereq_,module,exports){'use strict';var path=_dereq_(89);var invoke=_dereq_(46);var aFunction=_dereq_(3);module.exports=function()/* ...pargs */{var fn=aFunction(this);var length=arguments.length;var pargs=Array(length);var i=0;var _=path._;var holder=false;while(length>i){if((pargs[i]=arguments[i++])===_)holder=true;}return function()/* ...args */{var that=this;var aLen=arguments.length;var j=0;var k=0;var args;if(!holder&&!aLen)return invoke(fn,pargs,that);args=pargs.slice();if(holder)for(;length>j;j++){if(args[j]===_)args[j]=arguments[k++];}while(aLen>k){args.push(arguments[k++]);}return invoke(fn,args,that);};};},{"3":3,"46":46,"89":89}],89:[function(_dereq_,module,exports){module.exports=_dereq_(40);},{"40":40}],90:[function(_dereq_,module,exports){module.exports=function(exec){try{return{e:false,v:exec()};}catch(e){return{e:true,v:e};}};},{}],91:[function(_dereq_,module,exports){var newPromiseCapability=_dereq_(69);module.exports=function(C,x){var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise;};},{"69":69}],92:[function(_dereq_,module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value};};},{}],93:[function(_dereq_,module,exports){var redefine=_dereq_(94);module.exports=function(target,src,safe){for(var key in src){redefine(target,key,src[key],safe);}return target;};},{"94":94}],94:[function(_dereq_,module,exports){var global=_dereq_(40);var hide=_dereq_(42);var has=_dereq_(41);var SRC=_dereq_(124)('src');var TO_STRING='toString';var $toString=Function[TO_STRING];var TPL=(''+$toString).split(TO_STRING);_dereq_(23).inspectSource=function(it){return $toString.call(it);};(module.exports=function(O,key,val,safe){var isFunction=typeof val=='function';if(isFunction)has(val,'name')||hide(val,'name',key);if(O[key]===val)return;if(isFunction)has(val,SRC)||hide(val,SRC,O[key]?''+O[key]:TPL.join(String(key)));if(O===global){O[key]=val;}else if(!safe){delete O[key];hide(O,key,val);}else if(O[key]){O[key]=val;}else{hide(O,key,val);}// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype,TO_STRING,function toString(){return typeof this=='function'&&this[SRC]||$toString.call(this);});},{"124":124,"23":23,"40":40,"41":41,"42":42}],95:[function(_dereq_,module,exports){module.exports=function(regExp,replace){var replacer=replace===Object(replace)?function(part){return replace[part];}:replace;return function(it){return String(it).replace(regExp,replacer);};};},{}],96:[function(_dereq_,module,exports){// 7.2.9 SameValue(x, y)
module.exports=Object.is||function is(x,y){// eslint-disable-next-line no-self-compare
return x===y?x!==0||1/x===1/y:x!=x&&y!=y;};},{}],97:[function(_dereq_,module,exports){'use strict';// https://tc39.github.io/proposal-setmap-offrom/
var $export=_dereq_(33);var aFunction=_dereq_(3);var ctx=_dereq_(25);var forOf=_dereq_(39);module.exports=function(COLLECTION){$export($export.S,COLLECTION,{from:function from(source/* , mapFn, thisArg */){var mapFn=arguments[1];var mapping,A,n,cb;aFunction(this);mapping=mapFn!==undefined;if(mapping)aFunction(mapFn);if(source==undefined)return new this();A=[];if(mapping){n=0;cb=ctx(mapFn,arguments[2],2);forOf(source,false,function(nextItem){A.push(cb(nextItem,n++));});}else{forOf(source,false,A.push,A);}return new this(A);}});};},{"25":25,"3":3,"33":33,"39":39}],98:[function(_dereq_,module,exports){'use strict';// https://tc39.github.io/proposal-setmap-offrom/
var $export=_dereq_(33);module.exports=function(COLLECTION){$export($export.S,COLLECTION,{of:function of(){var length=arguments.length;var A=Array(length);while(length--){A[length]=arguments[length];}return new this(A);}});};},{"33":33}],99:[function(_dereq_,module,exports){// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */var isObject=_dereq_(51);var anObject=_dereq_(7);var check=function check(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!");};module.exports={set:Object.setPrototypeOf||('__proto__'in{}?// eslint-disable-line
function(test,buggy,set){try{set=_dereq_(25)(Function.call,_dereq_(75).f(Object.prototype,'__proto__').set,2);set(test,[]);buggy=!(test instanceof Array);}catch(e){buggy=true;}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O;};}({},false):undefined),check:check};},{"25":25,"51":51,"7":7,"75":75}],100:[function(_dereq_,module,exports){'use strict';var global=_dereq_(40);var dP=_dereq_(72);var DESCRIPTORS=_dereq_(29);var SPECIES=_dereq_(128)('species');module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])dP.f(C,SPECIES,{configurable:true,get:function get(){return this;}});};},{"128":128,"29":29,"40":40,"72":72}],101:[function(_dereq_,module,exports){var def=_dereq_(72).f;var has=_dereq_(41);var TAG=_dereq_(128)('toStringTag');module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag});};},{"128":128,"41":41,"72":72}],102:[function(_dereq_,module,exports){var shared=_dereq_(103)('keys');var uid=_dereq_(124);module.exports=function(key){return shared[key]||(shared[key]=uid(key));};},{"103":103,"124":124}],103:[function(_dereq_,module,exports){var global=_dereq_(40);var SHARED='__core-js_shared__';var store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={});};},{"40":40}],104:[function(_dereq_,module,exports){// 7.3.20 SpeciesConstructor(O, defaultConstructor)
var anObject=_dereq_(7);var aFunction=_dereq_(3);var SPECIES=_dereq_(128)('species');module.exports=function(O,D){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S);};},{"128":128,"3":3,"7":7}],105:[function(_dereq_,module,exports){'use strict';var fails=_dereq_(35);module.exports=function(method,arg){return!!method&&fails(function(){// eslint-disable-next-line no-useless-call
arg?method.call(null,function(){/* empty */},1):method.call(null);});};},{"35":35}],106:[function(_dereq_,module,exports){var toInteger=_dereq_(116);var defined=_dereq_(28);// true  -> String#at
// false -> String#codePointAt
module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that));var i=toInteger(pos);var l=s.length;var a,b;if(i<0||i>=l)return TO_STRING?'':undefined;a=s.charCodeAt(i);return a<0xd800||a>0xdbff||i+1===l||(b=s.charCodeAt(i+1))<0xdc00||b>0xdfff?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-0xd800<<10)+(b-0xdc00)+0x10000;};};},{"116":116,"28":28}],107:[function(_dereq_,module,exports){// helper for String#{startsWith, endsWith, includes}
var isRegExp=_dereq_(52);var defined=_dereq_(28);module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError('String#'+NAME+" doesn't accept regex!");return String(defined(that));};},{"28":28,"52":52}],108:[function(_dereq_,module,exports){var $export=_dereq_(33);var fails=_dereq_(35);var defined=_dereq_(28);var quot=/"/g;// B.2.3.2.1 CreateHTML(string, tag, attribute, value)
var createHTML=function createHTML(string,tag,attribute,value){var S=String(defined(string));var p1='<'+tag;if(attribute!=='')p1+=' '+attribute+'="'+String(value).replace(quot,'&quot;')+'"';return p1+'>'+S+'</'+tag+'>';};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML);$export($export.P+$export.F*fails(function(){var test=''[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3;}),'String',O);};},{"28":28,"33":33,"35":35}],109:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-string-pad-start-end
var toLength=_dereq_(118);var repeat=_dereq_(110);var defined=_dereq_(28);module.exports=function(that,maxLength,fillString,left){var S=String(defined(that));var stringLength=S.length;var fillStr=fillString===undefined?' ':String(fillString);var intMaxLength=toLength(maxLength);if(intMaxLength<=stringLength||fillStr=='')return S;var fillLen=intMaxLength-stringLength;var stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));if(stringFiller.length>fillLen)stringFiller=stringFiller.slice(0,fillLen);return left?stringFiller+S:S+stringFiller;};},{"110":110,"118":118,"28":28}],110:[function(_dereq_,module,exports){'use strict';var toInteger=_dereq_(116);var defined=_dereq_(28);module.exports=function repeat(count){var str=String(defined(this));var res='';var n=toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str)){if(n&1)res+=str;}return res;};},{"116":116,"28":28}],111:[function(_dereq_,module,exports){var $export=_dereq_(33);var defined=_dereq_(28);var fails=_dereq_(35);var spaces=_dereq_(112);var space='['+spaces+']';var non="\u200B\x85";var ltrim=RegExp('^'+space+space+'*');var rtrim=RegExp(space+space+'*$');var exporter=function exporter(KEY,exec,ALIAS){var exp={};var FORCE=fails(function(){return!!spaces[KEY]()||non[KEY]()!=non;});var fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];if(ALIAS)exp[ALIAS]=fn;$export($export.P+$export.F*FORCE,'String',exp);};// 1 -> String#trimLeft
// 2 -> String#trimRight
// 3 -> String#trim
var trim=exporter.trim=function(string,TYPE){string=String(defined(string));if(TYPE&1)string=string.replace(ltrim,'');if(TYPE&2)string=string.replace(rtrim,'');return string;};module.exports=exporter;},{"112":112,"28":28,"33":33,"35":35}],112:[function(_dereq_,module,exports){module.exports="\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";},{}],113:[function(_dereq_,module,exports){var ctx=_dereq_(25);var invoke=_dereq_(46);var html=_dereq_(43);var cel=_dereq_(30);var global=_dereq_(40);var process=global.process;var setTask=global.setImmediate;var clearTask=global.clearImmediate;var MessageChannel=global.MessageChannel;var Dispatch=global.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE='onreadystatechange';var defer,channel,port;var run=function run(){var id=+this;// eslint-disable-next-line no-prototype-builtins
if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn();}};var listener=function listener(event){run.call(event.data);};// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if(!setTask||!clearTask){setTask=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i){args.push(arguments[i++]);}queue[++counter]=function(){// eslint-disable-next-line no-new-func
invoke(typeof fn=='function'?fn:Function(fn),args);};defer(counter);return counter;};clearTask=function clearImmediate(id){delete queue[id];};// Node.js 0.8-
if(_dereq_(18)(process)=='process'){defer=function defer(id){process.nextTick(ctx(run,id,1));};// Sphere (JS game engine) Dispatch API
}else if(Dispatch&&Dispatch.now){defer=function defer(id){Dispatch.now(ctx(run,id,1));};// Browsers with MessageChannel, includes WebWorkers
}else if(MessageChannel){channel=new MessageChannel();port=channel.port2;channel.port1.onmessage=listener;defer=ctx(port.postMessage,port,1);// Browsers with postMessage, skip WebWorkers
// IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
}else if(global.addEventListener&&typeof postMessage=='function'&&!global.importScripts){defer=function defer(id){global.postMessage(id+'','*');};global.addEventListener('message',listener,false);// IE8-
}else if(ONREADYSTATECHANGE in cel('script')){defer=function defer(id){html.appendChild(cel('script'))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run.call(id);};};// Rest old browsers
}else{defer=function defer(id){setTimeout(ctx(run,id,1),0);};}}module.exports={set:setTask,clear:clearTask};},{"18":18,"25":25,"30":30,"40":40,"43":43,"46":46}],114:[function(_dereq_,module,exports){var toInteger=_dereq_(116);var max=Math.max;var min=Math.min;module.exports=function(index,length){index=toInteger(index);return index<0?max(index+length,0):min(index,length);};},{"116":116}],115:[function(_dereq_,module,exports){// https://tc39.github.io/ecma262/#sec-toindex
var toInteger=_dereq_(116);var toLength=_dereq_(118);module.exports=function(it){if(it===undefined)return 0;var number=toInteger(it);var length=toLength(number);if(number!==length)throw RangeError('Wrong length!');return length;};},{"116":116,"118":118}],116:[function(_dereq_,module,exports){// 7.1.4 ToInteger
var ceil=Math.ceil;var floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it);};},{}],117:[function(_dereq_,module,exports){// to indexed object, toObject with fallback for non-array-like ES3 strings
var IObject=_dereq_(47);var defined=_dereq_(28);module.exports=function(it){return IObject(defined(it));};},{"28":28,"47":47}],118:[function(_dereq_,module,exports){// 7.1.15 ToLength
var toInteger=_dereq_(116);var min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),0x1fffffffffffff):0;// pow(2, 53) - 1 == 9007199254740991
};},{"116":116}],119:[function(_dereq_,module,exports){// 7.1.13 ToObject(argument)
var defined=_dereq_(28);module.exports=function(it){return Object(defined(it));};},{"28":28}],120:[function(_dereq_,module,exports){// 7.1.1 ToPrimitive(input [, PreferredType])
var isObject=_dereq_(51);// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&typeof(fn=it.toString)=='function'&&!isObject(val=fn.call(it)))return val;if(typeof(fn=it.valueOf)=='function'&&!isObject(val=fn.call(it)))return val;if(!S&&typeof(fn=it.toString)=='function'&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value");};},{"51":51}],121:[function(_dereq_,module,exports){'use strict';if(_dereq_(29)){var LIBRARY=_dereq_(60);var global=_dereq_(40);var fails=_dereq_(35);var $export=_dereq_(33);var $typed=_dereq_(123);var $buffer=_dereq_(122);var ctx=_dereq_(25);var anInstance=_dereq_(6);var propertyDesc=_dereq_(92);var hide=_dereq_(42);var redefineAll=_dereq_(93);var toInteger=_dereq_(116);var toLength=_dereq_(118);var toIndex=_dereq_(115);var toAbsoluteIndex=_dereq_(114);var toPrimitive=_dereq_(120);var has=_dereq_(41);var classof=_dereq_(17);var isObject=_dereq_(51);var toObject=_dereq_(119);var isArrayIter=_dereq_(48);var create=_dereq_(71);var getPrototypeOf=_dereq_(79);var gOPN=_dereq_(77).f;var getIterFn=_dereq_(129);var uid=_dereq_(124);var wks=_dereq_(128);var createArrayMethod=_dereq_(12);var createArrayIncludes=_dereq_(11);var speciesConstructor=_dereq_(104);var ArrayIterators=_dereq_(141);var Iterators=_dereq_(58);var $iterDetect=_dereq_(56);var setSpecies=_dereq_(100);var arrayFill=_dereq_(9);var arrayCopyWithin=_dereq_(8);var $DP=_dereq_(72);var $GOPD=_dereq_(75);var dP=$DP.f;var gOPD=$GOPD.f;var RangeError=global.RangeError;var TypeError=global.TypeError;var Uint8Array=global.Uint8Array;var ARRAY_BUFFER='ArrayBuffer';var SHARED_BUFFER='Shared'+ARRAY_BUFFER;var BYTES_PER_ELEMENT='BYTES_PER_ELEMENT';var PROTOTYPE='prototype';var ArrayProto=Array[PROTOTYPE];var $ArrayBuffer=$buffer.ArrayBuffer;var $DataView=$buffer.DataView;var arrayForEach=createArrayMethod(0);var arrayFilter=createArrayMethod(2);var arraySome=createArrayMethod(3);var arrayEvery=createArrayMethod(4);var arrayFind=createArrayMethod(5);var arrayFindIndex=createArrayMethod(6);var arrayIncludes=createArrayIncludes(true);var arrayIndexOf=createArrayIncludes(false);var arrayValues=ArrayIterators.values;var arrayKeys=ArrayIterators.keys;var arrayEntries=ArrayIterators.entries;var arrayLastIndexOf=ArrayProto.lastIndexOf;var arrayReduce=ArrayProto.reduce;var arrayReduceRight=ArrayProto.reduceRight;var arrayJoin=ArrayProto.join;var arraySort=ArrayProto.sort;var arraySlice=ArrayProto.slice;var arrayToString=ArrayProto.toString;var arrayToLocaleString=ArrayProto.toLocaleString;var ITERATOR=wks('iterator');var TAG=wks('toStringTag');var TYPED_CONSTRUCTOR=uid('typed_constructor');var DEF_CONSTRUCTOR=uid('def_constructor');var ALL_CONSTRUCTORS=$typed.CONSTR;var TYPED_ARRAY=$typed.TYPED;var VIEW=$typed.VIEW;var WRONG_LENGTH='Wrong length!';var $map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length);});var LITTLE_ENDIAN=fails(function(){// eslint-disable-next-line no-undef
return new Uint8Array(new Uint16Array([1]).buffer)[0]===1;});var FORCED_SET=!!Uint8Array&&!!Uint8Array[PROTOTYPE].set&&fails(function(){new Uint8Array(1).set({});});var toOffset=function toOffset(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError('Wrong offset!');return offset;};var validate=function validate(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+' is not a typed array!');};var allocate=function allocate(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C)){throw TypeError('It is not a typed array constructor!');}return new C(length);};var speciesFromList=function speciesFromList(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list);};var fromList=function fromList(C,list){var index=0;var length=list.length;var result=allocate(C,length);while(length>index){result[index]=list[index++];}return result;};var addGetter=function addGetter(it,key,internal){dP(it,key,{get:function get(){return this._d[internal];}});};var $from=function from(source/* , mapfn, thisArg */){var O=toObject(source);var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var iterFn=getIterFn(O);var i,length,values,result,step,iterator;if(iterFn!=undefined&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++){values.push(step.value);}O=values;}if(mapping&&aLen>2)mapfn=ctx(mapfn,arguments[2],2);for(i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++){result[i]=mapping?mapfn(O[i],i):O[i];}return result;};var $of=function of()/* ...items */{var index=0;var length=arguments.length;var result=allocate(this,length);while(length>index){result[index]=arguments[index++];}return result;};// iOS Safari 6.x fails here
var TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1));});var $toLocaleString=function toLocaleString(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments);};var proto={copyWithin:function copyWithin(target,start/* , end */){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:undefined);},every:function every(callbackfn/* , thisArg */){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined);},fill:function fill(value/* , start, end */){// eslint-disable-line no-unused-vars
return arrayFill.apply(validate(this),arguments);},filter:function filter(callbackfn/* , thisArg */){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined));},find:function find(predicate/* , thisArg */){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:undefined);},findIndex:function findIndex(predicate/* , thisArg */){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:undefined);},forEach:function forEach(callbackfn/* , thisArg */){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined);},indexOf:function indexOf(searchElement/* , fromIndex */){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:undefined);},includes:function includes(searchElement/* , fromIndex */){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:undefined);},join:function join(separator){// eslint-disable-line no-unused-vars
return arrayJoin.apply(validate(this),arguments);},lastIndexOf:function lastIndexOf(searchElement/* , fromIndex */){// eslint-disable-line no-unused-vars
return arrayLastIndexOf.apply(validate(this),arguments);},map:function map(mapfn/* , thisArg */){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:undefined);},reduce:function reduce(callbackfn/* , initialValue */){// eslint-disable-line no-unused-vars
return arrayReduce.apply(validate(this),arguments);},reduceRight:function reduceRight(callbackfn/* , initialValue */){// eslint-disable-line no-unused-vars
return arrayReduceRight.apply(validate(this),arguments);},reverse:function reverse(){var that=this;var length=validate(that).length;var middle=Math.floor(length/2);var index=0;var value;while(index<middle){value=that[index];that[index++]=that[--length];that[length]=value;}return that;},some:function some(callbackfn/* , thisArg */){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined);},sort:function sort(comparefn){return arraySort.call(validate(this),comparefn);},subarray:function subarray(begin,end){var O=validate(this);var length=O.length;var $begin=toAbsoluteIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((end===undefined?length:toAbsoluteIndex(end,length))-$begin));}};var $slice=function slice(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end));};var $set=function set(arrayLike/* , offset */){validate(this);var offset=toOffset(arguments[1],1);var length=this.length;var src=toObject(arrayLike);var len=toLength(src.length);var index=0;if(len+offset>length)throw RangeError(WRONG_LENGTH);while(index<len){this[offset+index]=src[index++];}};var $iterators={entries:function entries(){return arrayEntries.call(validate(this));},keys:function keys(){return arrayKeys.call(validate(this));},values:function values(){return arrayValues.call(validate(this));}};var isTAIndex=function isTAIndex(target,key){return isObject(target)&&target[TYPED_ARRAY]&&_typeof(key)!='symbol'&&key in target&&String(+key)==String(key);};var $getDesc=function getOwnPropertyDescriptor(target,key){return isTAIndex(target,key=toPrimitive(key,true))?propertyDesc(2,target[key]):gOPD(target,key);};var $setDesc=function defineProperty(target,key,desc){if(isTAIndex(target,key=toPrimitive(key,true))&&isObject(desc)&&has(desc,'value')&&!has(desc,'get')&&!has(desc,'set')// TODO: add validation descriptor w/o calling accessors
&&!desc.configurable&&(!has(desc,'writable')||desc.writable)&&(!has(desc,'enumerable')||desc.enumerable)){target[key]=desc.value;return target;}return dP(target,key,desc);};if(!ALL_CONSTRUCTORS){$GOPD.f=$getDesc;$DP.f=$setDesc;}$export($export.S+$export.F*!ALL_CONSTRUCTORS,'Object',{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc});if(fails(function(){arrayToString.call({});})){arrayToString=arrayToLocaleString=function toString(){return arrayJoin.call(this);};}var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators);hide($TypedArrayPrototype$,ITERATOR,$iterators.values);redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function constructor(){/* noop */},toString:arrayToString,toLocaleString:$toLocaleString});addGetter($TypedArrayPrototype$,'buffer','b');addGetter($TypedArrayPrototype$,'byteOffset','o');addGetter($TypedArrayPrototype$,'byteLength','l');addGetter($TypedArrayPrototype$,'length','e');dP($TypedArrayPrototype$,TAG,{get:function get(){return this[TYPED_ARRAY];}});// eslint-disable-next-line max-statements
module.exports=function(KEY,BYTES,wrapper,CLAMPED){CLAMPED=!!CLAMPED;var NAME=KEY+(CLAMPED?'Clamped':'')+'Array';var GETTER='get'+KEY;var SETTER='set'+KEY;var TypedArray=global[NAME];var Base=TypedArray||{};var TAC=TypedArray&&getPrototypeOf(TypedArray);var FORCED=!TypedArray||!$typed.ABV;var O={};var TypedArrayPrototype=TypedArray&&TypedArray[PROTOTYPE];var getter=function getter(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN);};var setter=function setter(that,index,value){var data=that._d;if(CLAMPED)value=(value=Math.round(value))<0?0:value>0xff?0xff:value&0xff;data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN);};var addElement=function addElement(that,index){dP(that,index,{get:function get(){return getter(this,index);},set:function set(value){return setter(this,index,value);},enumerable:true});};if(FORCED){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,'_d');var index=0;var offset=0;var buffer,byteLength,length,klass;if(!isObject(data)){length=toIndex(data);byteLength=length*BYTES;buffer=new $ArrayBuffer(byteLength);}else if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){buffer=data;offset=toOffset($offset,BYTES);var $len=data.byteLength;if($length===undefined){if($len%BYTES)throw RangeError(WRONG_LENGTH);byteLength=$len-offset;if(byteLength<0)throw RangeError(WRONG_LENGTH);}else{byteLength=toLength($length)*BYTES;if(byteLength+offset>$len)throw RangeError(WRONG_LENGTH);}length=byteLength/BYTES;}else if(TYPED_ARRAY in data){return fromList(TypedArray,data);}else{return $from.call(TypedArray,data);}hide(that,'_d',{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});while(index<length){addElement(that,index++);}});TypedArrayPrototype=TypedArray[PROTOTYPE]=create($TypedArrayPrototype$);hide(TypedArrayPrototype,'constructor',TypedArray);}else if(!fails(function(){TypedArray(1);})||!fails(function(){new TypedArray(-1);// eslint-disable-line no-new
})||!$iterDetect(function(iter){new TypedArray();// eslint-disable-line no-new
new TypedArray(null);// eslint-disable-line no-new
new TypedArray(1.5);// eslint-disable-line no-new
new TypedArray(iter);// eslint-disable-line no-new
},true)){TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME);var klass;// `ws` module bug, temporarily remove validation length for Uint8Array
// https://github.com/websockets/ws/pull/645
if(!isObject(data))return new Base(toIndex(data));if(data instanceof $ArrayBuffer||(klass=classof(data))==ARRAY_BUFFER||klass==SHARED_BUFFER){return $length!==undefined?new Base(data,toOffset($offset,BYTES),$length):$offset!==undefined?new Base(data,toOffset($offset,BYTES)):new Base(data);}if(TYPED_ARRAY in data)return fromList(TypedArray,data);return $from.call(TypedArray,data);});arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){if(!(key in TypedArray))hide(TypedArray,key,Base[key]);});TypedArray[PROTOTYPE]=TypedArrayPrototype;if(!LIBRARY)TypedArrayPrototype.constructor=TypedArray;}var $nativeIterator=TypedArrayPrototype[ITERATOR];var CORRECT_ITER_NAME=!!$nativeIterator&&($nativeIterator.name=='values'||$nativeIterator.name==undefined);var $iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,true);hide(TypedArrayPrototype,TYPED_ARRAY,NAME);hide(TypedArrayPrototype,VIEW,true);hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray);if(CLAMPED?new TypedArray(1)[TAG]!=NAME:!(TAG in TypedArrayPrototype)){dP(TypedArrayPrototype,TAG,{get:function get(){return NAME;}});}O[NAME]=TypedArray;$export($export.G+$export.W+$export.F*(TypedArray!=Base),O);$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES});$export($export.S+$export.F*fails(function(){Base.of.call(TypedArray,1);}),NAME,{from:$from,of:$of});if(!(BYTES_PER_ELEMENT in TypedArrayPrototype))hide(TypedArrayPrototype,BYTES_PER_ELEMENT,BYTES);$export($export.P,NAME,proto);setSpecies(NAME);$export($export.P+$export.F*FORCED_SET,NAME,{set:$set});$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators);if(!LIBRARY&&TypedArrayPrototype.toString!=arrayToString)TypedArrayPrototype.toString=arrayToString;$export($export.P+$export.F*fails(function(){new TypedArray(1).slice();}),NAME,{slice:$slice});$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString();})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2]);})),NAME,{toLocaleString:$toLocaleString});Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator;if(!LIBRARY&&!CORRECT_ITER_NAME)hide(TypedArrayPrototype,ITERATOR,$iterator);};}else module.exports=function(){/* empty */};},{"100":100,"104":104,"11":11,"114":114,"115":115,"116":116,"118":118,"119":119,"12":12,"120":120,"122":122,"123":123,"124":124,"128":128,"129":129,"141":141,"17":17,"25":25,"29":29,"33":33,"35":35,"40":40,"41":41,"42":42,"48":48,"51":51,"56":56,"58":58,"6":6,"60":60,"71":71,"72":72,"75":75,"77":77,"79":79,"8":8,"9":9,"92":92,"93":93}],122:[function(_dereq_,module,exports){'use strict';var global=_dereq_(40);var DESCRIPTORS=_dereq_(29);var LIBRARY=_dereq_(60);var $typed=_dereq_(123);var hide=_dereq_(42);var redefineAll=_dereq_(93);var fails=_dereq_(35);var anInstance=_dereq_(6);var toInteger=_dereq_(116);var toLength=_dereq_(118);var toIndex=_dereq_(115);var gOPN=_dereq_(77).f;var dP=_dereq_(72).f;var arrayFill=_dereq_(9);var setToStringTag=_dereq_(101);var ARRAY_BUFFER='ArrayBuffer';var DATA_VIEW='DataView';var PROTOTYPE='prototype';var WRONG_LENGTH='Wrong length!';var WRONG_INDEX='Wrong index!';var $ArrayBuffer=global[ARRAY_BUFFER];var $DataView=global[DATA_VIEW];var Math=global.Math;var RangeError=global.RangeError;// eslint-disable-next-line no-shadow-restricted-names
var Infinity=global.Infinity;var BaseBuffer=$ArrayBuffer;var abs=Math.abs;var pow=Math.pow;var floor=Math.floor;var log=Math.log;var LN2=Math.LN2;var BUFFER='buffer';var BYTE_LENGTH='byteLength';var BYTE_OFFSET='byteOffset';var $BUFFER=DESCRIPTORS?'_b':BUFFER;var $LENGTH=DESCRIPTORS?'_l':BYTE_LENGTH;var $OFFSET=DESCRIPTORS?'_o':BYTE_OFFSET;// IEEE754 conversions based on https://github.com/feross/ieee754
function packIEEE754(value,mLen,nBytes){var buffer=Array(nBytes);var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?pow(2,-24)-pow(2,-77):0;var i=0;var s=value<0||value===0&&1/value<0?1:0;var e,m,c;value=abs(value);// eslint-disable-next-line no-self-compare
if(value!=value||value===Infinity){// eslint-disable-next-line no-self-compare
m=value!=value?1:0;e=eMax;}else{e=floor(log(value)/LN2);if(value*(c=pow(2,-e))<1){e--;c*=2;}if(e+eBias>=1){value+=rt/c;}else{value+=rt*pow(2,1-eBias);}if(value*c>=2){e++;c/=2;}if(e+eBias>=eMax){m=0;e=eMax;}else if(e+eBias>=1){m=(value*c-1)*pow(2,mLen);e=e+eBias;}else{m=value*pow(2,eBias-1)*pow(2,mLen);e=0;}}for(;mLen>=8;buffer[i++]=m&255,m/=256,mLen-=8){;}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[i++]=e&255,e/=256,eLen-=8){;}buffer[--i]|=s*128;return buffer;}function unpackIEEE754(buffer,mLen,nBytes){var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=eLen-7;var i=nBytes-1;var s=buffer[i--];var e=s&127;var m;s>>=7;for(;nBits>0;e=e*256+buffer[i],i--,nBits-=8){;}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[i],i--,nBits-=8){;}if(e===0){e=1-eBias;}else if(e===eMax){return m?NaN:s?-Infinity:Infinity;}else{m=m+pow(2,mLen);e=e-eBias;}return(s?-1:1)*m*pow(2,e-mLen);}function unpackI32(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0];}function packI8(it){return[it&0xff];}function packI16(it){return[it&0xff,it>>8&0xff];}function packI32(it){return[it&0xff,it>>8&0xff,it>>16&0xff,it>>24&0xff];}function packF64(it){return packIEEE754(it,52,8);}function packF32(it){return packIEEE754(it,23,4);}function addGetter(C,key,internal){dP(C[PROTOTYPE],key,{get:function get(){return this[internal];}});}function get(view,bytes,index,isLittleEndian){var numIndex=+index;var intIndex=toIndex(numIndex);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b;var start=intIndex+view[$OFFSET];var pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse();}function set(view,bytes,index,conversion,value,isLittleEndian){var numIndex=+index;var intIndex=toIndex(numIndex);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b;var start=intIndex+view[$OFFSET];var pack=conversion(+value);for(var i=0;i<bytes;i++){store[start+i]=pack[isLittleEndian?i:bytes-i-1];}}if(!$typed.ABV){$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var byteLength=toIndex(length);this._b=arrayFill.call(Array(byteLength),0);this[$LENGTH]=byteLength;};$DataView=function DataView(buffer,byteOffset,byteLength){anInstance(this,$DataView,DATA_VIEW);anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=buffer[$LENGTH];var offset=toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError('Wrong offset!');byteLength=byteLength===undefined?bufferLength-offset:toLength(byteLength);if(offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);this[$BUFFER]=buffer;this[$OFFSET]=offset;this[$LENGTH]=byteLength;};if(DESCRIPTORS){addGetter($ArrayBuffer,BYTE_LENGTH,'_l');addGetter($DataView,BUFFER,'_b');addGetter($DataView,BYTE_LENGTH,'_l');addGetter($DataView,BYTE_OFFSET,'_o');}redefineAll($DataView[PROTOTYPE],{getInt8:function getInt8(byteOffset){return get(this,1,byteOffset)[0]<<24>>24;},getUint8:function getUint8(byteOffset){return get(this,1,byteOffset)[0];},getInt16:function getInt16(byteOffset/* , littleEndian */){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16;},getUint16:function getUint16(byteOffset/* , littleEndian */){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0];},getInt32:function getInt32(byteOffset/* , littleEndian */){return unpackI32(get(this,4,byteOffset,arguments[1]));},getUint32:function getUint32(byteOffset/* , littleEndian */){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0;},getFloat32:function getFloat32(byteOffset/* , littleEndian */){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4);},getFloat64:function getFloat64(byteOffset/* , littleEndian */){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8);},setInt8:function setInt8(byteOffset,value){set(this,1,byteOffset,packI8,value);},setUint8:function setUint8(byteOffset,value){set(this,1,byteOffset,packI8,value);},setInt16:function setInt16(byteOffset,value/* , littleEndian */){set(this,2,byteOffset,packI16,value,arguments[2]);},setUint16:function setUint16(byteOffset,value/* , littleEndian */){set(this,2,byteOffset,packI16,value,arguments[2]);},setInt32:function setInt32(byteOffset,value/* , littleEndian */){set(this,4,byteOffset,packI32,value,arguments[2]);},setUint32:function setUint32(byteOffset,value/* , littleEndian */){set(this,4,byteOffset,packI32,value,arguments[2]);},setFloat32:function setFloat32(byteOffset,value/* , littleEndian */){set(this,4,byteOffset,packF32,value,arguments[2]);},setFloat64:function setFloat64(byteOffset,value/* , littleEndian */){set(this,8,byteOffset,packF64,value,arguments[2]);}});}else{if(!fails(function(){$ArrayBuffer(1);})||!fails(function(){new $ArrayBuffer(-1);// eslint-disable-line no-new
})||fails(function(){new $ArrayBuffer();// eslint-disable-line no-new
new $ArrayBuffer(1.5);// eslint-disable-line no-new
new $ArrayBuffer(NaN);// eslint-disable-line no-new
return $ArrayBuffer.name!=ARRAY_BUFFER;})){$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer);return new BaseBuffer(toIndex(length));};var ArrayBufferProto=$ArrayBuffer[PROTOTYPE]=BaseBuffer[PROTOTYPE];for(var keys=gOPN(BaseBuffer),j=0,key;keys.length>j;){if(!((key=keys[j++])in $ArrayBuffer))hide($ArrayBuffer,key,BaseBuffer[key]);}if(!LIBRARY)ArrayBufferProto.constructor=$ArrayBuffer;}// iOS Safari 7.x bug
var view=new $DataView(new $ArrayBuffer(2));var $setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648);view.setInt8(1,2147483649);if(view.getInt8(0)||!view.getInt8(1))redefineAll($DataView[PROTOTYPE],{setInt8:function setInt8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24);},setUint8:function setUint8(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24);}},true);}setToStringTag($ArrayBuffer,ARRAY_BUFFER);setToStringTag($DataView,DATA_VIEW);hide($DataView[PROTOTYPE],$typed.VIEW,true);exports[ARRAY_BUFFER]=$ArrayBuffer;exports[DATA_VIEW]=$DataView;},{"101":101,"115":115,"116":116,"118":118,"123":123,"29":29,"35":35,"40":40,"42":42,"6":6,"60":60,"72":72,"77":77,"9":9,"93":93}],123:[function(_dereq_,module,exports){var global=_dereq_(40);var hide=_dereq_(42);var uid=_dereq_(124);var TYPED=uid('typed_array');var VIEW=uid('view');var ABV=!!(global.ArrayBuffer&&global.DataView);var CONSTR=ABV;var i=0;var l=9;var Typed;var TypedArrayConstructors='Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'.split(',');while(i<l){if(Typed=global[TypedArrayConstructors[i++]]){hide(Typed.prototype,TYPED,true);hide(Typed.prototype,VIEW,true);}else CONSTR=false;}module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW};},{"124":124,"40":40,"42":42}],124:[function(_dereq_,module,exports){var id=0;var px=Math.random();module.exports=function(key){return'Symbol('.concat(key===undefined?'':key,')_',(++id+px).toString(36));};},{}],125:[function(_dereq_,module,exports){var isObject=_dereq_(51);module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError('Incompatible receiver, '+TYPE+' required!');return it;};},{"51":51}],126:[function(_dereq_,module,exports){var global=_dereq_(40);var core=_dereq_(23);var LIBRARY=_dereq_(60);var wksExt=_dereq_(127);var defineProperty=_dereq_(72).f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});if(name.charAt(0)!='_'&&!(name in $Symbol))defineProperty($Symbol,name,{value:wksExt.f(name)});};},{"127":127,"23":23,"40":40,"60":60,"72":72}],127:[function(_dereq_,module,exports){exports.f=_dereq_(128);},{"128":128}],128:[function(_dereq_,module,exports){var store=_dereq_(103)('wks');var uid=_dereq_(124);var _Symbol=_dereq_(40).Symbol;var USE_SYMBOL=typeof _Symbol=='function';var $exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&_Symbol[name]||(USE_SYMBOL?_Symbol:uid)('Symbol.'+name));};$exports.store=store;},{"103":103,"124":124,"40":40}],129:[function(_dereq_,module,exports){var classof=_dereq_(17);var ITERATOR=_dereq_(128)('iterator');var Iterators=_dereq_(58);module.exports=_dereq_(23).getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it['@@iterator']||Iterators[classof(it)];};},{"128":128,"17":17,"23":23,"58":58}],130:[function(_dereq_,module,exports){// https://github.com/benjamingr/RexExp.escape
var $export=_dereq_(33);var $re=_dereq_(95)(/[\\^$*+?.()|[\]{}]/g,'\\$&');$export($export.S,'RegExp',{escape:function escape(it){return $re(it);}});},{"33":33,"95":95}],131:[function(_dereq_,module,exports){// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)
var $export=_dereq_(33);$export($export.P,'Array',{copyWithin:_dereq_(8)});_dereq_(5)('copyWithin');},{"33":33,"5":5,"8":8}],132:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $every=_dereq_(12)(4);$export($export.P+$export.F*!_dereq_(105)([].every,true),'Array',{// 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])
every:function every(callbackfn/* , thisArg */){return $every(this,callbackfn,arguments[1]);}});},{"105":105,"12":12,"33":33}],133:[function(_dereq_,module,exports){// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)
var $export=_dereq_(33);$export($export.P,'Array',{fill:_dereq_(9)});_dereq_(5)('fill');},{"33":33,"5":5,"9":9}],134:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $filter=_dereq_(12)(2);$export($export.P+$export.F*!_dereq_(105)([].filter,true),'Array',{// 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])
filter:function filter(callbackfn/* , thisArg */){return $filter(this,callbackfn,arguments[1]);}});},{"105":105,"12":12,"33":33}],135:[function(_dereq_,module,exports){'use strict';// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)
var $export=_dereq_(33);var $find=_dereq_(12)(6);var KEY='findIndex';var forced=true;// Shouldn't skip holes
if(KEY in[])Array(1)[KEY](function(){forced=false;});$export($export.P+$export.F*forced,'Array',{findIndex:function findIndex(callbackfn/* , that = undefined */){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});_dereq_(5)(KEY);},{"12":12,"33":33,"5":5}],136:[function(_dereq_,module,exports){'use strict';// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)
var $export=_dereq_(33);var $find=_dereq_(12)(5);var KEY='find';var forced=true;// Shouldn't skip holes
if(KEY in[])Array(1)[KEY](function(){forced=false;});$export($export.P+$export.F*forced,'Array',{find:function find(callbackfn/* , that = undefined */){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});_dereq_(5)(KEY);},{"12":12,"33":33,"5":5}],137:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $forEach=_dereq_(12)(0);var STRICT=_dereq_(105)([].forEach,true);$export($export.P+$export.F*!STRICT,'Array',{// 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])
forEach:function forEach(callbackfn/* , thisArg */){return $forEach(this,callbackfn,arguments[1]);}});},{"105":105,"12":12,"33":33}],138:[function(_dereq_,module,exports){'use strict';var ctx=_dereq_(25);var $export=_dereq_(33);var toObject=_dereq_(119);var call=_dereq_(53);var isArrayIter=_dereq_(48);var toLength=_dereq_(118);var createProperty=_dereq_(24);var getIterFn=_dereq_(129);$export($export.S+$export.F*!_dereq_(56)(function(iter){Array.from(iter);}),'Array',{// 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)
from:function from(arrayLike/* , mapfn = undefined, thisArg = undefined */){var O=toObject(arrayLike);var C=typeof this=='function'?this:Array;var aLen=arguments.length;var mapfn=aLen>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iterFn=getIterFn(O);var length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2);// if object isn't iterable or it's array with default iterator - use simple case
if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C();!(step=iterator.next()).done;index++){createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],true):step.value);}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index]);}}result.length=index;return result;}});},{"118":118,"119":119,"129":129,"24":24,"25":25,"33":33,"48":48,"53":53,"56":56}],139:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $indexOf=_dereq_(11)(false);var $native=[].indexOf;var NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!_dereq_(105)($native)),'Array',{// 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])
indexOf:function indexOf(searchElement/* , fromIndex = 0 */){return NEGATIVE_ZERO// convert -0 to +0
?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1]);}});},{"105":105,"11":11,"33":33}],140:[function(_dereq_,module,exports){// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)
var $export=_dereq_(33);$export($export.S,'Array',{isArray:_dereq_(49)});},{"33":33,"49":49}],141:[function(_dereq_,module,exports){'use strict';var addToUnscopables=_dereq_(5);var step=_dereq_(57);var Iterators=_dereq_(58);var toIObject=_dereq_(117);// 22.1.3.4 Array.prototype.entries()
// 22.1.3.13 Array.prototype.keys()
// 22.1.3.29 Array.prototype.values()
// 22.1.3.30 Array.prototype[@@iterator]()
module.exports=_dereq_(55)(Array,'Array',function(iterated,kind){this._t=toIObject(iterated);// target
this._i=0;// next index
this._k=kind;// kind
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()
},function(){var O=this._t;var kind=this._k;var index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1);}if(kind=='keys')return step(0,index);if(kind=='values')return step(0,O[index]);return step(0,[index,O[index]]);},'values');// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)
Iterators.Arguments=Iterators.Array;addToUnscopables('keys');addToUnscopables('values');addToUnscopables('entries');},{"117":117,"5":5,"55":55,"57":57,"58":58}],142:[function(_dereq_,module,exports){'use strict';// 22.1.3.13 Array.prototype.join(separator)
var $export=_dereq_(33);var toIObject=_dereq_(117);var arrayJoin=[].join;// fallback for not array-like strings
$export($export.P+$export.F*(_dereq_(47)!=Object||!_dereq_(105)(arrayJoin)),'Array',{join:function join(separator){return arrayJoin.call(toIObject(this),separator===undefined?',':separator);}});},{"105":105,"117":117,"33":33,"47":47}],143:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toIObject=_dereq_(117);var toInteger=_dereq_(116);var toLength=_dereq_(118);var $native=[].lastIndexOf;var NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!_dereq_(105)($native)),'Array',{// 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])
lastIndexOf:function lastIndexOf(searchElement/* , fromIndex = @[*-1] */){// convert -0 to +0
if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var O=toIObject(this);var length=toLength(O.length);var index=length-1;if(arguments.length>1)index=Math.min(index,toInteger(arguments[1]));if(index<0)index=length+index;for(;index>=0;index--){if(index in O)if(O[index]===searchElement)return index||0;}return-1;}});},{"105":105,"116":116,"117":117,"118":118,"33":33}],144:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $map=_dereq_(12)(1);$export($export.P+$export.F*!_dereq_(105)([].map,true),'Array',{// 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])
map:function map(callbackfn/* , thisArg */){return $map(this,callbackfn,arguments[1]);}});},{"105":105,"12":12,"33":33}],145:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var createProperty=_dereq_(24);// WebKit Array.of isn't generic
$export($export.S+$export.F*_dereq_(35)(function(){function F(){/* empty */}return!(Array.of.call(F)instanceof F);}),'Array',{// 22.1.2.3 Array.of( ...items)
of:function of()/* ...args */{var index=0;var aLen=arguments.length;var result=new(typeof this=='function'?this:Array)(aLen);while(aLen>index){createProperty(result,index,arguments[index++]);}result.length=aLen;return result;}});},{"24":24,"33":33,"35":35}],146:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $reduce=_dereq_(13);$export($export.P+$export.F*!_dereq_(105)([].reduceRight,true),'Array',{// 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])
reduceRight:function reduceRight(callbackfn/* , initialValue */){return $reduce(this,callbackfn,arguments.length,arguments[1],true);}});},{"105":105,"13":13,"33":33}],147:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $reduce=_dereq_(13);$export($export.P+$export.F*!_dereq_(105)([].reduce,true),'Array',{// 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])
reduce:function reduce(callbackfn/* , initialValue */){return $reduce(this,callbackfn,arguments.length,arguments[1],false);}});},{"105":105,"13":13,"33":33}],148:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var html=_dereq_(43);var cof=_dereq_(18);var toAbsoluteIndex=_dereq_(114);var toLength=_dereq_(118);var arraySlice=[].slice;// fallback for not array-like ES3 strings and DOM objects
$export($export.P+$export.F*_dereq_(35)(function(){if(html)arraySlice.call(html);}),'Array',{slice:function slice(begin,end){var len=toLength(this.length);var klass=cof(this);end=end===undefined?len:end;if(klass=='Array')return arraySlice.call(this,begin,end);var start=toAbsoluteIndex(begin,len);var upTo=toAbsoluteIndex(end,len);var size=toLength(upTo-start);var cloned=Array(size);var i=0;for(;i<size;i++){cloned[i]=klass=='String'?this.charAt(start+i):this[start+i];}return cloned;}});},{"114":114,"118":118,"18":18,"33":33,"35":35,"43":43}],149:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $some=_dereq_(12)(3);$export($export.P+$export.F*!_dereq_(105)([].some,true),'Array',{// 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])
some:function some(callbackfn/* , thisArg */){return $some(this,callbackfn,arguments[1]);}});},{"105":105,"12":12,"33":33}],150:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var aFunction=_dereq_(3);var toObject=_dereq_(119);var fails=_dereq_(35);var $sort=[].sort;var test=[1,2,3];$export($export.P+$export.F*(fails(function(){// IE8-
test.sort(undefined);})||!fails(function(){// V8 bug
test.sort(null);// Old WebKit
})||!_dereq_(105)($sort)),'Array',{// 22.1.3.25 Array.prototype.sort(comparefn)
sort:function sort(comparefn){return comparefn===undefined?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn));}});},{"105":105,"119":119,"3":3,"33":33,"35":35}],151:[function(_dereq_,module,exports){_dereq_(100)('Array');},{"100":100}],152:[function(_dereq_,module,exports){// 20.3.3.1 / 15.9.4.4 Date.now()
var $export=_dereq_(33);$export($export.S,'Date',{now:function now(){return new Date().getTime();}});},{"33":33}],153:[function(_dereq_,module,exports){// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var $export=_dereq_(33);var toISOString=_dereq_(26);// PhantomJS / old WebKit has a broken implementations
$export($export.P+$export.F*(Date.prototype.toISOString!==toISOString),'Date',{toISOString:toISOString});},{"26":26,"33":33}],154:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toObject=_dereq_(119);var toPrimitive=_dereq_(120);$export($export.P+$export.F*_dereq_(35)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function toISOString(){return 1;}})!==1;}),'Date',{// eslint-disable-next-line no-unused-vars
toJSON:function toJSON(key){var O=toObject(this);var pv=toPrimitive(O);return typeof pv=='number'&&!isFinite(pv)?null:O.toISOString();}});},{"119":119,"120":120,"33":33,"35":35}],155:[function(_dereq_,module,exports){var TO_PRIMITIVE=_dereq_(128)('toPrimitive');var proto=Date.prototype;if(!(TO_PRIMITIVE in proto))_dereq_(42)(proto,TO_PRIMITIVE,_dereq_(27));},{"128":128,"27":27,"42":42}],156:[function(_dereq_,module,exports){var DateProto=Date.prototype;var INVALID_DATE='Invalid Date';var TO_STRING='toString';var $toString=DateProto[TO_STRING];var getTime=DateProto.getTime;if(new Date(NaN)+''!=INVALID_DATE){_dereq_(94)(DateProto,TO_STRING,function toString(){var value=getTime.call(this);// eslint-disable-next-line no-self-compare
return value===value?$toString.call(this):INVALID_DATE;});}},{"94":94}],157:[function(_dereq_,module,exports){// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)
var $export=_dereq_(33);$export($export.P,'Function',{bind:_dereq_(16)});},{"16":16,"33":33}],158:[function(_dereq_,module,exports){'use strict';var isObject=_dereq_(51);var getPrototypeOf=_dereq_(79);var HAS_INSTANCE=_dereq_(128)('hasInstance');var FunctionProto=Function.prototype;// 19.2.3.6 Function.prototype[@@hasInstance](V)
if(!(HAS_INSTANCE in FunctionProto))_dereq_(72).f(FunctionProto,HAS_INSTANCE,{value:function value(O){if(typeof this!='function'||!isObject(O))return false;if(!isObject(this.prototype))return O instanceof this;// for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:
while(O=getPrototypeOf(O)){if(this.prototype===O)return true;}return false;}});},{"128":128,"51":51,"72":72,"79":79}],159:[function(_dereq_,module,exports){var dP=_dereq_(72).f;var FProto=Function.prototype;var nameRE=/^\s*function ([^ (]*)/;var NAME='name';// 19.2.4.2 name
NAME in FProto||_dereq_(29)&&dP(FProto,NAME,{configurable:true,get:function get(){try{return(''+this).match(nameRE)[1];}catch(e){return'';}}});},{"29":29,"72":72}],160:[function(_dereq_,module,exports){'use strict';var strong=_dereq_(19);var validate=_dereq_(125);var MAP='Map';// 23.1 Map Objects
module.exports=_dereq_(22)(MAP,function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined);};},{// 23.1.3.6 Map.prototype.get(key)
get:function get(key){var entry=strong.getEntry(validate(this,MAP),key);return entry&&entry.v;},// 23.1.3.9 Map.prototype.set(key, value)
set:function set(key,value){return strong.def(validate(this,MAP),key===0?0:key,value);}},strong,true);},{"125":125,"19":19,"22":22}],161:[function(_dereq_,module,exports){// 20.2.2.3 Math.acosh(x)
var $export=_dereq_(33);var log1p=_dereq_(63);var sqrt=Math.sqrt;var $acosh=Math.acosh;$export($export.S+$export.F*!($acosh// V8 bug: https://code.google.com/p/v8/issues/detail?id=3509
&&Math.floor($acosh(Number.MAX_VALUE))==710// Tor Browser bug: Math.acosh(Infinity) -> NaN
&&$acosh(Infinity)==Infinity),'Math',{acosh:function acosh(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1));}});},{"33":33,"63":63}],162:[function(_dereq_,module,exports){// 20.2.2.5 Math.asinh(x)
var $export=_dereq_(33);var $asinh=Math.asinh;function asinh(x){return!isFinite(x=+x)||x==0?x:x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1));}// Tor Browser bug: Math.asinh(0) -> -0
$export($export.S+$export.F*!($asinh&&1/$asinh(0)>0),'Math',{asinh:asinh});},{"33":33}],163:[function(_dereq_,module,exports){// 20.2.2.7 Math.atanh(x)
var $export=_dereq_(33);var $atanh=Math.atanh;// Tor Browser bug: Math.atanh(-0) -> 0
$export($export.S+$export.F*!($atanh&&1/$atanh(-0)<0),'Math',{atanh:function atanh(x){return(x=+x)==0?x:Math.log((1+x)/(1-x))/2;}});},{"33":33}],164:[function(_dereq_,module,exports){// 20.2.2.9 Math.cbrt(x)
var $export=_dereq_(33);var sign=_dereq_(65);$export($export.S,'Math',{cbrt:function cbrt(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3);}});},{"33":33,"65":65}],165:[function(_dereq_,module,exports){// 20.2.2.11 Math.clz32(x)
var $export=_dereq_(33);$export($export.S,'Math',{clz32:function clz32(x){return(x>>>=0)?31-Math.floor(Math.log(x+0.5)*Math.LOG2E):32;}});},{"33":33}],166:[function(_dereq_,module,exports){// 20.2.2.12 Math.cosh(x)
var $export=_dereq_(33);var exp=Math.exp;$export($export.S,'Math',{cosh:function cosh(x){return(exp(x=+x)+exp(-x))/2;}});},{"33":33}],167:[function(_dereq_,module,exports){// 20.2.2.14 Math.expm1(x)
var $export=_dereq_(33);var $expm1=_dereq_(61);$export($export.S+$export.F*($expm1!=Math.expm1),'Math',{expm1:$expm1});},{"33":33,"61":61}],168:[function(_dereq_,module,exports){// 20.2.2.16 Math.fround(x)
var $export=_dereq_(33);$export($export.S,'Math',{fround:_dereq_(62)});},{"33":33,"62":62}],169:[function(_dereq_,module,exports){// 20.2.2.17 Math.hypot([value1[, value2[,  ]]])
var $export=_dereq_(33);var abs=Math.abs;$export($export.S,'Math',{hypot:function hypot(value1,value2){// eslint-disable-line no-unused-vars
var sum=0;var i=0;var aLen=arguments.length;var larg=0;var arg,div;while(i<aLen){arg=abs(arguments[i++]);if(larg<arg){div=larg/arg;sum=sum*div*div+1;larg=arg;}else if(arg>0){div=arg/larg;sum+=div*div;}else sum+=arg;}return larg===Infinity?Infinity:larg*Math.sqrt(sum);}});},{"33":33}],170:[function(_dereq_,module,exports){// 20.2.2.18 Math.imul(x, y)
var $export=_dereq_(33);var $imul=Math.imul;// some WebKit versions fails with big numbers, some has wrong arity
$export($export.S+$export.F*_dereq_(35)(function(){return $imul(0xffffffff,5)!=-5||$imul.length!=2;}),'Math',{imul:function imul(x,y){var UINT16=0xffff;var xn=+x;var yn=+y;var xl=UINT16&xn;var yl=UINT16&yn;return 0|xl*yl+((UINT16&xn>>>16)*yl+xl*(UINT16&yn>>>16)<<16>>>0);}});},{"33":33,"35":35}],171:[function(_dereq_,module,exports){// 20.2.2.21 Math.log10(x)
var $export=_dereq_(33);$export($export.S,'Math',{log10:function log10(x){return Math.log(x)*Math.LOG10E;}});},{"33":33}],172:[function(_dereq_,module,exports){// 20.2.2.20 Math.log1p(x)
var $export=_dereq_(33);$export($export.S,'Math',{log1p:_dereq_(63)});},{"33":33,"63":63}],173:[function(_dereq_,module,exports){// 20.2.2.22 Math.log2(x)
var $export=_dereq_(33);$export($export.S,'Math',{log2:function log2(x){return Math.log(x)/Math.LN2;}});},{"33":33}],174:[function(_dereq_,module,exports){// 20.2.2.28 Math.sign(x)
var $export=_dereq_(33);$export($export.S,'Math',{sign:_dereq_(65)});},{"33":33,"65":65}],175:[function(_dereq_,module,exports){// 20.2.2.30 Math.sinh(x)
var $export=_dereq_(33);var expm1=_dereq_(61);var exp=Math.exp;// V8 near Chromium 38 has a problem with very small numbers
$export($export.S+$export.F*_dereq_(35)(function(){return!Math.sinh(-2e-17)!=-2e-17;}),'Math',{sinh:function sinh(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2);}});},{"33":33,"35":35,"61":61}],176:[function(_dereq_,module,exports){// 20.2.2.33 Math.tanh(x)
var $export=_dereq_(33);var expm1=_dereq_(61);var exp=Math.exp;$export($export.S,'Math',{tanh:function tanh(x){var a=expm1(x=+x);var b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x));}});},{"33":33,"61":61}],177:[function(_dereq_,module,exports){// 20.2.2.34 Math.trunc(x)
var $export=_dereq_(33);$export($export.S,'Math',{trunc:function trunc(it){return(it>0?Math.floor:Math.ceil)(it);}});},{"33":33}],178:[function(_dereq_,module,exports){'use strict';var global=_dereq_(40);var has=_dereq_(41);var cof=_dereq_(18);var inheritIfRequired=_dereq_(45);var toPrimitive=_dereq_(120);var fails=_dereq_(35);var gOPN=_dereq_(77).f;var gOPD=_dereq_(75).f;var dP=_dereq_(72).f;var $trim=_dereq_(111).trim;var NUMBER='Number';var $Number=global[NUMBER];var Base=$Number;var proto=$Number.prototype;// Opera ~12 has broken Object#toString
var BROKEN_COF=cof(_dereq_(71)(proto))==NUMBER;var TRIM='trim'in String.prototype;// 7.1.3 ToNumber(argument)
var toNumber=function toNumber(argument){var it=toPrimitive(argument,false);if(typeof it=='string'&&it.length>2){it=TRIM?it.trim():$trim(it,3);var first=it.charCodeAt(0);var third,radix,maxCode;if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN;// Number('+0x1') should be NaN, old V8 fix
}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;// fast equal /^0b[01]+$/i
case 79:case 111:radix=8;maxCode=55;break;// fast equal /^0o[0-7]+$/i
default:return+it;}for(var digits=it.slice(2),i=0,l=digits.length,code;i<l;i++){code=digits.charCodeAt(i);// parseInt parses a string to a first unavailable symbol
// but ToNumber should return NaN if a string contains unavailable symbols
if(code<48||code>maxCode)return NaN;}return parseInt(digits,radix);}}return+it;};if(!$Number(' 0o1')||!$Number('0b1')||$Number('+0x1')){$Number=function Number(value){var it=arguments.length<1?0:value;var that=this;return that instanceof $Number// check on 1..constructor(foo) case
&&(BROKEN_COF?fails(function(){proto.valueOf.call(that);}):cof(that)!=NUMBER)?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it);};for(var keys=_dereq_(29)?gOPN(Base):(// ES3:
'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,'+// ES6 (in case, if modules with ES6 Number statics required before):
'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,'+'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger').split(','),j=0,key;keys.length>j;j++){if(has(Base,key=keys[j])&&!has($Number,key)){dP($Number,key,gOPD(Base,key));}}$Number.prototype=proto;proto.constructor=$Number;_dereq_(94)(global,NUMBER,$Number);}},{"111":111,"120":120,"18":18,"29":29,"35":35,"40":40,"41":41,"45":45,"71":71,"72":72,"75":75,"77":77,"94":94}],179:[function(_dereq_,module,exports){// 20.1.2.1 Number.EPSILON
var $export=_dereq_(33);$export($export.S,'Number',{EPSILON:Math.pow(2,-52)});},{"33":33}],180:[function(_dereq_,module,exports){// 20.1.2.2 Number.isFinite(number)
var $export=_dereq_(33);var _isFinite=_dereq_(40).isFinite;$export($export.S,'Number',{isFinite:function isFinite(it){return typeof it=='number'&&_isFinite(it);}});},{"33":33,"40":40}],181:[function(_dereq_,module,exports){// 20.1.2.3 Number.isInteger(number)
var $export=_dereq_(33);$export($export.S,'Number',{isInteger:_dereq_(50)});},{"33":33,"50":50}],182:[function(_dereq_,module,exports){// 20.1.2.4 Number.isNaN(number)
var $export=_dereq_(33);$export($export.S,'Number',{isNaN:function isNaN(number){// eslint-disable-next-line no-self-compare
return number!=number;}});},{"33":33}],183:[function(_dereq_,module,exports){// 20.1.2.5 Number.isSafeInteger(number)
var $export=_dereq_(33);var isInteger=_dereq_(50);var abs=Math.abs;$export($export.S,'Number',{isSafeInteger:function isSafeInteger(number){return isInteger(number)&&abs(number)<=0x1fffffffffffff;}});},{"33":33,"50":50}],184:[function(_dereq_,module,exports){// 20.1.2.6 Number.MAX_SAFE_INTEGER
var $export=_dereq_(33);$export($export.S,'Number',{MAX_SAFE_INTEGER:0x1fffffffffffff});},{"33":33}],185:[function(_dereq_,module,exports){// 20.1.2.10 Number.MIN_SAFE_INTEGER
var $export=_dereq_(33);$export($export.S,'Number',{MIN_SAFE_INTEGER:-0x1fffffffffffff});},{"33":33}],186:[function(_dereq_,module,exports){var $export=_dereq_(33);var $parseFloat=_dereq_(86);// 20.1.2.12 Number.parseFloat(string)
$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),'Number',{parseFloat:$parseFloat});},{"33":33,"86":86}],187:[function(_dereq_,module,exports){var $export=_dereq_(33);var $parseInt=_dereq_(87);// 20.1.2.13 Number.parseInt(string, radix)
$export($export.S+$export.F*(Number.parseInt!=$parseInt),'Number',{parseInt:$parseInt});},{"33":33,"87":87}],188:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toInteger=_dereq_(116);var aNumberValue=_dereq_(4);var repeat=_dereq_(110);var $toFixed=1.0.toFixed;var floor=Math.floor;var data=[0,0,0,0,0,0];var ERROR='Number.toFixed: incorrect invocation!';var ZERO='0';var multiply=function multiply(n,c){var i=-1;var c2=c;while(++i<6){c2+=n*data[i];data[i]=c2%1e7;c2=floor(c2/1e7);}};var divide=function divide(n){var i=6;var c=0;while(--i>=0){c+=data[i];data[i]=floor(c/n);c=c%n*1e7;}};var numToString=function numToString(){var i=6;var s='';while(--i>=0){if(s!==''||i===0||data[i]!==0){var t=String(data[i]);s=s===''?t:s+repeat.call(ZERO,7-t.length)+t;}}return s;};var pow=function pow(x,n,acc){return n===0?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc);};var log=function log(x){var n=0;var x2=x;while(x2>=4096){n+=12;x2/=4096;}while(x2>=2){n+=1;x2/=2;}return n;};$export($export.P+$export.F*(!!$toFixed&&(0.00008.toFixed(3)!=='0.000'||0.9.toFixed(0)!=='1'||1.255.toFixed(2)!=='1.25'||1000000000000000128.0.toFixed(0)!=='1000000000000000128')||!_dereq_(35)(function(){// V8 ~ Android 4.3-
$toFixed.call({});})),'Number',{toFixed:function toFixed(fractionDigits){var x=aNumberValue(this,ERROR);var f=toInteger(fractionDigits);var s='';var m=ZERO;var e,z,j,k;if(f<0||f>20)throw RangeError(ERROR);// eslint-disable-next-line no-self-compare
if(x!=x)return'NaN';if(x<=-1e21||x>=1e21)return String(x);if(x<0){s='-';x=-x;}if(x>1e-21){e=log(x*pow(2,69,1))-69;z=e<0?x*pow(2,-e,1):x/pow(2,e,1);z*=0x10000000000000;e=52-e;if(e>0){multiply(0,z);j=f;while(j>=7){multiply(1e7,0);j-=7;}multiply(pow(10,j,1),0);j=e-1;while(j>=23){divide(1<<23);j-=23;}divide(1<<j);multiply(1,1);divide(2);m=numToString();}else{multiply(0,z);multiply(1<<-e,0);m=numToString()+repeat.call(ZERO,f);}}if(f>0){k=m.length;m=s+(k<=f?'0.'+repeat.call(ZERO,f-k)+m:m.slice(0,k-f)+'.'+m.slice(k-f));}else{m=s+m;}return m;}});},{"110":110,"116":116,"33":33,"35":35,"4":4}],189:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $fails=_dereq_(35);var aNumberValue=_dereq_(4);var $toPrecision=1.0.toPrecision;$export($export.P+$export.F*($fails(function(){// IE7-
return $toPrecision.call(1,undefined)!=='1';})||!$fails(function(){// V8 ~ Android 4.3-
$toPrecision.call({});})),'Number',{toPrecision:function toPrecision(precision){var that=aNumberValue(this,'Number#toPrecision: incorrect invocation!');return precision===undefined?$toPrecision.call(that):$toPrecision.call(that,precision);}});},{"33":33,"35":35,"4":4}],190:[function(_dereq_,module,exports){// 19.1.3.1 Object.assign(target, source)
var $export=_dereq_(33);$export($export.S+$export.F,'Object',{assign:_dereq_(70)});},{"33":33,"70":70}],191:[function(_dereq_,module,exports){var $export=_dereq_(33);// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
$export($export.S,'Object',{create:_dereq_(71)});},{"33":33,"71":71}],192:[function(_dereq_,module,exports){var $export=_dereq_(33);// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)
$export($export.S+$export.F*!_dereq_(29),'Object',{defineProperties:_dereq_(73)});},{"29":29,"33":33,"73":73}],193:[function(_dereq_,module,exports){var $export=_dereq_(33);// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)
$export($export.S+$export.F*!_dereq_(29),'Object',{defineProperty:_dereq_(72).f});},{"29":29,"33":33,"72":72}],194:[function(_dereq_,module,exports){// 19.1.2.5 Object.freeze(O)
var isObject=_dereq_(51);var meta=_dereq_(66).onFreeze;_dereq_(83)('freeze',function($freeze){return function freeze(it){return $freeze&&isObject(it)?$freeze(meta(it)):it;};});},{"51":51,"66":66,"83":83}],195:[function(_dereq_,module,exports){// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
var toIObject=_dereq_(117);var $getOwnPropertyDescriptor=_dereq_(75).f;_dereq_(83)('getOwnPropertyDescriptor',function(){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key);};});},{"117":117,"75":75,"83":83}],196:[function(_dereq_,module,exports){// 19.1.2.7 Object.getOwnPropertyNames(O)
_dereq_(83)('getOwnPropertyNames',function(){return _dereq_(76).f;});},{"76":76,"83":83}],197:[function(_dereq_,module,exports){// 19.1.2.9 Object.getPrototypeOf(O)
var toObject=_dereq_(119);var $getPrototypeOf=_dereq_(79);_dereq_(83)('getPrototypeOf',function(){return function getPrototypeOf(it){return $getPrototypeOf(toObject(it));};});},{"119":119,"79":79,"83":83}],198:[function(_dereq_,module,exports){// 19.1.2.11 Object.isExtensible(O)
var isObject=_dereq_(51);_dereq_(83)('isExtensible',function($isExtensible){return function isExtensible(it){return isObject(it)?$isExtensible?$isExtensible(it):true:false;};});},{"51":51,"83":83}],199:[function(_dereq_,module,exports){// 19.1.2.12 Object.isFrozen(O)
var isObject=_dereq_(51);_dereq_(83)('isFrozen',function($isFrozen){return function isFrozen(it){return isObject(it)?$isFrozen?$isFrozen(it):false:true;};});},{"51":51,"83":83}],200:[function(_dereq_,module,exports){// 19.1.2.13 Object.isSealed(O)
var isObject=_dereq_(51);_dereq_(83)('isSealed',function($isSealed){return function isSealed(it){return isObject(it)?$isSealed?$isSealed(it):false:true;};});},{"51":51,"83":83}],201:[function(_dereq_,module,exports){// 19.1.3.10 Object.is(value1, value2)
var $export=_dereq_(33);$export($export.S,'Object',{is:_dereq_(96)});},{"33":33,"96":96}],202:[function(_dereq_,module,exports){// 19.1.2.14 Object.keys(O)
var toObject=_dereq_(119);var $keys=_dereq_(81);_dereq_(83)('keys',function(){return function keys(it){return $keys(toObject(it));};});},{"119":119,"81":81,"83":83}],203:[function(_dereq_,module,exports){// 19.1.2.15 Object.preventExtensions(O)
var isObject=_dereq_(51);var meta=_dereq_(66).onFreeze;_dereq_(83)('preventExtensions',function($preventExtensions){return function preventExtensions(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it;};});},{"51":51,"66":66,"83":83}],204:[function(_dereq_,module,exports){// 19.1.2.17 Object.seal(O)
var isObject=_dereq_(51);var meta=_dereq_(66).onFreeze;_dereq_(83)('seal',function($seal){return function seal(it){return $seal&&isObject(it)?$seal(meta(it)):it;};});},{"51":51,"66":66,"83":83}],205:[function(_dereq_,module,exports){// 19.1.3.19 Object.setPrototypeOf(O, proto)
var $export=_dereq_(33);$export($export.S,'Object',{setPrototypeOf:_dereq_(99).set});},{"33":33,"99":99}],206:[function(_dereq_,module,exports){'use strict';// 19.1.3.6 Object.prototype.toString()
var classof=_dereq_(17);var test={};test[_dereq_(128)('toStringTag')]='z';if(test+''!='[object z]'){_dereq_(94)(Object.prototype,'toString',function toString(){return'[object '+classof(this)+']';},true);}},{"128":128,"17":17,"94":94}],207:[function(_dereq_,module,exports){var $export=_dereq_(33);var $parseFloat=_dereq_(86);// 18.2.4 parseFloat(string)
$export($export.G+$export.F*(parseFloat!=$parseFloat),{parseFloat:$parseFloat});},{"33":33,"86":86}],208:[function(_dereq_,module,exports){var $export=_dereq_(33);var $parseInt=_dereq_(87);// 18.2.5 parseInt(string, radix)
$export($export.G+$export.F*(parseInt!=$parseInt),{parseInt:$parseInt});},{"33":33,"87":87}],209:[function(_dereq_,module,exports){'use strict';var LIBRARY=_dereq_(60);var global=_dereq_(40);var ctx=_dereq_(25);var classof=_dereq_(17);var $export=_dereq_(33);var isObject=_dereq_(51);var aFunction=_dereq_(3);var anInstance=_dereq_(6);var forOf=_dereq_(39);var speciesConstructor=_dereq_(104);var task=_dereq_(113).set;var microtask=_dereq_(68)();var newPromiseCapabilityModule=_dereq_(69);var perform=_dereq_(90);var promiseResolve=_dereq_(91);var PROMISE='Promise';var TypeError=global.TypeError;var process=global.process;var $Promise=global[PROMISE];var isNode=classof(process)=='process';var empty=function empty(){/* empty */};var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper;var newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f;var USE_NATIVE=!!function(){try{// correct subclassing with @@species support
var promise=$Promise.resolve(1);var FakePromise=(promise.constructor={})[_dereq_(128)('species')]=function(exec){exec(empty,empty);};// unhandled rejections tracking support, NodeJS Promise without it fails @@species test
return(isNode||typeof PromiseRejectionEvent=='function')&&promise.then(empty)instanceof FakePromise;}catch(e){/* empty */}}();// helpers
var sameConstructor=LIBRARY?function(a,b){// with library wrapper special case
return a===b||a===$Promise&&b===Wrapper;}:function(a,b){return a===b;};var isThenable=function isThenable(it){var then;return isObject(it)&&typeof(then=it.then)=='function'?then:false;};var notify=function notify(promise,isReject){if(promise._n)return;promise._n=true;var chain=promise._c;microtask(function(){var value=promise._v;var ok=promise._s==1;var i=0;var run=function run(reaction){var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then;try{if(handler){if(!ok){if(promise._h==2)onHandleUnhandled(promise);promise._h=1;}if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain)domain.exit();}if(result===reaction.promise){reject(TypeError('Promise-chain cycle'));}else if(then=isThenable(result)){then.call(result,resolve,reject);}else resolve(result);}else reject(value);}catch(e){reject(e);}};while(chain.length>i){run(chain[i++]);}// variable length - can't use forEach
promise._c=[];promise._n=false;if(isReject&&!promise._h)onUnhandled(promise);});};var onUnhandled=function onUnhandled(promise){task.call(global,function(){var value=promise._v;var unhandled=isUnhandled(promise);var result,handler,console;if(unhandled){result=perform(function(){if(isNode){process.emit('unhandledRejection',value,promise);}else if(handler=global.onunhandledrejection){handler({promise:promise,reason:value});}else if((console=global.console)&&console.error){console.error('Unhandled promise rejection',value);}});// Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
promise._h=isNode||isUnhandled(promise)?2:1;}promise._a=undefined;if(unhandled&&result.e)throw result.v;});};var isUnhandled=function isUnhandled(promise){if(promise._h==1)return false;var chain=promise._a||promise._c;var i=0;var reaction;while(chain.length>i){reaction=chain[i++];if(reaction.fail||!isUnhandled(reaction.promise))return false;}return true;};var onHandleUnhandled=function onHandleUnhandled(promise){task.call(global,function(){var handler;if(isNode){process.emit('rejectionHandled',promise);}else if(handler=global.onrejectionhandled){handler({promise:promise,reason:promise._v});}});};var $reject=function $reject(value){var promise=this;if(promise._d)return;promise._d=true;promise=promise._w||promise;// unwrap
promise._v=value;promise._s=2;if(!promise._a)promise._a=promise._c.slice();notify(promise,true);};var $resolve=function $resolve(value){var promise=this;var then;if(promise._d)return;promise._d=true;promise=promise._w||promise;// unwrap
try{if(promise===value)throw TypeError("Promise can't be resolved itself");if(then=isThenable(value)){microtask(function(){var wrapper={_w:promise,_d:false};// wrap
try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1));}catch(e){$reject.call(wrapper,e);}});}else{promise._v=value;promise._s=1;notify(promise,false);}}catch(e){$reject.call({_w:promise,_d:false},e);// wrap
}};// constructor polyfill
if(!USE_NATIVE){// 25.4.3.1 Promise(executor)
$Promise=function Promise(executor){anInstance(this,$Promise,PROMISE,'_h');aFunction(executor);Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1));}catch(err){$reject.call(this,err);}};// eslint-disable-next-line no-unused-vars
Internal=function Promise(executor){this._c=[];// <- awaiting reactions
this._a=undefined;// <- checked in isUnhandled reactions
this._s=0;// <- state
this._d=false;// <- done
this._v=undefined;// <- value
this._h=0;// <- rejection state, 0 - default, 1 - handled, 2 - unhandled
this._n=false;// <- notify
};Internal.prototype=_dereq_(93)($Promise.prototype,{// 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)
then:function then(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));reaction.ok=typeof onFulfilled=='function'?onFulfilled:true;reaction.fail=typeof onRejected=='function'&&onRejected;reaction.domain=isNode?process.domain:undefined;this._c.push(reaction);if(this._a)this._a.push(reaction);if(this._s)notify(this,false);return reaction.promise;},// 25.4.5.1 Promise.prototype.catch(onRejected)
'catch':function _catch(onRejected){return this.then(undefined,onRejected);}});OwnPromiseCapability=function OwnPromiseCapability(){var promise=new Internal();this.promise=promise;this.resolve=ctx($resolve,promise,1);this.reject=ctx($reject,promise,1);};newPromiseCapabilityModule.f=newPromiseCapability=function newPromiseCapability(C){return sameConstructor($Promise,C)?new OwnPromiseCapability(C):newGenericPromiseCapability(C);};}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise});_dereq_(101)($Promise,PROMISE);_dereq_(100)(PROMISE);Wrapper=_dereq_(23)[PROMISE];// statics
$export($export.S+$export.F*!USE_NATIVE,PROMISE,{// 25.4.4.5 Promise.reject(r)
reject:function reject(r){var capability=newPromiseCapability(this);var $$reject=capability.reject;$$reject(r);return capability.promise;}});$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{// 25.4.4.6 Promise.resolve(x)
resolve:function resolve(x){// instanceof instead of internal slot check because we should fix it without replacement native Promise core
if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;return promiseResolve(this,x);}});$export($export.S+$export.F*!(USE_NATIVE&&_dereq_(56)(function(iter){$Promise.all(iter)['catch'](empty);})),PROMISE,{// 25.4.4.1 Promise.all(iterable)
all:function all(iterable){var C=this;var capability=newPromiseCapability(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var values=[];var index=0;var remaining=1;forOf(iterable,false,function(promise){var $index=index++;var alreadyCalled=false;values.push(undefined);remaining++;C.resolve(promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[$index]=value;--remaining||resolve(values);},reject);});--remaining||resolve(values);});if(result.e)reject(result.v);return capability.promise;},// 25.4.4.4 Promise.race(iterable)
race:function race(iterable){var C=this;var capability=newPromiseCapability(C);var reject=capability.reject;var result=perform(function(){forOf(iterable,false,function(promise){C.resolve(promise).then(capability.resolve,reject);});});if(result.e)reject(result.v);return capability.promise;}});},{"100":100,"101":101,"104":104,"113":113,"128":128,"17":17,"23":23,"25":25,"3":3,"33":33,"39":39,"40":40,"51":51,"56":56,"6":6,"60":60,"68":68,"69":69,"90":90,"91":91,"93":93}],210:[function(_dereq_,module,exports){// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)
var $export=_dereq_(33);var aFunction=_dereq_(3);var anObject=_dereq_(7);var rApply=(_dereq_(40).Reflect||{}).apply;var fApply=Function.apply;// MS Edge argumentsList argument is optional
$export($export.S+$export.F*!_dereq_(35)(function(){rApply(function(){/* empty */});}),'Reflect',{apply:function apply(target,thisArgument,argumentsList){var T=aFunction(target);var L=anObject(argumentsList);return rApply?rApply(T,thisArgument,L):fApply.call(T,thisArgument,L);}});},{"3":3,"33":33,"35":35,"40":40,"7":7}],211:[function(_dereq_,module,exports){// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])
var $export=_dereq_(33);var create=_dereq_(71);var aFunction=_dereq_(3);var anObject=_dereq_(7);var isObject=_dereq_(51);var fails=_dereq_(35);var bind=_dereq_(16);var rConstruct=(_dereq_(40).Reflect||{}).construct;// MS Edge supports only 2 arguments and argumentsList argument is optional
// FF Nightly sets third argument as `new.target`, but does not create `this` from it
var NEW_TARGET_BUG=fails(function(){function F(){/* empty */}return!(rConstruct(function(){/* empty */},[],F)instanceof F);});var ARGS_BUG=!fails(function(){rConstruct(function(){/* empty */});});$export($export.S+$export.F*(NEW_TARGET_BUG||ARGS_BUG),'Reflect',{construct:function construct(Target,args/* , newTarget */){aFunction(Target);anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){// w/o altered newTarget, optimization for 0-4 arguments
switch(args.length){case 0:return new Target();case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3]);}// w/o altered newTarget, lot of arguments case
var $args=[null];$args.push.apply($args,args);return new(bind.apply(Target,$args))();}// with altered newTarget, not support built-in constructors
var proto=newTarget.prototype;var instance=create(isObject(proto)?proto:Object.prototype);var result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance;}});},{"16":16,"3":3,"33":33,"35":35,"40":40,"51":51,"7":7,"71":71}],212:[function(_dereq_,module,exports){// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)
var dP=_dereq_(72);var $export=_dereq_(33);var anObject=_dereq_(7);var toPrimitive=_dereq_(120);// MS Edge has broken Reflect.defineProperty - throwing instead of returning false
$export($export.S+$export.F*_dereq_(35)(function(){// eslint-disable-next-line no-undef
Reflect.defineProperty(dP.f({},1,{value:1}),1,{value:2});}),'Reflect',{defineProperty:function defineProperty(target,propertyKey,attributes){anObject(target);propertyKey=toPrimitive(propertyKey,true);anObject(attributes);try{dP.f(target,propertyKey,attributes);return true;}catch(e){return false;}}});},{"120":120,"33":33,"35":35,"7":7,"72":72}],213:[function(_dereq_,module,exports){// 26.1.4 Reflect.deleteProperty(target, propertyKey)
var $export=_dereq_(33);var gOPD=_dereq_(75).f;var anObject=_dereq_(7);$export($export.S,'Reflect',{deleteProperty:function deleteProperty(target,propertyKey){var desc=gOPD(anObject(target),propertyKey);return desc&&!desc.configurable?false:delete target[propertyKey];}});},{"33":33,"7":7,"75":75}],214:[function(_dereq_,module,exports){'use strict';// 26.1.5 Reflect.enumerate(target)
var $export=_dereq_(33);var anObject=_dereq_(7);var Enumerate=function Enumerate(iterated){this._t=anObject(iterated);// target
this._i=0;// next index
var keys=this._k=[];// keys
var key;for(key in iterated){keys.push(key);}};_dereq_(54)(Enumerate,'Object',function(){var that=this;var keys=that._k;var key;do{if(that._i>=keys.length)return{value:undefined,done:true};}while(!((key=keys[that._i++])in that._t));return{value:key,done:false};});$export($export.S,'Reflect',{enumerate:function enumerate(target){return new Enumerate(target);}});},{"33":33,"54":54,"7":7}],215:[function(_dereq_,module,exports){// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)
var gOPD=_dereq_(75);var $export=_dereq_(33);var anObject=_dereq_(7);$export($export.S,'Reflect',{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(target,propertyKey){return gOPD.f(anObject(target),propertyKey);}});},{"33":33,"7":7,"75":75}],216:[function(_dereq_,module,exports){// 26.1.8 Reflect.getPrototypeOf(target)
var $export=_dereq_(33);var getProto=_dereq_(79);var anObject=_dereq_(7);$export($export.S,'Reflect',{getPrototypeOf:function getPrototypeOf(target){return getProto(anObject(target));}});},{"33":33,"7":7,"79":79}],217:[function(_dereq_,module,exports){// 26.1.6 Reflect.get(target, propertyKey [, receiver])
var gOPD=_dereq_(75);var getPrototypeOf=_dereq_(79);var has=_dereq_(41);var $export=_dereq_(33);var isObject=_dereq_(51);var anObject=_dereq_(7);function get(target,propertyKey/* , receiver */){var receiver=arguments.length<3?target:arguments[2];var desc,proto;if(anObject(target)===receiver)return target[propertyKey];if(desc=gOPD.f(target,propertyKey))return has(desc,'value')?desc.value:desc.get!==undefined?desc.get.call(receiver):undefined;if(isObject(proto=getPrototypeOf(target)))return get(proto,propertyKey,receiver);}$export($export.S,'Reflect',{get:get});},{"33":33,"41":41,"51":51,"7":7,"75":75,"79":79}],218:[function(_dereq_,module,exports){// 26.1.9 Reflect.has(target, propertyKey)
var $export=_dereq_(33);$export($export.S,'Reflect',{has:function has(target,propertyKey){return propertyKey in target;}});},{"33":33}],219:[function(_dereq_,module,exports){// 26.1.10 Reflect.isExtensible(target)
var $export=_dereq_(33);var anObject=_dereq_(7);var $isExtensible=Object.isExtensible;$export($export.S,'Reflect',{isExtensible:function isExtensible(target){anObject(target);return $isExtensible?$isExtensible(target):true;}});},{"33":33,"7":7}],220:[function(_dereq_,module,exports){// 26.1.11 Reflect.ownKeys(target)
var $export=_dereq_(33);$export($export.S,'Reflect',{ownKeys:_dereq_(85)});},{"33":33,"85":85}],221:[function(_dereq_,module,exports){// 26.1.12 Reflect.preventExtensions(target)
var $export=_dereq_(33);var anObject=_dereq_(7);var $preventExtensions=Object.preventExtensions;$export($export.S,'Reflect',{preventExtensions:function preventExtensions(target){anObject(target);try{if($preventExtensions)$preventExtensions(target);return true;}catch(e){return false;}}});},{"33":33,"7":7}],222:[function(_dereq_,module,exports){// 26.1.14 Reflect.setPrototypeOf(target, proto)
var $export=_dereq_(33);var setProto=_dereq_(99);if(setProto)$export($export.S,'Reflect',{setPrototypeOf:function setPrototypeOf(target,proto){setProto.check(target,proto);try{setProto.set(target,proto);return true;}catch(e){return false;}}});},{"33":33,"99":99}],223:[function(_dereq_,module,exports){// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])
var dP=_dereq_(72);var gOPD=_dereq_(75);var getPrototypeOf=_dereq_(79);var has=_dereq_(41);var $export=_dereq_(33);var createDesc=_dereq_(92);var anObject=_dereq_(7);var isObject=_dereq_(51);function set(target,propertyKey,V/* , receiver */){var receiver=arguments.length<4?target:arguments[3];var ownDesc=gOPD.f(anObject(target),propertyKey);var existingDescriptor,proto;if(!ownDesc){if(isObject(proto=getPrototypeOf(target))){return set(proto,propertyKey,V,receiver);}ownDesc=createDesc(0);}if(has(ownDesc,'value')){if(ownDesc.writable===false||!isObject(receiver))return false;existingDescriptor=gOPD.f(receiver,propertyKey)||createDesc(0);existingDescriptor.value=V;dP.f(receiver,propertyKey,existingDescriptor);return true;}return ownDesc.set===undefined?false:(ownDesc.set.call(receiver,V),true);}$export($export.S,'Reflect',{set:set});},{"33":33,"41":41,"51":51,"7":7,"72":72,"75":75,"79":79,"92":92}],224:[function(_dereq_,module,exports){var global=_dereq_(40);var inheritIfRequired=_dereq_(45);var dP=_dereq_(72).f;var gOPN=_dereq_(77).f;var isRegExp=_dereq_(52);var $flags=_dereq_(37);var $RegExp=global.RegExp;var Base=$RegExp;var proto=$RegExp.prototype;var re1=/a/g;var re2=/a/g;// "new" creates a new object, old webkit buggy here
var CORRECT_NEW=new $RegExp(re1)!==re1;if(_dereq_(29)&&(!CORRECT_NEW||_dereq_(35)(function(){re2[_dereq_(128)('match')]=false;// RegExp constructor can alter flags and IsRegExp works correct with @@match
return $RegExp(re1)!=re1||$RegExp(re2)==re2||$RegExp(re1,'i')!='/a/i';}))){$RegExp=function RegExp(p,f){var tiRE=this instanceof $RegExp;var piRE=isRegExp(p);var fiU=f===undefined;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp);};var proxy=function proxy(key){key in $RegExp||dP($RegExp,key,{configurable:true,get:function get(){return Base[key];},set:function set(it){Base[key]=it;}});};for(var keys=gOPN(Base),i=0;keys.length>i;){proxy(keys[i++]);}proto.constructor=$RegExp;$RegExp.prototype=proto;_dereq_(94)(global,'RegExp',$RegExp);}_dereq_(100)('RegExp');},{"100":100,"128":128,"29":29,"35":35,"37":37,"40":40,"45":45,"52":52,"72":72,"77":77,"94":94}],225:[function(_dereq_,module,exports){// 21.2.5.3 get RegExp.prototype.flags()
if(_dereq_(29)&&/./g.flags!='g')_dereq_(72).f(RegExp.prototype,'flags',{configurable:true,get:_dereq_(37)});},{"29":29,"37":37,"72":72}],226:[function(_dereq_,module,exports){// @@match logic
_dereq_(36)('match',1,function(defined,MATCH,$match){// 21.1.3.11 String.prototype.match(regexp)
return[function match(regexp){'use strict';var O=defined(this);var fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O));},$match];});},{"36":36}],227:[function(_dereq_,module,exports){// @@replace logic
_dereq_(36)('replace',2,function(defined,REPLACE,$replace){// 21.1.3.14 String.prototype.replace(searchValue, replaceValue)
return[function replace(searchValue,replaceValue){'use strict';var O=defined(this);var fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue);},$replace];});},{"36":36}],228:[function(_dereq_,module,exports){// @@search logic
_dereq_(36)('search',1,function(defined,SEARCH,$search){// 21.1.3.15 String.prototype.search(regexp)
return[function search(regexp){'use strict';var O=defined(this);var fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O));},$search];});},{"36":36}],229:[function(_dereq_,module,exports){// @@split logic
_dereq_(36)('split',2,function(defined,SPLIT,$split){'use strict';var isRegExp=_dereq_(52);var _split=$split;var $push=[].push;var $SPLIT='split';var LENGTH='length';var LAST_INDEX='lastIndex';if('abbc'[$SPLIT](/(b)*/)[1]=='c'||'test'[$SPLIT](/(?:)/,-1)[LENGTH]!=4||'ab'[$SPLIT](/(?:ab)*/)[LENGTH]!=2||'.'[$SPLIT](/(.?)(.?)/)[LENGTH]!=4||'.'[$SPLIT](/()()/)[LENGTH]>1||''[$SPLIT](/.?/)[LENGTH]){var NPCG=/()??/.exec('')[1]===undefined;// nonparticipating capturing group
// based on es5-shim implementation, need to rework it
$split=function $split(separator,limit){var string=String(this);if(separator===undefined&&limit===0)return[];// If `separator` is not a regex, use native split
if(!isRegExp(separator))return _split.call(string,separator,limit);var output=[];var flags=(separator.ignoreCase?'i':'')+(separator.multiline?'m':'')+(separator.unicode?'u':'')+(separator.sticky?'y':'');var lastLastIndex=0;var splitLimit=limit===undefined?4294967295:limit>>>0;// Make `global` and avoid `lastIndex` issues by working with a copy
var separatorCopy=new RegExp(separator.source,flags+'g');var separator2,match,lastIndex,lastLength,i;// Doesn't need flags gy, but they don't hurt
if(!NPCG)separator2=new RegExp('^'+separatorCopy.source+'$(?!\\s)',flags);while(match=separatorCopy.exec(string)){// `separatorCopy.lastIndex` is not reliable cross-browser
lastIndex=match.index+match[0][LENGTH];if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));// Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG
// eslint-disable-next-line no-loop-func
if(!NPCG&&match[LENGTH]>1)match[0].replace(separator2,function(){for(i=1;i<arguments[LENGTH]-2;i++){if(arguments[i]===undefined)match[i]=undefined;}});if(match[LENGTH]>1&&match.index<string[LENGTH])$push.apply(output,match.slice(1));lastLength=match[0][LENGTH];lastLastIndex=lastIndex;if(output[LENGTH]>=splitLimit)break;}if(separatorCopy[LAST_INDEX]===match.index)separatorCopy[LAST_INDEX]++;// Avoid an infinite loop
}if(lastLastIndex===string[LENGTH]){if(lastLength||!separatorCopy.test(''))output.push('');}else output.push(string.slice(lastLastIndex));return output[LENGTH]>splitLimit?output.slice(0,splitLimit):output;};// Chakra, V8
}else if('0'[$SPLIT](undefined,0)[LENGTH]){$split=function $split(separator,limit){return separator===undefined&&limit===0?[]:_split.call(this,separator,limit);};}// 21.1.3.17 String.prototype.split(separator, limit)
return[function split(separator,limit){var O=defined(this);var fn=separator==undefined?undefined:separator[SPLIT];return fn!==undefined?fn.call(separator,O,limit):$split.call(String(O),separator,limit);},$split];});},{"36":36,"52":52}],230:[function(_dereq_,module,exports){'use strict';_dereq_(225);var anObject=_dereq_(7);var $flags=_dereq_(37);var DESCRIPTORS=_dereq_(29);var TO_STRING='toString';var $toString=/./[TO_STRING];var define=function define(fn){_dereq_(94)(RegExp.prototype,TO_STRING,fn,true);};// 21.2.5.14 RegExp.prototype.toString()
if(_dereq_(35)(function(){return $toString.call({source:'a',flags:'b'})!='/a/b';})){define(function toString(){var R=anObject(this);return'/'.concat(R.source,'/','flags'in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):undefined);});// FF44- RegExp#toString has a wrong name
}else if($toString.name!=TO_STRING){define(function toString(){return $toString.call(this);});}},{"225":225,"29":29,"35":35,"37":37,"7":7,"94":94}],231:[function(_dereq_,module,exports){'use strict';var strong=_dereq_(19);var validate=_dereq_(125);var SET='Set';// 23.2 Set Objects
module.exports=_dereq_(22)(SET,function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined);};},{// 23.2.3.1 Set.prototype.add(value)
add:function add(value){return strong.def(validate(this,SET),value=value===0?0:value,value);}},strong);},{"125":125,"19":19,"22":22}],232:[function(_dereq_,module,exports){'use strict';// B.2.3.2 String.prototype.anchor(name)
_dereq_(108)('anchor',function(createHTML){return function anchor(name){return createHTML(this,'a','name',name);};});},{"108":108}],233:[function(_dereq_,module,exports){'use strict';// B.2.3.3 String.prototype.big()
_dereq_(108)('big',function(createHTML){return function big(){return createHTML(this,'big','','');};});},{"108":108}],234:[function(_dereq_,module,exports){'use strict';// B.2.3.4 String.prototype.blink()
_dereq_(108)('blink',function(createHTML){return function blink(){return createHTML(this,'blink','','');};});},{"108":108}],235:[function(_dereq_,module,exports){'use strict';// B.2.3.5 String.prototype.bold()
_dereq_(108)('bold',function(createHTML){return function bold(){return createHTML(this,'b','','');};});},{"108":108}],236:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $at=_dereq_(106)(false);$export($export.P,'String',{// 21.1.3.3 String.prototype.codePointAt(pos)
codePointAt:function codePointAt(pos){return $at(this,pos);}});},{"106":106,"33":33}],237:[function(_dereq_,module,exports){// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])
'use strict';var $export=_dereq_(33);var toLength=_dereq_(118);var context=_dereq_(107);var ENDS_WITH='endsWith';var $endsWith=''[ENDS_WITH];$export($export.P+$export.F*_dereq_(34)(ENDS_WITH),'String',{endsWith:function endsWith(searchString/* , endPosition = @length */){var that=context(this,searchString,ENDS_WITH);var endPosition=arguments.length>1?arguments[1]:undefined;var len=toLength(that.length);var end=endPosition===undefined?len:Math.min(toLength(endPosition),len);var search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search;}});},{"107":107,"118":118,"33":33,"34":34}],238:[function(_dereq_,module,exports){'use strict';// B.2.3.6 String.prototype.fixed()
_dereq_(108)('fixed',function(createHTML){return function fixed(){return createHTML(this,'tt','','');};});},{"108":108}],239:[function(_dereq_,module,exports){'use strict';// B.2.3.7 String.prototype.fontcolor(color)
_dereq_(108)('fontcolor',function(createHTML){return function fontcolor(color){return createHTML(this,'font','color',color);};});},{"108":108}],240:[function(_dereq_,module,exports){'use strict';// B.2.3.8 String.prototype.fontsize(size)
_dereq_(108)('fontsize',function(createHTML){return function fontsize(size){return createHTML(this,'font','size',size);};});},{"108":108}],241:[function(_dereq_,module,exports){var $export=_dereq_(33);var toAbsoluteIndex=_dereq_(114);var fromCharCode=String.fromCharCode;var $fromCodePoint=String.fromCodePoint;// length should be 1, old FF problem
$export($export.S+$export.F*(!!$fromCodePoint&&$fromCodePoint.length!=1),'String',{// 21.1.2.2 String.fromCodePoint(...codePoints)
fromCodePoint:function fromCodePoint(x){// eslint-disable-line no-unused-vars
var res=[];var aLen=arguments.length;var i=0;var code;while(aLen>i){code=+arguments[i++];if(toAbsoluteIndex(code,0x10ffff)!==code)throw RangeError(code+' is not a valid code point');res.push(code<0x10000?fromCharCode(code):fromCharCode(((code-=0x10000)>>10)+0xd800,code%0x400+0xdc00));}return res.join('');}});},{"114":114,"33":33}],242:[function(_dereq_,module,exports){// 21.1.3.7 String.prototype.includes(searchString, position = 0)
'use strict';var $export=_dereq_(33);var context=_dereq_(107);var INCLUDES='includes';$export($export.P+$export.F*_dereq_(34)(INCLUDES),'String',{includes:function includes(searchString/* , position = 0 */){return!!~context(this,searchString,INCLUDES).indexOf(searchString,arguments.length>1?arguments[1]:undefined);}});},{"107":107,"33":33,"34":34}],243:[function(_dereq_,module,exports){'use strict';// B.2.3.9 String.prototype.italics()
_dereq_(108)('italics',function(createHTML){return function italics(){return createHTML(this,'i','','');};});},{"108":108}],244:[function(_dereq_,module,exports){'use strict';var $at=_dereq_(106)(true);// 21.1.3.27 String.prototype[@@iterator]()
_dereq_(55)(String,'String',function(iterated){this._t=String(iterated);// target
this._i=0;// next index
// 21.1.5.2.1 %StringIteratorPrototype%.next()
},function(){var O=this._t;var index=this._i;var point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false};});},{"106":106,"55":55}],245:[function(_dereq_,module,exports){'use strict';// B.2.3.10 String.prototype.link(url)
_dereq_(108)('link',function(createHTML){return function link(url){return createHTML(this,'a','href',url);};});},{"108":108}],246:[function(_dereq_,module,exports){var $export=_dereq_(33);var toIObject=_dereq_(117);var toLength=_dereq_(118);$export($export.S,'String',{// 21.1.2.4 String.raw(callSite, ...substitutions)
raw:function raw(callSite){var tpl=toIObject(callSite.raw);var len=toLength(tpl.length);var aLen=arguments.length;var res=[];var i=0;while(len>i){res.push(String(tpl[i++]));if(i<aLen)res.push(String(arguments[i]));}return res.join('');}});},{"117":117,"118":118,"33":33}],247:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.P,'String',{// 21.1.3.13 String.prototype.repeat(count)
repeat:_dereq_(110)});},{"110":110,"33":33}],248:[function(_dereq_,module,exports){'use strict';// B.2.3.11 String.prototype.small()
_dereq_(108)('small',function(createHTML){return function small(){return createHTML(this,'small','','');};});},{"108":108}],249:[function(_dereq_,module,exports){// 21.1.3.18 String.prototype.startsWith(searchString [, position ])
'use strict';var $export=_dereq_(33);var toLength=_dereq_(118);var context=_dereq_(107);var STARTS_WITH='startsWith';var $startsWith=''[STARTS_WITH];$export($export.P+$export.F*_dereq_(34)(STARTS_WITH),'String',{startsWith:function startsWith(searchString/* , position = 0 */){var that=context(this,searchString,STARTS_WITH);var index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search;}});},{"107":107,"118":118,"33":33,"34":34}],250:[function(_dereq_,module,exports){'use strict';// B.2.3.12 String.prototype.strike()
_dereq_(108)('strike',function(createHTML){return function strike(){return createHTML(this,'strike','','');};});},{"108":108}],251:[function(_dereq_,module,exports){'use strict';// B.2.3.13 String.prototype.sub()
_dereq_(108)('sub',function(createHTML){return function sub(){return createHTML(this,'sub','','');};});},{"108":108}],252:[function(_dereq_,module,exports){'use strict';// B.2.3.14 String.prototype.sup()
_dereq_(108)('sup',function(createHTML){return function sup(){return createHTML(this,'sup','','');};});},{"108":108}],253:[function(_dereq_,module,exports){'use strict';// 21.1.3.25 String.prototype.trim()
_dereq_(111)('trim',function($trim){return function trim(){return $trim(this,3);};});},{"111":111}],254:[function(_dereq_,module,exports){'use strict';// ECMAScript 6 symbols shim
var global=_dereq_(40);var has=_dereq_(41);var DESCRIPTORS=_dereq_(29);var $export=_dereq_(33);var redefine=_dereq_(94);var META=_dereq_(66).KEY;var $fails=_dereq_(35);var shared=_dereq_(103);var setToStringTag=_dereq_(101);var uid=_dereq_(124);var wks=_dereq_(128);var wksExt=_dereq_(127);var wksDefine=_dereq_(126);var keyOf=_dereq_(59);var enumKeys=_dereq_(32);var isArray=_dereq_(49);var anObject=_dereq_(7);var toIObject=_dereq_(117);var toPrimitive=_dereq_(120);var createDesc=_dereq_(92);var _create=_dereq_(71);var gOPNExt=_dereq_(76);var $GOPD=_dereq_(75);var $DP=_dereq_(72);var $keys=_dereq_(81);var gOPD=$GOPD.f;var dP=$DP.f;var gOPN=gOPNExt.f;var $Symbol=global.Symbol;var $JSON=global.JSON;var _stringify=$JSON&&$JSON.stringify;var PROTOTYPE='prototype';var HIDDEN=wks('_hidden');var TO_PRIMITIVE=wks('toPrimitive');var isEnum={}.propertyIsEnumerable;var SymbolRegistry=shared('symbol-registry');var AllSymbols=shared('symbols');var OPSymbols=shared('op-symbols');var ObjectProto=Object[PROTOTYPE];var USE_NATIVE=typeof $Symbol=='function';var QObject=global.QObject;// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild;// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(dP({},'a',{get:function get(){return dP(this,'a',{value:7}).a;}})).a!=7;})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);if(protoDesc)delete ObjectProto[key];dP(it,key,D);if(protoDesc&&it!==ObjectProto)dP(ObjectProto,key,protoDesc);}:dP;var wrap=function wrap(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);sym._k=tag;return sym;};var isSymbol=USE_NATIVE&&_typeof($Symbol.iterator)=='symbol'?function(it){return _typeof(it)=='symbol';}:function(it){return it instanceof $Symbol;};var $defineProperty=function defineProperty(it,key,D){if(it===ObjectProto)$defineProperty(OPSymbols,key,D);anObject(it);key=toPrimitive(key,true);anObject(D);if(has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))dP(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true;}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)});}return setSymbolDesc(it,key,D);}return dP(it,key,D);};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P));var i=0;var l=keys.length;var key;while(l>i){$defineProperty(it,key=keys[i++],P[key]);}return it;};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P);};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key=toPrimitive(key,true));if(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return false;return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true;};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){it=toIObject(it);key=toPrimitive(key,true);if(it===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))return;var D=gOPD(it,key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D;};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=gOPN(toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN&&key!=META)result.push(key);}return result;};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var IS_OP=it===ObjectProto;var names=gOPN(IS_OP?OPSymbols:toIObject(it));var result=[];var i=0;var key;while(names.length>i){if(has(AllSymbols,key=names[i++])&&(IS_OP?has(ObjectProto,key):true))result.push(AllSymbols[key]);}return result;};// 19.4.1.1 Symbol([description])
if(!USE_NATIVE){$Symbol=function _Symbol2(){if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');var tag=uid(arguments.length>0?arguments[0]:undefined);var $set=function $set(value){if(this===ObjectProto)$set.call(OPSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value));};if(DESCRIPTORS&&setter)setSymbolDesc(ObjectProto,tag,{configurable:true,set:$set});return wrap(tag);};redefine($Symbol[PROTOTYPE],'toString',function toString(){return this._k;});$GOPD.f=$getOwnPropertyDescriptor;$DP.f=$defineProperty;_dereq_(77).f=gOPNExt.f=$getOwnPropertyNames;_dereq_(82).f=$propertyIsEnumerable;_dereq_(78).f=$getOwnPropertySymbols;if(DESCRIPTORS&&!_dereq_(60)){redefine(ObjectProto,'propertyIsEnumerable',$propertyIsEnumerable,true);}wksExt.f=function(name){return wrap(wks(name));};}$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols=// 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','),j=0;es6Symbols.length>j;){wks(es6Symbols[j++]);}for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;){wksDefine(wellKnownSymbols[k++]);}$export($export.S+$export.F*!USE_NATIVE,'Symbol',{// 19.4.2.1 Symbol.for(key)
'for':function _for(key){return has(SymbolRegistry,key+='')?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key);},// 19.4.2.5 Symbol.keyFor(sym)
keyFor:function keyFor(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+' is not a symbol!');},useSetter:function useSetter(){setter=true;},useSimple:function useSimple(){setter=false;}});$export($export.S+$export.F*!USE_NATIVE,'Object',{// 19.1.2.2 Object.create(O [, Properties])
create:$create,// 19.1.2.4 Object.defineProperty(O, P, Attributes)
defineProperty:$defineProperty,// 19.1.2.3 Object.defineProperties(O, Properties)
defineProperties:$defineProperties,// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
getOwnPropertyDescriptor:$getOwnPropertyDescriptor,// 19.1.2.7 Object.getOwnPropertyNames(O)
getOwnPropertyNames:$getOwnPropertyNames,// 19.1.2.8 Object.getOwnPropertySymbols(O)
getOwnPropertySymbols:$getOwnPropertySymbols});// 24.3.2 JSON.stringify(value [, replacer [, space]])
$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();// MS Edge converts symbol values to JSON as {}
// WebKit converts symbol values to JSON as null
// V8 throws on boxed symbols
return _stringify([S])!='[null]'||_stringify({a:S})!='{}'||_stringify(Object(S))!='{}';})),'JSON',{stringify:function stringify(it){if(it===undefined||isSymbol(it))return;// IE8 returns string on undefined
var args=[it];var i=1;var replacer,$replacer;while(arguments.length>i){args.push(arguments[i++]);}replacer=args[1];if(typeof replacer=='function')$replacer=replacer;if($replacer||!isArray(replacer))replacer=function replacer(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value;};args[1]=replacer;return _stringify.apply($JSON,args);}});// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)
$Symbol[PROTOTYPE][TO_PRIMITIVE]||_dereq_(42)($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf);// 19.4.3.5 Symbol.prototype[@@toStringTag]
setToStringTag($Symbol,'Symbol');// 20.2.1.9 Math[@@toStringTag]
setToStringTag(Math,'Math',true);// 24.3.3 JSON[@@toStringTag]
setToStringTag(global.JSON,'JSON',true);},{"101":101,"103":103,"117":117,"120":120,"124":124,"126":126,"127":127,"128":128,"29":29,"32":32,"33":33,"35":35,"40":40,"41":41,"42":42,"49":49,"59":59,"60":60,"66":66,"7":7,"71":71,"72":72,"75":75,"76":76,"77":77,"78":78,"81":81,"82":82,"92":92,"94":94}],255:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var $typed=_dereq_(123);var buffer=_dereq_(122);var anObject=_dereq_(7);var toAbsoluteIndex=_dereq_(114);var toLength=_dereq_(118);var isObject=_dereq_(51);var ArrayBuffer=_dereq_(40).ArrayBuffer;var speciesConstructor=_dereq_(104);var $ArrayBuffer=buffer.ArrayBuffer;var $DataView=buffer.DataView;var $isView=$typed.ABV&&ArrayBuffer.isView;var $slice=$ArrayBuffer.prototype.slice;var VIEW=$typed.VIEW;var ARRAY_BUFFER='ArrayBuffer';$export($export.G+$export.W+$export.F*(ArrayBuffer!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer});$export($export.S+$export.F*!$typed.CONSTR,ARRAY_BUFFER,{// 24.1.3.1 ArrayBuffer.isView(arg)
isView:function isView(it){return $isView&&$isView(it)||isObject(it)&&VIEW in it;}});$export($export.P+$export.U+$export.F*_dereq_(35)(function(){return!new $ArrayBuffer(2).slice(1,undefined).byteLength;}),ARRAY_BUFFER,{// 24.1.4.3 ArrayBuffer.prototype.slice(start, end)
slice:function slice(start,end){if($slice!==undefined&&end===undefined)return $slice.call(anObject(this),start);// FF fix
var len=anObject(this).byteLength;var first=toAbsoluteIndex(start,len);var final=toAbsoluteIndex(end===undefined?len:end,len);var result=new(speciesConstructor(this,$ArrayBuffer))(toLength(final-first));var viewS=new $DataView(this);var viewT=new $DataView(result);var index=0;while(first<final){viewT.setUint8(index++,viewS.getUint8(first++));}return result;}});_dereq_(100)(ARRAY_BUFFER);},{"100":100,"104":104,"114":114,"118":118,"122":122,"123":123,"33":33,"35":35,"40":40,"51":51,"7":7}],256:[function(_dereq_,module,exports){var $export=_dereq_(33);$export($export.G+$export.W+$export.F*!_dereq_(123).ABV,{DataView:_dereq_(122).DataView});},{"122":122,"123":123,"33":33}],257:[function(_dereq_,module,exports){_dereq_(121)('Float32',4,function(init){return function Float32Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],258:[function(_dereq_,module,exports){_dereq_(121)('Float64',8,function(init){return function Float64Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],259:[function(_dereq_,module,exports){_dereq_(121)('Int16',2,function(init){return function Int16Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],260:[function(_dereq_,module,exports){_dereq_(121)('Int32',4,function(init){return function Int32Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],261:[function(_dereq_,module,exports){_dereq_(121)('Int8',1,function(init){return function Int8Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],262:[function(_dereq_,module,exports){_dereq_(121)('Uint16',2,function(init){return function Uint16Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],263:[function(_dereq_,module,exports){_dereq_(121)('Uint32',4,function(init){return function Uint32Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],264:[function(_dereq_,module,exports){_dereq_(121)('Uint8',1,function(init){return function Uint8Array(data,byteOffset,length){return init(this,data,byteOffset,length);};});},{"121":121}],265:[function(_dereq_,module,exports){_dereq_(121)('Uint8',1,function(init){return function Uint8ClampedArray(data,byteOffset,length){return init(this,data,byteOffset,length);};},true);},{"121":121}],266:[function(_dereq_,module,exports){'use strict';var each=_dereq_(12)(0);var redefine=_dereq_(94);var meta=_dereq_(66);var assign=_dereq_(70);var weak=_dereq_(21);var isObject=_dereq_(51);var fails=_dereq_(35);var validate=_dereq_(125);var WEAK_MAP='WeakMap';var getWeak=meta.getWeak;var isExtensible=Object.isExtensible;var uncaughtFrozenStore=weak.ufstore;var tmp={};var InternalMap;var wrapper=function wrapper(get){return function WeakMap(){return get(this,arguments.length>0?arguments[0]:undefined);};};var methods={// 23.3.3.3 WeakMap.prototype.get(key)
get:function get(key){if(isObject(key)){var data=getWeak(key);if(data===true)return uncaughtFrozenStore(validate(this,WEAK_MAP)).get(key);return data?data[this._i]:undefined;}},// 23.3.3.5 WeakMap.prototype.set(key, value)
set:function set(key,value){return weak.def(validate(this,WEAK_MAP),key,value);}};// 23.3 WeakMap Objects
var $WeakMap=module.exports=_dereq_(22)(WEAK_MAP,wrapper,methods,weak,true,true);// IE11 WeakMap frozen keys fix
if(fails(function(){return new $WeakMap().set((Object.freeze||Object)(tmp),7).get(tmp)!=7;})){InternalMap=weak.getConstructor(wrapper,WEAK_MAP);assign(InternalMap.prototype,methods);meta.NEED=true;each(['delete','has','get','set'],function(key){var proto=$WeakMap.prototype;var method=proto[key];redefine(proto,key,function(a,b){// store frozen objects on internal weakmap shim
if(isObject(a)&&!isExtensible(a)){if(!this._f)this._f=new InternalMap();var result=this._f[key](a,b);return key=='set'?this:result;// store all the rest on native weakmap
}return method.call(this,a,b);});});}},{"12":12,"125":125,"21":21,"22":22,"35":35,"51":51,"66":66,"70":70,"94":94}],267:[function(_dereq_,module,exports){'use strict';var weak=_dereq_(21);var validate=_dereq_(125);var WEAK_SET='WeakSet';// 23.4 WeakSet Objects
_dereq_(22)(WEAK_SET,function(get){return function WeakSet(){return get(this,arguments.length>0?arguments[0]:undefined);};},{// 23.4.3.1 WeakSet.prototype.add(value)
add:function add(value){return weak.def(validate(this,WEAK_SET),value,true);}},weak,false,true);},{"125":125,"21":21,"22":22}],268:[function(_dereq_,module,exports){'use strict';// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap
var $export=_dereq_(33);var flattenIntoArray=_dereq_(38);var toObject=_dereq_(119);var toLength=_dereq_(118);var aFunction=_dereq_(3);var arraySpeciesCreate=_dereq_(15);$export($export.P,'Array',{flatMap:function flatMap(callbackfn/* , thisArg */){var O=toObject(this);var sourceLen,A;aFunction(callbackfn);sourceLen=toLength(O.length);A=arraySpeciesCreate(O,0);flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments[1]);return A;}});_dereq_(5)('flatMap');},{"118":118,"119":119,"15":15,"3":3,"33":33,"38":38,"5":5}],269:[function(_dereq_,module,exports){'use strict';// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten
var $export=_dereq_(33);var flattenIntoArray=_dereq_(38);var toObject=_dereq_(119);var toLength=_dereq_(118);var toInteger=_dereq_(116);var arraySpeciesCreate=_dereq_(15);$export($export.P,'Array',{flatten:function flatten()/* depthArg = 1 */{var depthArg=arguments[0];var O=toObject(this);var sourceLen=toLength(O.length);var A=arraySpeciesCreate(O,0);flattenIntoArray(A,O,O,sourceLen,0,depthArg===undefined?1:toInteger(depthArg));return A;}});_dereq_(5)('flatten');},{"116":116,"118":118,"119":119,"15":15,"33":33,"38":38,"5":5}],270:[function(_dereq_,module,exports){'use strict';// https://github.com/tc39/Array.prototype.includes
var $export=_dereq_(33);var $includes=_dereq_(11)(true);$export($export.P,'Array',{includes:function includes(el/* , fromIndex = 0 */){return $includes(this,el,arguments.length>1?arguments[1]:undefined);}});_dereq_(5)('includes');},{"11":11,"33":33,"5":5}],271:[function(_dereq_,module,exports){// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask
var $export=_dereq_(33);var microtask=_dereq_(68)();var process=_dereq_(40).process;var isNode=_dereq_(18)(process)=='process';$export($export.G,{asap:function asap(fn){var domain=isNode&&process.domain;microtask(domain?domain.bind(fn):fn);}});},{"18":18,"33":33,"40":40,"68":68}],272:[function(_dereq_,module,exports){// https://github.com/ljharb/proposal-is-error
var $export=_dereq_(33);var cof=_dereq_(18);$export($export.S,'Error',{isError:function isError(it){return cof(it)==='Error';}});},{"18":18,"33":33}],273:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-global
var $export=_dereq_(33);$export($export.G,{global:_dereq_(40)});},{"33":33,"40":40}],274:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from
_dereq_(97)('Map');},{"97":97}],275:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of
_dereq_(98)('Map');},{"98":98}],276:[function(_dereq_,module,exports){// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export=_dereq_(33);$export($export.P+$export.R,'Map',{toJSON:_dereq_(20)('Map')});},{"20":20,"33":33}],277:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);$export($export.S,'Math',{clamp:function clamp(x,lower,upper){return Math.min(upper,Math.max(lower,x));}});},{"33":33}],278:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);$export($export.S,'Math',{DEG_PER_RAD:Math.PI/180});},{"33":33}],279:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);var RAD_PER_DEG=180/Math.PI;$export($export.S,'Math',{degrees:function degrees(radians){return radians*RAD_PER_DEG;}});},{"33":33}],280:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);var scale=_dereq_(64);var fround=_dereq_(62);$export($export.S,'Math',{fscale:function fscale(x,inLow,inHigh,outLow,outHigh){return fround(scale(x,inLow,inHigh,outLow,outHigh));}});},{"33":33,"62":62,"64":64}],281:[function(_dereq_,module,exports){// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export=_dereq_(33);$export($export.S,'Math',{iaddh:function iaddh(x0,x1,y0,y1){var $x0=x0>>>0;var $x1=x1>>>0;var $y0=y0>>>0;return $x1+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0;}});},{"33":33}],282:[function(_dereq_,module,exports){// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export=_dereq_(33);$export($export.S,'Math',{imulh:function imulh(u,v){var UINT16=0xffff;var $u=+u;var $v=+v;var u0=$u&UINT16;var v0=$v&UINT16;var u1=$u>>16;var v1=$v>>16;var t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(t&UINT16)>>16);}});},{"33":33}],283:[function(_dereq_,module,exports){// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export=_dereq_(33);$export($export.S,'Math',{isubh:function isubh(x0,x1,y0,y1){var $x0=x0>>>0;var $x1=x1>>>0;var $y0=y0>>>0;return $x1-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0;}});},{"33":33}],284:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);$export($export.S,'Math',{RAD_PER_DEG:180/Math.PI});},{"33":33}],285:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);var DEG_PER_RAD=Math.PI/180;$export($export.S,'Math',{radians:function radians(degrees){return degrees*DEG_PER_RAD;}});},{"33":33}],286:[function(_dereq_,module,exports){// https://rwaldron.github.io/proposal-math-extensions/
var $export=_dereq_(33);$export($export.S,'Math',{scale:_dereq_(64)});},{"33":33,"64":64}],287:[function(_dereq_,module,exports){// http://jfbastien.github.io/papers/Math.signbit.html
var $export=_dereq_(33);$export($export.S,'Math',{signbit:function signbit(x){// eslint-disable-next-line no-self-compare
return(x=+x)!=x?x:x==0?1/x==Infinity:x>0;}});},{"33":33}],288:[function(_dereq_,module,exports){// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export=_dereq_(33);$export($export.S,'Math',{umulh:function umulh(u,v){var UINT16=0xffff;var $u=+u;var $v=+v;var u0=$u&UINT16;var v0=$v&UINT16;var u1=$u>>>16;var v1=$v>>>16;var t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(t&UINT16)>>>16);}});},{"33":33}],289:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toObject=_dereq_(119);var aFunction=_dereq_(3);var $defineProperty=_dereq_(72);// B.2.2.2 Object.prototype.__defineGetter__(P, getter)
_dereq_(29)&&$export($export.P+_dereq_(74),'Object',{__defineGetter__:function __defineGetter__(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:true,configurable:true});}});},{"119":119,"29":29,"3":3,"33":33,"72":72,"74":74}],290:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toObject=_dereq_(119);var aFunction=_dereq_(3);var $defineProperty=_dereq_(72);// B.2.2.3 Object.prototype.__defineSetter__(P, setter)
_dereq_(29)&&$export($export.P+_dereq_(74),'Object',{__defineSetter__:function __defineSetter__(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:true,configurable:true});}});},{"119":119,"29":29,"3":3,"33":33,"72":72,"74":74}],291:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-object-values-entries
var $export=_dereq_(33);var $entries=_dereq_(84)(true);$export($export.S,'Object',{entries:function entries(it){return $entries(it);}});},{"33":33,"84":84}],292:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-object-getownpropertydescriptors
var $export=_dereq_(33);var ownKeys=_dereq_(85);var toIObject=_dereq_(117);var gOPD=_dereq_(75);var createProperty=_dereq_(24);$export($export.S,'Object',{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(object){var O=toIObject(object);var getDesc=gOPD.f;var keys=ownKeys(O);var result={};var i=0;var key,desc;while(keys.length>i){desc=getDesc(O,key=keys[i++]);if(desc!==undefined)createProperty(result,key,desc);}return result;}});},{"117":117,"24":24,"33":33,"75":75,"85":85}],293:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toObject=_dereq_(119);var toPrimitive=_dereq_(120);var getPrototypeOf=_dereq_(79);var getOwnPropertyDescriptor=_dereq_(75).f;// B.2.2.4 Object.prototype.__lookupGetter__(P)
_dereq_(29)&&$export($export.P+_dereq_(74),'Object',{__lookupGetter__:function __lookupGetter__(P){var O=toObject(this);var K=toPrimitive(P,true);var D;do{if(D=getOwnPropertyDescriptor(O,K))return D.get;}while(O=getPrototypeOf(O));}});},{"119":119,"120":120,"29":29,"33":33,"74":74,"75":75,"79":79}],294:[function(_dereq_,module,exports){'use strict';var $export=_dereq_(33);var toObject=_dereq_(119);var toPrimitive=_dereq_(120);var getPrototypeOf=_dereq_(79);var getOwnPropertyDescriptor=_dereq_(75).f;// B.2.2.5 Object.prototype.__lookupSetter__(P)
_dereq_(29)&&$export($export.P+_dereq_(74),'Object',{__lookupSetter__:function __lookupSetter__(P){var O=toObject(this);var K=toPrimitive(P,true);var D;do{if(D=getOwnPropertyDescriptor(O,K))return D.set;}while(O=getPrototypeOf(O));}});},{"119":119,"120":120,"29":29,"33":33,"74":74,"75":75,"79":79}],295:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-object-values-entries
var $export=_dereq_(33);var $values=_dereq_(84)(false);$export($export.S,'Object',{values:function values(it){return $values(it);}});},{"33":33,"84":84}],296:[function(_dereq_,module,exports){'use strict';// https://github.com/zenparsing/es-observable
var $export=_dereq_(33);var global=_dereq_(40);var core=_dereq_(23);var microtask=_dereq_(68)();var OBSERVABLE=_dereq_(128)('observable');var aFunction=_dereq_(3);var anObject=_dereq_(7);var anInstance=_dereq_(6);var redefineAll=_dereq_(93);var hide=_dereq_(42);var forOf=_dereq_(39);var RETURN=forOf.RETURN;var getMethod=function getMethod(fn){return fn==null?undefined:aFunction(fn);};var cleanupSubscription=function cleanupSubscription(subscription){var cleanup=subscription._c;if(cleanup){subscription._c=undefined;cleanup();}};var subscriptionClosed=function subscriptionClosed(subscription){return subscription._o===undefined;};var closeSubscription=function closeSubscription(subscription){if(!subscriptionClosed(subscription)){subscription._o=undefined;cleanupSubscription(subscription);}};var Subscription=function Subscription(observer,subscriber){anObject(observer);this._c=undefined;this._o=observer;observer=new SubscriptionObserver(this);try{var cleanup=subscriber(observer);var subscription=cleanup;if(cleanup!=null){if(typeof cleanup.unsubscribe==='function')cleanup=function cleanup(){subscription.unsubscribe();};else aFunction(cleanup);this._c=cleanup;}}catch(e){observer.error(e);return;}if(subscriptionClosed(this))cleanupSubscription(this);};Subscription.prototype=redefineAll({},{unsubscribe:function unsubscribe(){closeSubscription(this);}});var SubscriptionObserver=function SubscriptionObserver(subscription){this._s=subscription;};SubscriptionObserver.prototype=redefineAll({},{next:function next(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;try{var m=getMethod(observer.next);if(m)return m.call(observer,value);}catch(e){try{closeSubscription(subscription);}finally{throw e;}}}},error:function error(value){var subscription=this._s;if(subscriptionClosed(subscription))throw value;var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.error);if(!m)throw value;value=m.call(observer,value);}catch(e){try{cleanupSubscription(subscription);}finally{throw e;}}cleanupSubscription(subscription);return value;},complete:function complete(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.complete);value=m?m.call(observer,value):undefined;}catch(e){try{cleanupSubscription(subscription);}finally{throw e;}}cleanupSubscription(subscription);return value;}}});var $Observable=function Observable(subscriber){anInstance(this,$Observable,'Observable','_f')._f=aFunction(subscriber);};redefineAll($Observable.prototype,{subscribe:function subscribe(observer){return new Subscription(observer,this._f);},forEach:function forEach(fn){var that=this;return new(core.Promise||global.Promise)(function(resolve,reject){aFunction(fn);var subscription=that.subscribe({next:function next(value){try{return fn(value);}catch(e){reject(e);subscription.unsubscribe();}},error:reject,complete:resolve});});}});redefineAll($Observable,{from:function from(x){var C=typeof this==='function'?this:$Observable;var method=getMethod(anObject(x)[OBSERVABLE]);if(method){var observable=anObject(method.call(x));return observable.constructor===C?observable:new C(function(observer){return observable.subscribe(observer);});}return new C(function(observer){var done=false;microtask(function(){if(!done){try{if(forOf(x,false,function(it){observer.next(it);if(done)return RETURN;})===RETURN)return;}catch(e){if(done)throw e;observer.error(e);return;}observer.complete();}});return function(){done=true;};});},of:function of(){for(var i=0,l=arguments.length,items=Array(l);i<l;){items[i]=arguments[i++];}return new(typeof this==='function'?this:$Observable)(function(observer){var done=false;microtask(function(){if(!done){for(var j=0;j<items.length;++j){observer.next(items[j]);if(done)return;}observer.complete();}});return function(){done=true;};});}});hide($Observable.prototype,OBSERVABLE,function(){return this;});$export($export.G,{Observable:$Observable});_dereq_(100)('Observable');},{"100":100,"128":128,"23":23,"3":3,"33":33,"39":39,"40":40,"42":42,"6":6,"68":68,"7":7,"93":93}],297:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-promise-finally
'use strict';var $export=_dereq_(33);var core=_dereq_(23);var global=_dereq_(40);var speciesConstructor=_dereq_(104);var promiseResolve=_dereq_(91);$export($export.P+$export.R,'Promise',{'finally':function _finally(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise);var isFunction=typeof onFinally=='function';return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x;});}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e;});}:onFinally);}});},{"104":104,"23":23,"33":33,"40":40,"91":91}],298:[function(_dereq_,module,exports){'use strict';// https://github.com/tc39/proposal-promise-try
var $export=_dereq_(33);var newPromiseCapability=_dereq_(69);var perform=_dereq_(90);$export($export.S,'Promise',{'try':function _try(callbackfn){var promiseCapability=newPromiseCapability.f(this);var result=perform(callbackfn);(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v);return promiseCapability.promise;}});},{"33":33,"69":69,"90":90}],299:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var toMetaKey=metadata.key;var ordinaryDefineOwnMetadata=metadata.set;metadata.exp({defineMetadata:function defineMetadata(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,anObject(target),toMetaKey(targetKey));}});},{"67":67,"7":7}],300:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var toMetaKey=metadata.key;var getOrCreateMetadataMap=metadata.map;var store=metadata.store;metadata.exp({deleteMetadata:function deleteMetadata(metadataKey,target/* , targetKey */){var targetKey=arguments.length<3?undefined:toMetaKey(arguments[2]);var metadataMap=getOrCreateMetadataMap(anObject(target),targetKey,false);if(metadataMap===undefined||!metadataMap['delete'](metadataKey))return false;if(metadataMap.size)return true;var targetMetadata=store.get(target);targetMetadata['delete'](targetKey);return!!targetMetadata.size||store['delete'](target);}});},{"67":67,"7":7}],301:[function(_dereq_,module,exports){var Set=_dereq_(231);var from=_dereq_(10);var metadata=_dereq_(67);var anObject=_dereq_(7);var getPrototypeOf=_dereq_(79);var ordinaryOwnMetadataKeys=metadata.keys;var toMetaKey=metadata.key;var ordinaryMetadataKeys=function ordinaryMetadataKeys(O,P){var oKeys=ordinaryOwnMetadataKeys(O,P);var parent=getPrototypeOf(O);if(parent===null)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?from(new Set(oKeys.concat(pKeys))):pKeys:oKeys;};metadata.exp({getMetadataKeys:function getMetadataKeys(target/* , targetKey */){return ordinaryMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]));}});},{"10":10,"231":231,"67":67,"7":7,"79":79}],302:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var getPrototypeOf=_dereq_(79);var ordinaryHasOwnMetadata=metadata.has;var ordinaryGetOwnMetadata=metadata.get;var toMetaKey=metadata.key;var ordinaryGetMetadata=function ordinaryGetMetadata(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return ordinaryGetOwnMetadata(MetadataKey,O,P);var parent=getPrototypeOf(O);return parent!==null?ordinaryGetMetadata(MetadataKey,parent,P):undefined;};metadata.exp({getMetadata:function getMetadata(metadataKey,target/* , targetKey */){return ordinaryGetMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});},{"67":67,"7":7,"79":79}],303:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var ordinaryOwnMetadataKeys=metadata.keys;var toMetaKey=metadata.key;metadata.exp({getOwnMetadataKeys:function getOwnMetadataKeys(target/* , targetKey */){return ordinaryOwnMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]));}});},{"67":67,"7":7}],304:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var ordinaryGetOwnMetadata=metadata.get;var toMetaKey=metadata.key;metadata.exp({getOwnMetadata:function getOwnMetadata(metadataKey,target/* , targetKey */){return ordinaryGetOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});},{"67":67,"7":7}],305:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var getPrototypeOf=_dereq_(79);var ordinaryHasOwnMetadata=metadata.has;var toMetaKey=metadata.key;var ordinaryHasMetadata=function ordinaryHasMetadata(MetadataKey,O,P){var hasOwn=ordinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return true;var parent=getPrototypeOf(O);return parent!==null?ordinaryHasMetadata(MetadataKey,parent,P):false;};metadata.exp({hasMetadata:function hasMetadata(metadataKey,target/* , targetKey */){return ordinaryHasMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});},{"67":67,"7":7,"79":79}],306:[function(_dereq_,module,exports){var metadata=_dereq_(67);var anObject=_dereq_(7);var ordinaryHasOwnMetadata=metadata.has;var toMetaKey=metadata.key;metadata.exp({hasOwnMetadata:function hasOwnMetadata(metadataKey,target/* , targetKey */){return ordinaryHasOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]));}});},{"67":67,"7":7}],307:[function(_dereq_,module,exports){var $metadata=_dereq_(67);var anObject=_dereq_(7);var aFunction=_dereq_(3);var toMetaKey=$metadata.key;var ordinaryDefineOwnMetadata=$metadata.set;$metadata.exp({metadata:function metadata(metadataKey,metadataValue){return function decorator(target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,(targetKey!==undefined?anObject:aFunction)(target),toMetaKey(targetKey));};}});},{"3":3,"67":67,"7":7}],308:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from
_dereq_(97)('Set');},{"97":97}],309:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of
_dereq_(98)('Set');},{"98":98}],310:[function(_dereq_,module,exports){// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export=_dereq_(33);$export($export.P+$export.R,'Set',{toJSON:_dereq_(20)('Set')});},{"20":20,"33":33}],311:[function(_dereq_,module,exports){'use strict';// https://github.com/mathiasbynens/String.prototype.at
var $export=_dereq_(33);var $at=_dereq_(106)(true);$export($export.P,'String',{at:function at(pos){return $at(this,pos);}});},{"106":106,"33":33}],312:[function(_dereq_,module,exports){'use strict';// https://tc39.github.io/String.prototype.matchAll/
var $export=_dereq_(33);var defined=_dereq_(28);var toLength=_dereq_(118);var isRegExp=_dereq_(52);var getFlags=_dereq_(37);var RegExpProto=RegExp.prototype;var $RegExpStringIterator=function $RegExpStringIterator(regexp,string){this._r=regexp;this._s=string;};_dereq_(54)($RegExpStringIterator,'RegExp String',function next(){var match=this._r.exec(this._s);return{value:match,done:match===null};});$export($export.P,'String',{matchAll:function matchAll(regexp){defined(this);if(!isRegExp(regexp))throw TypeError(regexp+' is not a regexp!');var S=String(this);var flags='flags'in RegExpProto?String(regexp.flags):getFlags.call(regexp);var rx=new RegExp(regexp.source,~flags.indexOf('g')?flags:'g'+flags);rx.lastIndex=toLength(regexp.lastIndex);return new $RegExpStringIterator(rx,S);}});},{"118":118,"28":28,"33":33,"37":37,"52":52,"54":54}],313:[function(_dereq_,module,exports){'use strict';// https://github.com/tc39/proposal-string-pad-start-end
var $export=_dereq_(33);var $pad=_dereq_(109);$export($export.P,'String',{padEnd:function padEnd(maxLength/* , fillString = ' ' */){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,false);}});},{"109":109,"33":33}],314:[function(_dereq_,module,exports){'use strict';// https://github.com/tc39/proposal-string-pad-start-end
var $export=_dereq_(33);var $pad=_dereq_(109);$export($export.P,'String',{padStart:function padStart(maxLength/* , fillString = ' ' */){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,true);}});},{"109":109,"33":33}],315:[function(_dereq_,module,exports){'use strict';// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
_dereq_(111)('trimLeft',function($trim){return function trimLeft(){return $trim(this,1);};},'trimStart');},{"111":111}],316:[function(_dereq_,module,exports){'use strict';// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
_dereq_(111)('trimRight',function($trim){return function trimRight(){return $trim(this,2);};},'trimEnd');},{"111":111}],317:[function(_dereq_,module,exports){_dereq_(126)('asyncIterator');},{"126":126}],318:[function(_dereq_,module,exports){_dereq_(126)('observable');},{"126":126}],319:[function(_dereq_,module,exports){// https://github.com/tc39/proposal-global
var $export=_dereq_(33);$export($export.S,'System',{global:_dereq_(40)});},{"33":33,"40":40}],320:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from
_dereq_(97)('WeakMap');},{"97":97}],321:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of
_dereq_(98)('WeakMap');},{"98":98}],322:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from
_dereq_(97)('WeakSet');},{"97":97}],323:[function(_dereq_,module,exports){// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of
_dereq_(98)('WeakSet');},{"98":98}],324:[function(_dereq_,module,exports){var $iterators=_dereq_(141);var getKeys=_dereq_(81);var redefine=_dereq_(94);var global=_dereq_(40);var hide=_dereq_(42);var Iterators=_dereq_(58);var wks=_dereq_(128);var ITERATOR=wks('iterator');var TO_STRING_TAG=wks('toStringTag');var ArrayValues=Iterators.Array;var DOMIterables={CSSRuleList:true,// TODO: Not spec compliant, should be false.
CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,// TODO: Not spec compliant, should be false.
MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,// TODO: Not spec compliant, should be false.
TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var NAME=collections[i];var explicit=DOMIterables[NAME];var Collection=global[NAME];var proto=Collection&&Collection.prototype;var key;if(proto){if(!proto[ITERATOR])hide(proto,ITERATOR,ArrayValues);if(!proto[TO_STRING_TAG])hide(proto,TO_STRING_TAG,NAME);Iterators[NAME]=ArrayValues;if(explicit)for(key in $iterators){if(!proto[key])redefine(proto,key,$iterators[key],true);}}}},{"128":128,"141":141,"40":40,"42":42,"58":58,"81":81,"94":94}],325:[function(_dereq_,module,exports){var $export=_dereq_(33);var $task=_dereq_(113);$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear});},{"113":113,"33":33}],326:[function(_dereq_,module,exports){// ie9- setTimeout & setInterval additional parameters fix
var global=_dereq_(40);var $export=_dereq_(33);var invoke=_dereq_(46);var partial=_dereq_(88);var navigator=global.navigator;var MSIE=!!navigator&&/MSIE .\./.test(navigator.userAgent);// <- dirty ie9- check
var wrap=function wrap(set){return MSIE?function(fn,time/* , ...args */){return set(invoke(partial,[].slice.call(arguments,2),// eslint-disable-next-line no-new-func
typeof fn=='function'?fn:Function(fn)),time);}:set;};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)});},{"33":33,"40":40,"46":46,"88":88}],327:[function(_dereq_,module,exports){_dereq_(254);_dereq_(191);_dereq_(193);_dereq_(192);_dereq_(195);_dereq_(197);_dereq_(202);_dereq_(196);_dereq_(194);_dereq_(204);_dereq_(203);_dereq_(199);_dereq_(200);_dereq_(198);_dereq_(190);_dereq_(201);_dereq_(205);_dereq_(206);_dereq_(157);_dereq_(159);_dereq_(158);_dereq_(208);_dereq_(207);_dereq_(178);_dereq_(188);_dereq_(189);_dereq_(179);_dereq_(180);_dereq_(181);_dereq_(182);_dereq_(183);_dereq_(184);_dereq_(185);_dereq_(186);_dereq_(187);_dereq_(161);_dereq_(162);_dereq_(163);_dereq_(164);_dereq_(165);_dereq_(166);_dereq_(167);_dereq_(168);_dereq_(169);_dereq_(170);_dereq_(171);_dereq_(172);_dereq_(173);_dereq_(174);_dereq_(175);_dereq_(176);_dereq_(177);_dereq_(241);_dereq_(246);_dereq_(253);_dereq_(244);_dereq_(236);_dereq_(237);_dereq_(242);_dereq_(247);_dereq_(249);_dereq_(232);_dereq_(233);_dereq_(234);_dereq_(235);_dereq_(238);_dereq_(239);_dereq_(240);_dereq_(243);_dereq_(245);_dereq_(248);_dereq_(250);_dereq_(251);_dereq_(252);_dereq_(152);_dereq_(154);_dereq_(153);_dereq_(156);_dereq_(155);_dereq_(140);_dereq_(138);_dereq_(145);_dereq_(142);_dereq_(148);_dereq_(150);_dereq_(137);_dereq_(144);_dereq_(134);_dereq_(149);_dereq_(132);_dereq_(147);_dereq_(146);_dereq_(139);_dereq_(143);_dereq_(131);_dereq_(133);_dereq_(136);_dereq_(135);_dereq_(151);_dereq_(141);_dereq_(224);_dereq_(230);_dereq_(225);_dereq_(226);_dereq_(227);_dereq_(228);_dereq_(229);_dereq_(209);_dereq_(160);_dereq_(231);_dereq_(266);_dereq_(267);_dereq_(255);_dereq_(256);_dereq_(261);_dereq_(264);_dereq_(265);_dereq_(259);_dereq_(262);_dereq_(260);_dereq_(263);_dereq_(257);_dereq_(258);_dereq_(210);_dereq_(211);_dereq_(212);_dereq_(213);_dereq_(214);_dereq_(217);_dereq_(215);_dereq_(216);_dereq_(218);_dereq_(219);_dereq_(220);_dereq_(221);_dereq_(223);_dereq_(222);_dereq_(270);_dereq_(268);_dereq_(269);_dereq_(311);_dereq_(314);_dereq_(313);_dereq_(315);_dereq_(316);_dereq_(312);_dereq_(317);_dereq_(318);_dereq_(292);_dereq_(295);_dereq_(291);_dereq_(289);_dereq_(290);_dereq_(293);_dereq_(294);_dereq_(276);_dereq_(310);_dereq_(275);_dereq_(309);_dereq_(321);_dereq_(323);_dereq_(274);_dereq_(308);_dereq_(320);_dereq_(322);_dereq_(273);_dereq_(319);_dereq_(272);_dereq_(277);_dereq_(278);_dereq_(279);_dereq_(280);_dereq_(281);_dereq_(283);_dereq_(282);_dereq_(284);_dereq_(285);_dereq_(286);_dereq_(288);_dereq_(287);_dereq_(297);_dereq_(298);_dereq_(299);_dereq_(300);_dereq_(302);_dereq_(301);_dereq_(304);_dereq_(303);_dereq_(305);_dereq_(306);_dereq_(307);_dereq_(271);_dereq_(296);_dereq_(326);_dereq_(325);_dereq_(324);module.exports=_dereq_(23);},{"131":131,"132":132,"133":133,"134":134,"135":135,"136":136,"137":137,"138":138,"139":139,"140":140,"141":141,"142":142,"143":143,"144":144,"145":145,"146":146,"147":147,"148":148,"149":149,"150":150,"151":151,"152":152,"153":153,"154":154,"155":155,"156":156,"157":157,"158":158,"159":159,"160":160,"161":161,"162":162,"163":163,"164":164,"165":165,"166":166,"167":167,"168":168,"169":169,"170":170,"171":171,"172":172,"173":173,"174":174,"175":175,"176":176,"177":177,"178":178,"179":179,"180":180,"181":181,"182":182,"183":183,"184":184,"185":185,"186":186,"187":187,"188":188,"189":189,"190":190,"191":191,"192":192,"193":193,"194":194,"195":195,"196":196,"197":197,"198":198,"199":199,"200":200,"201":201,"202":202,"203":203,"204":204,"205":205,"206":206,"207":207,"208":208,"209":209,"210":210,"211":211,"212":212,"213":213,"214":214,"215":215,"216":216,"217":217,"218":218,"219":219,"220":220,"221":221,"222":222,"223":223,"224":224,"225":225,"226":226,"227":227,"228":228,"229":229,"23":23,"230":230,"231":231,"232":232,"233":233,"234":234,"235":235,"236":236,"237":237,"238":238,"239":239,"240":240,"241":241,"242":242,"243":243,"244":244,"245":245,"246":246,"247":247,"248":248,"249":249,"250":250,"251":251,"252":252,"253":253,"254":254,"255":255,"256":256,"257":257,"258":258,"259":259,"260":260,"261":261,"262":262,"263":263,"264":264,"265":265,"266":266,"267":267,"268":268,"269":269,"270":270,"271":271,"272":272,"273":273,"274":274,"275":275,"276":276,"277":277,"278":278,"279":279,"280":280,"281":281,"282":282,"283":283,"284":284,"285":285,"286":286,"287":287,"288":288,"289":289,"290":290,"291":291,"292":292,"293":293,"294":294,"295":295,"296":296,"297":297,"298":298,"299":299,"300":300,"301":301,"302":302,"303":303,"304":304,"305":305,"306":306,"307":307,"308":308,"309":309,"310":310,"311":311,"312":312,"313":313,"314":314,"315":315,"316":316,"317":317,"318":318,"319":319,"320":320,"321":321,"322":322,"323":323,"324":324,"325":325,"326":326}],328:[function(_dereq_,module,exports){(function(global){/**
 * Copyright (c) 2014, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * https://raw.github.com/facebook/regenerator/master/LICENSE file. An
 * additional grant of patent rights can be found in the PATENTS file in
 * the same directory.
 */!function(global){"use strict";var Op=Object.prototype;var hasOwn=Op.hasOwnProperty;var undefined;// More compressible than void 0.
var $Symbol=typeof Symbol==="function"?Symbol:{};var iteratorSymbol=$Symbol.iterator||"@@iterator";var asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator";var toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";var inModule=_typeof(module)==="object";var runtime=global.regeneratorRuntime;if(runtime){if(inModule){// If regeneratorRuntime is defined globally and we're in a module,
// make the exports object identical to regeneratorRuntime.
module.exports=runtime;}// Don't bother evaluating the rest of this file if the runtime was
// already defined globally.
return;}// Define the runtime globally (as expected by generated code) as either
// module.exports (if we're in a module) or a new, empty object.
runtime=global.regeneratorRuntime=inModule?module.exports:{};function wrap(innerFn,outerFn,self,tryLocsList){// If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator;var generator=Object.create(protoGenerator.prototype);var context=new Context(tryLocsList||[]);// The ._invoke method unifies the implementations of the .next,
// .throw, and .return methods.
generator._invoke=makeInvokeMethod(innerFn,self,context);return generator;}runtime.wrap=wrap;// Try/catch helper to minimize deoptimizations. Returns a completion
// record like context.tryEntries[i].completion. This interface could
// have been (and was previously) designed to take a closure to be
// invoked without arguments, but in all the cases we care about we
// already have an existing method we want to call, so there's no need
// to create a new function object. We can even get away with assuming
// the method takes exactly one argument, since that happens to be true
// in every case, so we don't have to touch the arguments object. The
// only additional allocation required is the completion record, which
// has a stable shape and so hopefully should be cheap to allocate.
function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}var GenStateSuspendedStart="suspendedStart";var GenStateSuspendedYield="suspendedYield";var GenStateExecuting="executing";var GenStateCompleted="completed";// Returning this object from the innerFn has the same effect as
// breaking out of the dispatch switch statement.
var ContinueSentinel={};// Dummy constructor functions that we use as the .constructor and
// .constructor.prototype properties for functions that return Generator
// objects. For full spec compliance, you may wish to configure your
// minifier not to mangle the names of these two functions.
function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}// This is a polyfill for %IteratorPrototype% for environments that
// don't natively support it.
var IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this;};var getProto=Object.getPrototypeOf;var NativeIteratorPrototype=getProto&&getProto(getProto(values([])));if(NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)){// This environment has a native %IteratorPrototype%; use it instead
// of the polyfill.
IteratorPrototype=NativeIteratorPrototype;}var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction";// Helper for defining the .next, .throw, and .return methods of the
// Iterator interface in terms of a single ._invoke method.
function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg);};});}runtime.isGeneratorFunction=function(genFun){var ctor=typeof genFun==="function"&&genFun.constructor;return ctor?ctor===GeneratorFunction||// For the native GeneratorFunction constructor, the best we can
// do is to check its .name property.
(ctor.displayName||ctor.name)==="GeneratorFunction":false;};runtime.mark=function(genFun){if(Object.setPrototypeOf){Object.setPrototypeOf(genFun,GeneratorFunctionPrototype);}else{genFun.__proto__=GeneratorFunctionPrototype;if(!(toStringTagSymbol in genFun)){genFun[toStringTagSymbol]="GeneratorFunction";}}genFun.prototype=Object.create(Gp);return genFun;};// Within the body of any async function, `await x` is transformed to
// `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
// `hasOwn.call(value, "__await")` to determine if the yielded value is
// meant to be awaited.
runtime.awrap=function(arg){return{__await:arg};};function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(record.type==="throw"){reject(record.arg);}else{var result=record.arg;var value=result.value;if(value&&_typeof(value)==="object"&&hasOwn.call(value,"__await")){return Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);});}return Promise.resolve(value).then(function(unwrapped){// When a yielded Promise is resolved, its final value becomes
// the .value of the Promise<{value,done}> result for the
// current iteration. If the Promise is rejected, however, the
// result for this iteration will be rejected with the same
// reason. Note that rejections of yielded Promises are not
// thrown back into the generator function, as is the case
// when an awaited Promise is rejected. This difference in
// behavior between yield and await is important, because it
// allows the consumer to decide what to do with the yielded
// rejection (swallow it and continue, manually .throw it back
// into the generator, abandon iteration, whatever). With
// await, by contrast, there is no opportunity to examine the
// rejection reason outside the generator function, so the
// only option is to throw it from the await expression, and
// let the generator function handle the exception.
result.value=unwrapped;resolve(result);},reject);}}if(_typeof(global.process)==="object"&&global.process.domain){invoke=global.process.domain.bind(invoke);}var previousPromise;function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=// If enqueue has been called before, then we want to wait until
// all previous Promises have been resolved before calling invoke,
// so that results are always delivered in the correct order. If
// enqueue has not been called before, then it is important to
// call invoke immediately, without waiting on a callback to fire,
// so that the async generator function has the opportunity to do
// any necessary setup in a predictable way. This predictability
// is why the Promise constructor synchronously invokes its
// executor callback, and why async functions synchronously
// execute code before the first await. Since we implement simple
// async functions in terms of async generators, it is especially
// important to get this right, even though it requires care.
previousPromise?previousPromise.then(callInvokeWithMethodAndArg,// Avoid propagating failures to Promises returned by later
// invocations of the iterator.
callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}// Define the unified helper method that is used to implement .next,
// .throw, and .return (see defineIteratorMethods).
this._invoke=enqueue;}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this;};runtime.AsyncIterator=AsyncIterator;// Note that simple async functions are implemented on top of
// AsyncIterator objects; they just return a Promise for the value of
// the final result produced by the iterator.
runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter// If outerFn is a generator, return the full iterator.
:iter.next().then(function(result){return result.done?result.value:iter.next();});};function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function invoke(method,arg){if(state===GenStateExecuting){throw new Error("Generator is already running");}if(state===GenStateCompleted){if(method==="throw"){throw arg;}// Be forgiving, per 25.3.3.3.3 of the spec:
// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
return doneResult();}context.method=method;context.arg=arg;while(true){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(context.method==="next"){// Setting context._sent for legacy support of Babel's
// function.sent implementation.
context.sent=context._sent=context.arg;}else if(context.method==="throw"){if(state===GenStateSuspendedStart){state=GenStateCompleted;throw context.arg;}context.dispatchException(context.arg);}else if(context.method==="return"){context.abrupt("return",context.arg);}state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if(record.type==="normal"){// If an exception is thrown from innerFn, we leave state ===
// GenStateExecuting and loop back for another invocation.
state=context.done?GenStateCompleted:GenStateSuspendedYield;if(record.arg===ContinueSentinel){continue;}return{value:record.arg,done:context.done};}else if(record.type==="throw"){state=GenStateCompleted;// Dispatch the exception by looping back around to the
// context.dispatchException(context.arg) call above.
context.method="throw";context.arg=record.arg;}}};}// Call delegate.iterator[context.method](context.arg) and handle the
// result, either by returning a { value, done } result from the
// delegate iterator, or by modifying context.method and context.arg,
// setting context.delegate to null, and returning the ContinueSentinel.
function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){// A .throw or .return when the delegate iterator has no .throw
// method always terminates the yield* loop.
context.delegate=null;if(context.method==="throw"){if(delegate.iterator.return){// If the delegate iterator has a return method, give it a
// chance to clean up.
context.method="return";context.arg=undefined;maybeInvokeDelegate(delegate,context);if(context.method==="throw"){// If maybeInvokeDelegate(context) changed context.method from
// "return" to "throw", let that override the TypeError below.
return ContinueSentinel;}}context.method="throw";context.arg=new TypeError("The iterator does not provide a 'throw' method");}return ContinueSentinel;}var record=tryCatch(method,delegate.iterator,context.arg);if(record.type==="throw"){context.method="throw";context.arg=record.arg;context.delegate=null;return ContinueSentinel;}var info=record.arg;if(!info){context.method="throw";context.arg=new TypeError("iterator result is not an object");context.delegate=null;return ContinueSentinel;}if(info.done){// Assign the result of the finished delegate to the temporary
// variable specified by delegate.resultName (see delegateYield).
context[delegate.resultName]=info.value;// Resume execution at the desired location (see delegateYield).
context.next=delegate.nextLoc;// If context.method was "throw" but the delegate handled the
// exception, let the outer generator proceed normally. If
// context.method was "next", forget context.arg since it has been
// "consumed" by the delegate iterator. If context.method was
// "return", allow the original .return call to continue in the
// outer generator.
if(context.method!=="return"){context.method="next";context.arg=undefined;}}else{// Re-yield the result returned by the delegate method.
return info;}// The delegate iterator is finished, so forget it and continue with
// the outer generator.
context.delegate=null;return ContinueSentinel;}// Define Generator.prototype.{next,throw,return} in terms of the
// unified ._invoke helper method.
defineIteratorMethods(Gp);Gp[toStringTagSymbol]="Generator";// A Generator should always return itself as the iterator object when the
// @@iterator function is called on it. Some browsers' implementations of the
// iterator prototype chain incorrectly implement this, causing the Generator
// object to not be returned from this call. This ensures that doesn't happen.
// See https://github.com/facebook/regenerator/issues/274 for more details.
Gp[iteratorSymbol]=function(){return this;};Gp.toString=function(){return"[object Generator]";};function pushTryEntry(locs){var entry={tryLoc:locs[0]};if(1 in locs){entry.catchLoc=locs[1];}if(2 in locs){entry.finallyLoc=locs[2];entry.afterLoc=locs[3];}this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal";delete record.arg;entry.completion=record;}function Context(tryLocsList){// The root entry object (effectively a try statement without a catch
// or a finally block) gives us a place to store values thrown from
// locations where there is no enclosing try statement.
this.tryEntries=[{tryLoc:"root"}];tryLocsList.forEach(pushTryEntry,this);this.reset(true);}runtime.keys=function(object){var keys=[];for(var key in object){keys.push(key);}keys.reverse();// Rather than returning an object with a next method, we keep
// things simple and return the next function itself.
return function next(){while(keys.length){var key=keys.pop();if(key in object){next.value=key;next.done=false;return next;}}// To avoid creating an additional object, we just hang the .value
// and .done properties off the next function object itself. This
// also ensures that the minifier will not anonymize the function.
next.done=true;return next;};};function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod){return iteratorMethod.call(iterable);}if(typeof iterable.next==="function"){return iterable;}if(!isNaN(iterable.length)){var i=-1,next=function next(){while(++i<iterable.length){if(hasOwn.call(iterable,i)){next.value=iterable[i];next.done=false;return next;}}next.value=undefined;next.done=true;return next;};return next.next=next;}}// Return an iterator with no values.
return{next:doneResult};}runtime.values=values;function doneResult(){return{value:undefined,done:true};}Context.prototype={constructor:Context,reset:function reset(skipTempReset){this.prev=0;this.next=0;// Resetting context._sent for legacy support of Babel's
// function.sent implementation.
this.sent=this._sent=undefined;this.done=false;this.delegate=null;this.method="next";this.arg=undefined;this.tryEntries.forEach(resetTryEntry);if(!skipTempReset){for(var name in this){// Not sure about the optimal order of these conditions:
if(name.charAt(0)==="t"&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))){this[name]=undefined;}}}},stop:function stop(){this.done=true;var rootEntry=this.tryEntries[0];var rootRecord=rootEntry.completion;if(rootRecord.type==="throw"){throw rootRecord.arg;}return this.rval;},dispatchException:function dispatchException(exception){if(this.done){throw exception;}var context=this;function handle(loc,caught){record.type="throw";record.arg=exception;context.next=loc;if(caught){// If the dispatched exception was caught by a catch block,
// then let that catch block handle the exception normally.
context.method="next";context.arg=undefined;}return!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];var record=entry.completion;if(entry.tryLoc==="root"){// Exception thrown outside of any try block that could handle
// it, so set the completion value of the entire function to
// throw the exception.
return handle("end");}if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc");var hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}else if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else if(hasCatch){if(this.prev<entry.catchLoc){return handle(entry.catchLoc,true);}}else if(hasFinally){if(this.prev<entry.finallyLoc){return handle(entry.finallyLoc);}}else{throw new Error("try statement without catch or finally");}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}if(finallyEntry&&(type==="break"||type==="continue")&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc){// Ignore the finally entry if control is not jumping to a
// location outside the try/catch block.
finallyEntry=null;}var record=finallyEntry?finallyEntry.completion:{};record.type=type;record.arg=arg;if(finallyEntry){this.method="next";this.next=finallyEntry.finallyLoc;return ContinueSentinel;}return this.complete(record);},complete:function complete(record,afterLoc){if(record.type==="throw"){throw record.arg;}if(record.type==="break"||record.type==="continue"){this.next=record.arg;}else if(record.type==="return"){this.rval=this.arg=record.arg;this.method="return";this.next="end";}else if(record.type==="normal"&&afterLoc){this.next=afterLoc;}return ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc){this.complete(entry.completion,entry.afterLoc);resetTryEntry(entry);return ContinueSentinel;}}},"catch":function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(record.type==="throw"){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}// The context.catch method must only be called with a location
// argument that corresponds to a known catch block.
throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc};if(this.method==="next"){// Deliberately forget the last sent value so that we don't
// accidentally pass it on to the delegate.
this.arg=undefined;}return ContinueSentinel;}};}(// Among the various tricks for obtaining a reference to the global
// object, this seems to be the most reliable technique that does not
// use indirect eval (which violates Content Security Policy).
_typeof(global)==="object"?global:(typeof window==="undefined"?"undefined":_typeof(window))==="object"?window:(typeof self==="undefined"?"undefined":_typeof(self))==="object"?self:this);}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}]},{},[1]);var tns=function(){// keys
if(!Object.keys){Object.keys=function(object){var keys=[];for(var name in object){if(Object.prototype.hasOwnProperty.call(object,name)){keys.push(name);}}return keys;};}// ChildNode.remove
(function(){"use strict";if(!("remove"in Element.prototype)){Element.prototype.remove=function(){if(this.parentNode){this.parentNode.removeChild(this);}};}})();var win=window;var raf=win.requestAnimationFrame||win.webkitRequestAnimationFrame||win.mozRequestAnimationFrame||win.msRequestAnimationFrame||function(cb){return setTimeout(cb,16);};var win$1=window;var caf=win$1.cancelAnimationFrame||win$1.mozCancelAnimationFrame||function(id){clearTimeout(id);};function extend(){var obj,name,copy,target=arguments[0]||{},i=1,length=arguments.length;for(;i<length;i++){if((obj=arguments[i])!==null){for(name in obj){copy=obj[name];if(target===copy){continue;}else if(copy!==undefined){target[name]=copy;}}}}return target;}function checkStorageValue(value){return['true','false'].indexOf(value)>=0?JSON.parse(value):value;}function setLocalStorage(key,value,access){if(access){localStorage.setItem(key,value);}return value;}function getSlideId(){var id=window.tnsId;window.tnsId=!id?1:id+1;return'tns'+window.tnsId;}function getBody(){var doc=document,body=doc.body;if(!body){body=doc.createElement('body');body.fake=true;}return body;}var docElement=document.documentElement;function setFakeBody(body){var docOverflow='';if(body.fake){docOverflow=docElement.style.overflow;//avoid crashing IE8, if background image is used
body.style.background='';//Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible
body.style.overflow=docElement.style.overflow='hidden';docElement.appendChild(body);}return docOverflow;}function resetFakeBody(body,docOverflow){if(body.fake){body.remove();docElement.style.overflow=docOverflow;// Trigger layout so kinetic scrolling isn't disabled in iOS6+
// eslint-disable-next-line
docElement.offsetHeight;}}// get css-calc 
function calc(){var doc=document,body=getBody(),docOverflow=setFakeBody(body),div=doc.createElement('div'),result=false;body.appendChild(div);try{var str='(10px * 10)',vals=['calc'+str,'-moz-calc'+str,'-webkit-calc'+str],val;for(var i=0;i<3;i++){val=vals[i];div.style.width=val;if(div.offsetWidth===100){result=val.replace(str,'');break;}}}catch(e){}body.fake?resetFakeBody(body,docOverflow):div.remove();return result;}// get subpixel support value
function percentageLayout(){// check subpixel layout supporting
var doc=document,body=getBody(),docOverflow=setFakeBody(body),wrapper=doc.createElement('div'),outer=doc.createElement('div'),str='',count=70,perPage=3,supported=false;wrapper.className="tns-t-subp2";outer.className="tns-t-ct";for(var i=0;i<count;i++){str+='<div></div>';}outer.innerHTML=str;wrapper.appendChild(outer);body.appendChild(wrapper);supported=Math.abs(wrapper.getBoundingClientRect().left-outer.children[count-perPage].getBoundingClientRect().left)<2;body.fake?resetFakeBody(body,docOverflow):wrapper.remove();return supported;}function mediaquerySupport(){var doc=document,body=getBody(),docOverflow=setFakeBody(body),div=doc.createElement('div'),style=doc.createElement('style'),rule='@media all and (min-width:1px){.tns-mq-test{position:absolute}}',position;style.type='text/css';div.className='tns-mq-test';body.appendChild(style);body.appendChild(div);if(style.styleSheet){style.styleSheet.cssText=rule;}else{style.appendChild(doc.createTextNode(rule));}position=window.getComputedStyle?window.getComputedStyle(div).position:div.currentStyle['position'];body.fake?resetFakeBody(body,docOverflow):div.remove();return position==="absolute";}// create and append style sheet
function createStyleSheet(media){// Create the <style> tag
var style=document.createElement("style");// style.setAttribute("type", "text/css");
// Add a media (and/or media query) here if you'd like!
// style.setAttribute("media", "screen")
// style.setAttribute("media", "only screen and (max-width : 1024px)")
if(media){style.setAttribute("media",media);}// WebKit hack :(
// style.appendChild(document.createTextNode(""));
// Add the <style> element to the page
document.querySelector('head').appendChild(style);return style.sheet?style.sheet:style.styleSheet;}// cross browsers addRule method
function addCSSRule(sheet,selector,rules,index){// return raf(function() {
'insertRule'in sheet?sheet.insertRule(selector+'{'+rules+'}',index):sheet.addRule(selector,rules,index);// });
}// cross browsers addRule method
function removeCSSRule(sheet,index){// return raf(function() {
'deleteRule'in sheet?sheet.deleteRule(index):sheet.removeRule(index);// });
}function getCssRulesLength(sheet){var rule='insertRule'in sheet?sheet.cssRules:sheet.rules;return rule.length;}function toDegree(y,x){return Math.atan2(y,x)*(180/Math.PI);}function getTouchDirection(angle,range){var direction=false,gap=Math.abs(90-Math.abs(angle));if(gap>=90-range){direction='horizontal';}else if(gap<=range){direction='vertical';}return direction;}// https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/
function forEachNodeList(arr,callback,scope){for(var i=0,l=arr.length;i<l;i++){callback.call(scope,arr[i],i);}}var classListSupport='classList'in document.createElement('_');var hasClass=classListSupport?function(el,str){return el.classList.contains(str);}:function(el,str){return el.className.indexOf(str)>=0;};var addClass=classListSupport?function(el,str){if(!hasClass(el,str)){el.classList.add(str);}}:function(el,str){if(!hasClass(el,str)){el.className+=' '+str;}};var removeClass=classListSupport?function(el,str){if(hasClass(el,str)){el.classList.remove(str);}}:function(el,str){if(hasClass(el,str)){el.className=el.className.replace(str,'');}};function hasAttr(el,attr){return el.hasAttribute(attr);}function getAttr(el,attr){return el.getAttribute(attr);}function isNodeList(el){// Only NodeList has the "item()" function
return typeof el.item!=="undefined";}function setAttrs(els,attrs){els=isNodeList(els)||els instanceof Array?els:[els];if(Object.prototype.toString.call(attrs)!=='[object Object]'){return;}for(var i=els.length;i--;){for(var key in attrs){els[i].setAttribute(key,attrs[key]);}}}function removeAttrs(els,attrs){els=isNodeList(els)||els instanceof Array?els:[els];attrs=attrs instanceof Array?attrs:[attrs];var attrLength=attrs.length;for(var i=els.length;i--;){for(var j=attrLength;j--;){els[i].removeAttribute(attrs[j]);}}}function removeElementStyles(el){el.style.cssText='';}function arrayFromNodeList(nl){var arr=[];for(var i=0,l=nl.length;i<l;i++){arr.push(nl[i]);}return arr;}function hideElement(el){if(!hasAttr(el,'hidden')){setAttrs(el,{'hidden':''});}}function showElement(el){if(hasAttr(el,'hidden')){removeAttrs(el,'hidden');}}function isVisible(el){return el.offsetWidth>0&&el.offsetHeight>0;}function whichProperty(props){if(typeof props==='string'){var arr=[props],Props=props.charAt(0).toUpperCase()+props.substr(1),prefixes=['Webkit','Moz','ms','O'];prefixes.forEach(function(prefix){if(prefix!=='ms'||props==='transform'){arr.push(prefix+Props);}});props=arr;}var el=document.createElement('fakeelement'),len=props.length;for(var i=0;i<props.length;i++){var prop=props[i];if(el.style[prop]!==undefined){return prop;}}return false;// explicit for ie9-
}function has3D(tf){if(!tf){return false;}if(!window.getComputedStyle){return false;}var doc=document,body=getBody(),docOverflow=setFakeBody(body),el=doc.createElement('p'),has3d,cssTF=tf.length>9?'-'+tf.slice(0,-9).toLowerCase()+'-':'';cssTF+='transform';// Add it to the body to get the computed style
body.insertBefore(el,null);el.style[tf]='translate3d(1px,1px,1px)';has3d=window.getComputedStyle(el).getPropertyValue(cssTF);body.fake?resetFakeBody(body,docOverflow):el.remove();return has3d!==undefined&&has3d.length>0&&has3d!=="none";}// get transitionend, animationend based on transitionDuration
// @propin: string
// @propOut: string, first-letter uppercase
// Usage: getEndProperty('WebkitTransitionDuration', 'Transition') => webkitTransitionEnd
function getEndProperty(propIn,propOut){var endProp=false;if(/^Webkit/.test(propIn)){endProp='webkit'+propOut+'End';}else if(/^O/.test(propIn)){endProp='o'+propOut+'End';}else if(propIn){endProp=propOut.toLowerCase()+'end';}return endProp;}// Test via a getter in the options object to see if the passive property is accessed
var supportsPassive=false;try{var opts=Object.defineProperty({},'passive',{get:function get(){supportsPassive=true;}});window.addEventListener("test",null,opts);}catch(e){}var passiveOption=supportsPassive?{passive:true}:false;function addEvents(el,obj){for(var prop in obj){var option=prop==='touchstart'||prop==='touchmove'?passiveOption:false;el.addEventListener(prop,obj[prop],option);}}function removeEvents(el,obj){for(var prop in obj){var option=['touchstart','touchmove'].indexOf(prop)>=0?passiveOption:false;el.removeEventListener(prop,obj[prop],option);}}function Events(){return{topics:{},on:function on(eventName,fn){this.topics[eventName]=this.topics[eventName]||[];this.topics[eventName].push(fn);},off:function off(eventName,fn){if(this.topics[eventName]){for(var i=0;i<this.topics[eventName].length;i++){if(this.topics[eventName][i]===fn){this.topics[eventName].splice(i,1);break;}}}},emit:function emit(eventName,data){if(this.topics[eventName]){this.topics[eventName].forEach(function(fn){fn(data);});}}};}function jsTransform(element,attr,prefix,postfix,to,duration,callback){var tick=Math.min(duration,10),unit=to.indexOf('%')>=0?'%':'px',to=to.replace(unit,''),from=Number(element.style[attr].replace(prefix,'').replace(postfix,'').replace(unit,'')),positionTick=(to-from)/duration*tick,running;setTimeout(moveElement,tick);function moveElement(){duration-=tick;from+=positionTick;element.style[attr]=prefix+from+unit+postfix;if(duration>0){setTimeout(moveElement,tick);}else{callback();}}}// Format: IIFE
var tns=function tns(options){options=extend({container:'.slider',mode:'carousel',axis:'horizontal',items:1,gutter:0,edgePadding:0,fixedWidth:false,fixedWidthViewportWidth:false,slideBy:1,controls:true,controlsText:['prev','next'],controlsContainer:false,prevButton:false,nextButton:false,nav:true,navContainer:false,navAsThumbnails:false,arrowKeys:false,speed:300,autoplay:false,autoplayTimeout:5000,autoplayDirection:'forward',autoplayText:['start','stop'],autoplayHoverPause:false,autoplayButton:false,autoplayButtonOutput:true,autoplayResetOnVisibility:true,// animateIn: 'tns-fadeIn',
// animateOut: 'tns-fadeOut',
// animateNormal: 'tns-normal',
// animateDelay: false,
loop:true,rewind:false,autoHeight:false,responsive:false,lazyload:false,touch:true,mouseDrag:false,swipeAngle:15,nested:false,freezable:true,// startIndex: 0,
onInit:false,useLocalStorage:true},options||{});var doc=document,win=window,KEYS={ENTER:13,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},tnsStorage={},localStorageAccess=options.useLocalStorage;if(localStorageAccess){// check browser version and local storage
// if browser upgraded, 
// 1. delete browser ralated data from local storage and 
// 2. recheck these options and save them to local storage
var browserInfo=navigator.userAgent;try{tnsStorage=localStorage;// remove storage when browser version changes
if(tnsStorage['tnsApp']!==browserInfo){['tC','tPL','tMQ','tTf','t3D','tTDu','tTDe','tADu','tADe','tTE','tAE'].forEach(function(item){tnsStorage.removeItem(item);});}// update browserInfo
localStorage['tnsApp']=browserInfo;}catch(e){localStorageAccess=false;}// reset tnsStorage when localStorage is null (on some versions of Chrome Mobile #134)
// https://stackoverflow.com/questions/8701015/html-localstorage-is-null-on-android-when-using-webview
if(localStorageAccess&&!localStorage){tnsStorage={};localStorageAccess=false;}}var CALC=tnsStorage['tC']?checkStorageValue(tnsStorage['tC']):setLocalStorage('tC',calc(),localStorageAccess),PERCENTAGELAYOUT=tnsStorage['tPL']?checkStorageValue(tnsStorage['tPL']):setLocalStorage('tPL',percentageLayout(),localStorageAccess),CSSMQ=tnsStorage['tMQ']?checkStorageValue(tnsStorage['tMQ']):setLocalStorage('tMQ',mediaquerySupport(),localStorageAccess),TRANSFORM=tnsStorage['tTf']?checkStorageValue(tnsStorage['tTf']):setLocalStorage('tTf',whichProperty('transform'),localStorageAccess),HAS3D=tnsStorage['t3D']?checkStorageValue(tnsStorage['t3D']):setLocalStorage('t3D',has3D(TRANSFORM),localStorageAccess),TRANSITIONDURATION=tnsStorage['tTDu']?checkStorageValue(tnsStorage['tTDu']):setLocalStorage('tTDu',whichProperty('transitionDuration'),localStorageAccess),TRANSITIONDELAY=tnsStorage['tTDe']?checkStorageValue(tnsStorage['tTDe']):setLocalStorage('tTDe',whichProperty('transitionDelay'),localStorageAccess),ANIMATIONDURATION=tnsStorage['tADu']?checkStorageValue(tnsStorage['tADu']):setLocalStorage('tADu',whichProperty('animationDuration'),localStorageAccess),ANIMATIONDELAY=tnsStorage['tADe']?checkStorageValue(tnsStorage['tADe']):setLocalStorage('tADe',whichProperty('animationDelay'),localStorageAccess),TRANSITIONEND=tnsStorage['tTE']?checkStorageValue(tnsStorage['tTE']):setLocalStorage('tTE',getEndProperty(TRANSITIONDURATION,'Transition'),localStorageAccess),ANIMATIONEND=tnsStorage['tAE']?checkStorageValue(tnsStorage['tAE']):setLocalStorage('tAE',getEndProperty(ANIMATIONDURATION,'Animation'),localStorageAccess);// get element nodes from selectors
var supportConsoleWarn=win.console&&typeof win.console.warn==="function",list=['container','controlsContainer','prevButton','nextButton','navContainer','autoplayButton'];for(var i=list.length;i--;){var item=list[i];if(typeof options[item]==='string'){var el=doc.querySelector(options[item]);if(el&&el.nodeName){options[item]=el;}else{if(supportConsoleWarn){console.warn('Can\'t find',options[item]);}return;}}}// make sure at least 1 slide
if(options.container.children.length<1){if(supportConsoleWarn){console.warn('No slides found in',options.container);}return;}// update responsive
// from: { 
//    300: 2, 
//    800: {
//      loop: false
//    }
// }
// to: {
//    300: { 
//      items: 2 
//    }, 
//    800: {
//      loop: false
//    }
// }
if(options.responsive){var resTem={},res=options.responsive;for(var key in res){var val=res[key];resTem[key]=typeof val==='number'?{items:val}:val;}options.responsive=resTem;resTem=null;// apply responsive[0] to options and remove it
if(0 in options.responsive){options=extend(options,options.responsive[0]);delete options.responsive[0];}}// === define and set variables ===
var carousel=options.mode==='carousel'?true:false;if(!carousel){options.axis='horizontal';options.edgePadding=false;var animateIn='tns-fadeIn',animateOut='tns-fadeOut',animateDelay=false,animateNormal=options.animateNormal||'tns-normal';if(TRANSITIONEND&&ANIMATIONEND){animateIn=options.animateIn||animateIn;animateOut=options.animateOut||animateOut;animateDelay=options.animateDelay||animateDelay;}}var horizontal=options.axis==='horizontal'?true:false,outerWrapper=doc.createElement('div'),innerWrapper=doc.createElement('div'),container=options.container,containerParent=container.parentNode,slideItems=container.children,slideCount=slideItems.length,vpInner,responsive=options.responsive,responsiveItems=[],breakpoints=false,breakpointZone=0,windowWidth=getWindowWidth(),isOn;if(options.fixedWidth){var vpOuter=getViewportWidth(containerParent);}if(responsive){breakpoints=Object.keys(responsive).map(function(x){return parseInt(x);}).sort(function(a,b){return a-b;});// get all responsive items
breakpoints.forEach(function(bp){responsiveItems=responsiveItems.concat(Object.keys(responsive[bp]));});// remove duplicated items
var arr=[];responsiveItems.forEach(function(item){if(arr.indexOf(item)<0){arr.push(item);}});responsiveItems=arr;setBreakpointZone();}var items=getOption('items'),slideBy=getOption('slideBy')==='page'?items:getOption('slideBy'),nested=options.nested,gutter=getOption('gutter'),edgePadding=getOption('edgePadding'),fixedWidth=getOption('fixedWidth'),fixedWidthViewportWidth=options.fixedWidthViewportWidth,arrowKeys=getOption('arrowKeys'),speed=getOption('speed'),rewind=options.rewind,loop=rewind?false:options.loop,autoHeight=getOption('autoHeight'),sheet=createStyleSheet(),lazyload=options.lazyload,slideOffsetTops,// collection of slide offset tops
slideItemsOut=[],hasEdgePadding=checkOption('edgePadding'),cloneCount=loop?getCloneCountForLoop():0,slideCountNew=!carousel?slideCount+cloneCount:slideCount+cloneCount*2,hasRightDeadZone=fixedWidth&&!loop&&!edgePadding?true:false,updateIndexBeforeTransform=!carousel||!loop?true:false,// transform
transformAttr=horizontal?'left':'top',transformPrefix='',transformPostfix='',// index
startIndex=getOption('startIndex'),index=startIndex?updateStartIndex(startIndex):!carousel?0:cloneCount,indexCached=index,indexMin=0,indexMax=getIndexMax(),// resize
resizeTimer,swipeAngle=options.swipeAngle,moveDirectionExpected=swipeAngle?'?':true,running=false,onInit=options.onInit,events=new Events(),// id, class
containerIdCached=container.id,classContainer=' tns-slider tns-'+options.mode,slideId=container.id||getSlideId(),disable=getOption('disable'),freezable=options.freezable,freeze=disable?true:freezable?slideCount<=items:false,frozen,importantStr=nested==='inner'?' !important':'',controlsEvents={'click':onControlsClick,'keydown':onControlsKeydown},navEvents={'click':onNavClick,'keydown':onNavKeydown},hoverEvents={'mouseover':mouseoverPause,'mouseout':mouseoutRestart},visibilityEvent={'visibilitychange':onVisibilityChange},docmentKeydownEvent={'keydown':onDocumentKeydown},touchEvents={'touchstart':onPanStart,'touchmove':onPanMove,'touchend':onPanEnd,'touchcancel':onPanEnd},dragEvents={'mousedown':onPanStart,'mousemove':onPanMove,'mouseup':onPanEnd,'mouseleave':onPanEnd},hasControls=checkOption('controls'),hasNav=checkOption('nav'),navAsThumbnails=options.navAsThumbnails,hasAutoplay=checkOption('autoplay'),hasTouch=checkOption('touch'),hasMouseDrag=checkOption('mouseDrag'),slideActiveClass='tns-slide-active',imgCompleteClass='tns-complete',imgEvents={'load':imgLoadedOrError,'error':imgLoadedOrError},imgsComplete;// controls
if(hasControls){var controls=getOption('controls'),controlsText=getOption('controlsText'),controlsContainer=options.controlsContainer,prevButton=options.prevButton,nextButton=options.nextButton,prevIsButton,nextIsButton;}// nav
if(hasNav){var nav=getOption('nav'),navContainer=options.navContainer,navItems,visibleNavIndexes=[],visibleNavIndexesCached=visibleNavIndexes,navClicked=-1,navCurrentIndex=getAbsIndex(),navCurrentIndexCached=navCurrentIndex,navActiveClass='tns-nav-active';}// autoplay
if(hasAutoplay){var autoplay=getOption('autoplay'),autoplayTimeout=getOption('autoplayTimeout'),autoplayDirection=options.autoplayDirection==='forward'?1:-1,autoplayText=getOption('autoplayText'),autoplayHoverPause=getOption('autoplayHoverPause'),autoplayButton=options.autoplayButton,autoplayResetOnVisibility=getOption('autoplayResetOnVisibility'),autoplayHtmlStrings=['<span class=\'tns-visually-hidden\'>',' animation</span>'],autoplayTimer,animating,autoplayHoverPaused,autoplayUserPaused,autoplayVisibilityPaused;}if(hasTouch||hasMouseDrag){var initPosition={},lastPosition={},translateInit,disX,disY,panStart=false,rafIndex=0,getDist=horizontal?function(a,b){return a.x-b.x;}:function(a,b){return a.y-b.y;};}// touch
if(hasTouch){var touch=getOption('touch');}// mouse drag
if(hasMouseDrag){var mouseDrag=getOption('mouseDrag');}// disable slider when slidecount <= items
if(freeze){controls=nav=touch=mouseDrag=arrowKeys=autoplay=autoplayHoverPause=autoplayResetOnVisibility=false;}if(TRANSFORM){transformAttr=TRANSFORM;transformPrefix='translate';if(HAS3D){transformPrefix+=horizontal?'3d(':'3d(0px, ';transformPostfix=horizontal?', 0px, 0px)':', 0px)';}else{transformPrefix+=horizontal?'X(':'Y(';transformPostfix=')';}}// === COMMON FUNCTIONS === //
function getIndexMax(){return carousel||loop?Math.max(0,slideCountNew-items):slideCountNew-1;}function updateStartIndex(indexTem){indexTem=indexTem%slideCount;if(indexTem<0){indexTem+=slideCount;}indexTem=Math.min(indexTem,slideCountNew-items);return indexTem;}function getAbsIndex(i){if(i===undefined){i=index;}var min=carousel?cloneCount:0;while(i<min){i+=slideCount;}if(carousel){i-=cloneCount;}return i?i%slideCount:i;}function getItemsMax(){if(fixedWidth&&!fixedWidthViewportWidth){return slideCount-1;}else{var str=fixedWidth?'fixedWidth':'items',arr=[];if(fixedWidth||options[str]<slideCount){arr.push(options[str]);}if(breakpoints&&responsiveItems.indexOf(str)>=0){breakpoints.forEach(function(bp){var tem=responsive[bp][str];if(tem&&(fixedWidth||tem<slideCount)){arr.push(tem);}});}if(!arr.length){arr.push(0);}return fixedWidth?Math.ceil(fixedWidthViewportWidth/Math.min.apply(null,arr)):Math.max.apply(null,arr);}}function getCloneCountForLoop(){var itemsMax=getItemsMax(),result=carousel?Math.ceil((itemsMax*5-slideCount)/2):itemsMax*4-slideCount;result=Math.max(itemsMax,result);return hasEdgePadding?result+1:result;}function getWindowWidth(){return win.innerWidth||doc.documentElement.clientWidth||doc.body.clientWidth;}function getViewportWidth(el){return el.clientWidth||getViewportWidth(el.parentNode);}function checkOption(item){var result=options[item];if(!result&&breakpoints&&responsiveItems.indexOf(item)>=0){breakpoints.forEach(function(bp){if(responsive[bp][item]){result=true;}});}return result;}function getOption(item,viewport){viewport=viewport?viewport:windowWidth;var obj={slideBy:'page',edgePadding:false},result;if(!carousel&&item in obj){result=obj[item];}else{if(item==='items'&&getOption('fixedWidth')){result=Math.floor(vpOuter/(getOption('fixedWidth')+getOption('gutter')));}else if(item==='autoHeight'&&nested==='outer'){result=true;}else{result=options[item];if(breakpoints&&responsiveItems.indexOf(item)>=0){for(var i=0,len=breakpoints.length;i<len;i++){var bp=breakpoints[i];if(viewport>=bp){if(item in responsive[bp]){result=responsive[bp][item];}}else{break;}}}}}if(item==='slideBy'&&result==='page'){result=getOption('items');}return result;}function getSlideMarginLeft(i){return CALC?CALC+'('+i*100+'% / '+slideCountNew+')':i*100/slideCountNew+'%';}function getInnerWrapperStyles(edgePaddingTem,gutterTem,fixedWidthTem,speedTem){var str='';if(edgePaddingTem){var gap=edgePaddingTem;if(gutterTem){gap+=gutterTem;}if(fixedWidthTem){str='margin: 0px '+(vpOuter%(fixedWidthTem+gutterTem)+gutterTem)/2+'px;';}else{str=horizontal?'margin: 0 '+edgePaddingTem+'px 0 '+gap+'px;':'padding: '+gap+'px 0 '+edgePaddingTem+'px 0;';}}else if(gutterTem&&!fixedWidthTem){var gutterTemUnit='-'+gutterTem+'px',dir=horizontal?gutterTemUnit+' 0 0':'0 '+gutterTemUnit+' 0';str='margin: 0 '+dir+';';}if(TRANSITIONDURATION&&speedTem){str+=getTrsnsitionDurationStyle(speedTem);}return str;}function getContainerWidth(fixedWidthTem,gutterTem,itemsTem){if(fixedWidthTem){return(fixedWidthTem+gutterTem)*slideCountNew+'px';}else{return CALC?CALC+'('+slideCountNew*100+'% / '+itemsTem+')':slideCountNew*100/itemsTem+'%';}}function getSlideWidthStyle(fixedWidthTem,gutterTem,itemsTem){var width;if(fixedWidthTem){width=fixedWidthTem+gutterTem+'px';}else{var dividend=carousel?slideCountNew:itemsTem;width=CALC?CALC+'(100% / '+dividend+')':100/dividend+'%';}return'width:'+width+importantStr+';';}function getSlideWidthStylePX(itemsTem){return vpInner/itemsTem+'px';}function getSlideGutterStyle(gutterTem){var str='';// gutter maybe interger || 0
// so can't use 'if (gutter)'
if(gutterTem!==false){var prop=horizontal?'padding-':'margin-',dir=horizontal?'right':'bottom';str=prop+dir+': '+gutterTem+'px;';}return str;}function getCSSPrefix(name,num){var prefix=name.substring(0,name.length-num).toLowerCase();if(prefix){prefix='-'+prefix+'-';}return prefix;}function getTrsnsitionDurationStyle(speed){return getCSSPrefix(TRANSITIONDURATION,18)+'transition-duration:'+speed/1000+'s;';}function getAnimationDurationStyle(speed){return getCSSPrefix(ANIMATIONDURATION,17)+'animation-duration:'+speed/1000+'s;';}(function sliderInit(){// First thing first, wrap container with 'outerWrapper > innerWrapper',
// to get the correct view width
outerWrapper.appendChild(innerWrapper);containerParent.insertBefore(outerWrapper,container);innerWrapper.appendChild(container);var classOuter='tns-outer',classInner='tns-inner',hasGutter=checkOption('gutter');if(carousel){if(horizontal){if(checkOption('edgePadding')||hasGutter&&!options.fixedWidth){classOuter+=' tns-ovh';}else{classInner+=' tns-ovh';}}else{classInner+=' tns-ovh';}}else if(hasGutter){classOuter+=' tns-ovh';}outerWrapper.className=classOuter;innerWrapper.className=classInner;innerWrapper.id=slideId+'-iw';if(autoHeight){innerWrapper.className+=' tns-ah';}// set container properties
if(container.id===''){container.id=slideId;}classContainer+=PERCENTAGELAYOUT?' tns-subpixel':' tns-no-subpixel';classContainer+=CALC?' tns-calc':' tns-no-calc';if(carousel){classContainer+=' tns-'+options.axis;}container.className+=classContainer;// get inner viewport width after classes added
// to prevent scrollbar occupies part of viewport
vpInner=getViewportWidth(innerWrapper);var epT=getOption('edgePadding'),gT=getOption('gutter');vpInner+=epT?-(epT*2+gutter):gutter;// add events
if(carousel&&TRANSITIONEND){var eve={};eve[TRANSITIONEND]=onTransitionEnd;addEvents(container,eve);}// delete datas after init
classOuter=classInner=null;// add id, class, aria attributes 
// before clone slides
for(var x=0;x<slideCount;x++){var item=slideItems[x];if(!item.id){item.id=slideId+'-item'+x;}addClass(item,'tns-item');if(!carousel&&animateNormal){addClass(item,animateNormal);}setAttrs(item,{'aria-hidden':'true','tabindex':'-1'});}// clone slides
if(loop||edgePadding){var fragmentBefore=doc.createDocumentFragment(),fragmentAfter=doc.createDocumentFragment();for(var j=cloneCount;j--;){var num=j%slideCount,cloneFirst=slideItems[num].cloneNode(true);removeAttrs(cloneFirst,'id');fragmentAfter.insertBefore(cloneFirst,fragmentAfter.firstChild);if(carousel){var cloneLast=slideItems[slideCount-1-num].cloneNode(true);removeAttrs(cloneLast,'id');fragmentBefore.appendChild(cloneLast);}}container.insertBefore(fragmentBefore,container.firstChild);container.appendChild(fragmentAfter);slideItems=container.children;}// check images loading
if(checkOption('autoHeight')||!carousel||!horizontal){var imgs=container.querySelectorAll('img');// check all image complete status
// add complete class if true
forEachNodeList(imgs,function(img){addEvents(img,imgEvents);var src=img.src;img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";img.src=src;});// set imgsComplete to true 
// when all images are compulete (loaded or error)
raf(function(){imageLoaded(arrayFromNodeList(imgs),function(){imgsComplete=true;if(!disable){if(!horizontal){getSlideOffsetTops();updateContentWrapperHeight();}// set container transform property
if(carousel){doContainerTransformSilent();}}});});}if(carousel&&horizontal){doContainerTransformSilent();}// activate visible slides
// add aria attrs
// set animation classes and left value for gallery slider
// use slide count when slides are fewer than items
for(var i=index,l=index+Math.min(slideCount,items);i<l;i++){var item=slideItems[i];setAttrs(item,{'aria-hidden':'false'});removeAttrs(item,['tabindex']);addClass(item,slideActiveClass);if(!carousel){item.style.left=(i-index)*100/items+'%';addClass(item,animateIn);removeClass(item,animateNormal);}}if(carousel&&horizontal){// set font-size rules
// for modern browsers
if(PERCENTAGELAYOUT){// set slides font-size first
addCSSRule(sheet,'#'+slideId+' > .tns-item','font-size:'+win.getComputedStyle(slideItems[0]).fontSize+';',getCssRulesLength(sheet));addCSSRule(sheet,'#'+slideId,'font-size:0;',getCssRulesLength(sheet));// slide left margin
// for IE8, MS Edge & webkit browsers (no subpixel)
}else{forEachNodeList(slideItems,function(slide,i){slide.style.marginLeft=getSlideMarginLeft(i);});}}// all browsers which support CSS transitions support CSS media queries
if(CSSMQ){// inner wrapper styles
var str=getInnerWrapperStyles(options.edgePadding,options.gutter,options.fixedWidth,options.speed);addCSSRule(sheet,'#'+slideId+'-iw',str,getCssRulesLength(sheet));// container styles
if(carousel){str=horizontal?'width:'+getContainerWidth(options.fixedWidth,options.gutter,options.items)+';':'';if(TRANSITIONDURATION){str+=getTrsnsitionDurationStyle(speed);}addCSSRule(sheet,'#'+slideId,str,getCssRulesLength(sheet));}// slide styles
str=horizontal?getSlideWidthStyle(options.fixedWidth,options.gutter,options.items):'';if(options.gutter){str+=getSlideGutterStyle(options.gutter);}// set gallery items transition-duration
if(!carousel){if(TRANSITIONDURATION){str+=getTrsnsitionDurationStyle(speed);}if(ANIMATIONDURATION){str+=getAnimationDurationStyle(speed);}}if(str){addCSSRule(sheet,'#'+slideId+' > .tns-item',str,getCssRulesLength(sheet));}// non CSS mediaqueries: IE8
// ## update inner wrapper, container, slides if needed
// set inline styles for inner wrapper & container
// insert stylesheet (one line) for slides only (since slides are many)
}else{// inner wrapper styles
innerWrapper.style.cssText=getInnerWrapperStyles(edgePadding,gutter,fixedWidth);// container styles
if(carousel&&horizontal){container.style.width=getContainerWidth(fixedWidth,gutter,items);}// slide styles
var str=horizontal?getSlideWidthStyle(fixedWidth,gutter,items):'';if(gutter){str+=getSlideGutterStyle(gutter);}// append to the last line
if(str){addCSSRule(sheet,'#'+slideId+' > .tns-item',str,getCssRulesLength(sheet));}}// media queries
if(responsive&&CSSMQ){breakpoints.forEach(function(bp){var opts=responsive[bp],str='',innerWrapperStr='',containerStr='',slideStr='',itemsBP=getOption('items',bp),fixedWidthBP=getOption('fixedWidth',bp),speedBP=getOption('speed',bp),edgePaddingBP=getOption('edgePadding',bp),gutterBP=getOption('gutter',bp);// inner wrapper string
if('edgePadding'in opts||'gutter'in opts){innerWrapperStr='#'+slideId+'-iw{'+getInnerWrapperStyles(edgePaddingBP,gutterBP,fixedWidthBP,speedBP)+'}';}// container string
if(carousel&&horizontal&&('fixedWidth'in opts||'items'in opts||fixedWidth&&'gutter'in opts)){containerStr='width:'+getContainerWidth(fixedWidthBP,gutterBP,itemsBP)+';';}if(TRANSITIONDURATION&&'speed'in opts){containerStr+=getTrsnsitionDurationStyle(speedBP);}if(containerStr){containerStr='#'+slideId+'{'+containerStr+'}';}// slide string
if('fixedWidth'in opts||fixedWidth&&'gutter'in opts||!carousel&&'items'in opts){slideStr+=getSlideWidthStyle(fixedWidthBP,gutterBP,itemsBP);}if('gutter'in opts){slideStr+=getSlideGutterStyle(gutterBP);}// set gallery items transition-duration
if(!carousel&&'speed'in opts){if(TRANSITIONDURATION){slideStr+=getTrsnsitionDurationStyle(speedBP);}if(ANIMATIONDURATION){slideStr+=getAnimationDurationStyle(speedBP);}}if(slideStr){slideStr='#'+slideId+' > .tns-item{'+slideStr+'}';}// add up
str=innerWrapperStr+containerStr+slideStr;if(str){sheet.insertRule('@media (min-width: '+bp/16+'em) {'+str+'}',sheet.cssRules.length);}});}// == msInit ==
// for IE10
if(navigator.msMaxTouchPoints){addClass(container,'ms-touch');addEvents(container,{'scroll':ie10Scroll});setSnapInterval();}// == navInit ==
if(hasNav){var initIndex=!carousel?0:cloneCount;// customized nav
// will not hide the navs in case they're thumbnails
if(navContainer){setAttrs(navContainer,{'aria-label':'Carousel Pagination'});navItems=navContainer.children;for(var i=0;i<slideCount;i++){var item=navItems[i];if(item){setAttrs(item,{'data-nav':i,'tabindex':'-1','aria-selected':'false','aria-controls':slideItems[initIndex+i].id});}}// generated nav 
}else{var navHtml='',hiddenStr=navAsThumbnails?'':'hidden';for(var i=0;i<slideCount;i++){// hide nav items by default
navHtml+='<button data-nav="'+i+'" tabindex="-1" aria-selected="false" aria-controls="'+slideItems[initIndex+i].id+'" '+hiddenStr+' type="button"></button>';}navHtml='<div class="tns-nav" aria-label="Carousel Pagination">'+navHtml+'</div>';outerWrapper.insertAdjacentHTML('afterbegin',navHtml);navContainer=outerWrapper.querySelector('.tns-nav');navItems=navContainer.children;}updateNavVisibility();// add transition
if(TRANSITIONDURATION){var prefix=TRANSITIONDURATION.substring(0,TRANSITIONDURATION.length-18).toLowerCase(),str='transition: all '+speed/1000+'s';if(prefix){str='-'+prefix+'-'+str;}addCSSRule(sheet,'[aria-controls^='+slideId+'-item]',str,getCssRulesLength(sheet));}setAttrs(navItems[navCurrentIndex],{'tabindex':'0','aria-selected':'true'});addClass(navItems[navCurrentIndex],navActiveClass);// add events
addEvents(navContainer,navEvents);if(!nav){hideElement(navContainer);}}// == autoplayInit ==
if(hasAutoplay){var txt=autoplay?'stop':'start';if(autoplayButton){setAttrs(autoplayButton,{'data-action':txt});}else if(options.autoplayButtonOutput){innerWrapper.insertAdjacentHTML('beforebegin','<button data-action="'+txt+'" type="button">'+autoplayHtmlStrings[0]+txt+autoplayHtmlStrings[1]+autoplayText[0]+'</button>');autoplayButton=outerWrapper.querySelector('[data-action]');}// add event
if(autoplayButton){addEvents(autoplayButton,{'click':toggleAutoplay});}if(!autoplay){if(autoplayButton){hideElement(autoplayButton);}}else{startAutoplay();if(autoplayHoverPause){addEvents(container,hoverEvents);}if(autoplayResetOnVisibility){addEvents(container,visibilityEvent);}}}// == controlsInit ==
if(hasControls){if(controlsContainer||prevButton&&nextButton){if(controlsContainer){prevButton=controlsContainer.children[0];nextButton=controlsContainer.children[1];setAttrs(controlsContainer,{'aria-label':'Carousel Navigation','tabindex':'0'});setAttrs(controlsContainer.children,{'aria-controls':slideId,'tabindex':'-1'});}setAttrs(prevButton,{'data-controls':'prev'});setAttrs(nextButton,{'data-controls':'next'});}else{outerWrapper.insertAdjacentHTML('afterbegin','<div class="tns-controls" aria-label="Carousel Navigation" tabindex="0"><button data-controls="prev" tabindex="-1" aria-controls="'+slideId+'" type="button">'+controlsText[0]+'</button><button data-controls="next" tabindex="-1" aria-controls="'+slideId+'" type="button">'+controlsText[1]+'</button></div>');controlsContainer=outerWrapper.querySelector('.tns-controls');prevButton=controlsContainer.children[0];nextButton=controlsContainer.children[1];}prevIsButton=isButton(prevButton);nextIsButton=isButton(nextButton);updateControlsStatus();// add events
if(controlsContainer){addEvents(controlsContainer,controlsEvents);}else{addEvents(prevButton,controlsEvents);addEvents(nextButton,controlsEvents);}if(!controls){hideElement(controlsContainer);}}// if (!navigator.msMaxTouchPoints) {
if(carousel){if(touch){addEvents(container,touchEvents);}if(mouseDrag){addEvents(container,dragEvents);}}// }
if(arrowKeys){addEvents(doc,docmentKeydownEvent);}if(nested==='inner'){events.on('outerResized',function(){resizeTasks();events.emit('innerLoaded',info());});}else{addEvents(win,{'resize':onResize});}if(nested==='outer'){events.on('innerLoaded',runAutoHeight);}else if((autoHeight||!carousel)&&!disable){runAutoHeight();}lazyLoad();toggleSlideDisplayAndEdgePadding();updateFixedWidthInnerWrapperStyle();events.on('indexChanged',additionalUpdates);if(typeof onInit==='function'){onInit(info());}if(nested==='inner'){events.emit('innerLoaded',info());}if(disable){disableSlider(true);}isOn=true;})();// === ON RESIZE ===
function onResize(e){raf(function(){resizeTasks(getEvent(e));});}function resizeTasks(e){if(!isOn){return;}windowWidth=getWindowWidth();if(nested==='outer'){events.emit('outerResized',info(e));}var breakpointZoneTem=breakpointZone,indexTem=index,itemsTem=items,freezeTem=freeze,needContainerTransform=false;if(fixedWidth){vpOuter=getViewportWidth(outerWrapper);}vpInner=getViewportWidth(innerWrapper);if(breakpoints){setBreakpointZone();}if(breakpointZoneTem!==breakpointZone){events.emit('newBreakpointStart',info(e));}// things do when breakpoint zone change
if(breakpointZoneTem!==breakpointZone||fixedWidth){var slideByTem=slideBy,arrowKeysTem=arrowKeys,autoHeightTem=autoHeight,fixedWidthTem=fixedWidth,edgePaddingTem=edgePadding,gutterTem=gutter,disableTem=disable;// update variables
items=getOption('items');slideBy=getOption('slideBy');disable=getOption('disable');freeze=disable?true:freezable?slideCount<=items:false;if(items!==itemsTem){indexMax=getIndexMax();// check index before transform in case
// slider reach the right edge then items become bigger
updateIndex();}if(disable!==disableTem){disableSlider(disable);}if(freeze!==freezeTem){// reset index to initial status
if(freeze){index=!carousel?0:cloneCount;}toggleSlideDisplayAndEdgePadding();}if(breakpointZoneTem!==breakpointZone){speed=getOption('speed');edgePadding=getOption('edgePadding');gutter=getOption('gutter');fixedWidth=getOption('fixedWidth');if(!disable&&fixedWidth!==fixedWidthTem){needContainerTransform=true;}autoHeight=getOption('autoHeight');if(autoHeight!==autoHeightTem){if(!autoHeight){innerWrapper.style.height='';}}}arrowKeys=freeze?false:getOption('arrowKeys');if(arrowKeys!==arrowKeysTem){arrowKeys?addEvents(doc,docmentKeydownEvent):removeEvents(doc,docmentKeydownEvent);}if(hasControls){var controlsTem=controls,controlsTextTem=controlsText;controls=freeze?false:getOption('controls');controlsText=getOption('controlsText');if(controls!==controlsTem){controls?showElement(controlsContainer):hideElement(controlsContainer);}if(controlsText!==controlsTextTem){prevButton.innerHTML=controlsText[0];nextButton.innerHTML=controlsText[1];}}if(hasNav){var navTem=nav;nav=freeze?false:getOption('nav');if(nav!==navTem){if(nav){showElement(navContainer);updateNavVisibility();}else{hideElement(navContainer);}}}if(hasTouch){var touchTem=touch;touch=freeze?false:getOption('touch');if(touch!==touchTem&&carousel){touch?addEvents(container,touchEvents):removeEvents(container,touchEvents);}}if(hasMouseDrag){var mouseDragTem=mouseDrag;mouseDrag=freeze?false:getOption('mouseDrag');if(mouseDrag!==mouseDragTem&&carousel){mouseDrag?addEvents(container,dragEvents):removeEvents(container,dragEvents);}}if(hasAutoplay){var autoplayTem=autoplay,autoplayHoverPauseTem=autoplayHoverPause,autoplayResetOnVisibilityTem=autoplayResetOnVisibility,autoplayTextTem=autoplayText;if(freeze){autoplay=autoplayHoverPause=autoplayResetOnVisibility=false;}else{autoplay=getOption('autoplay');if(autoplay){autoplayHoverPause=getOption('autoplayHoverPause');autoplayResetOnVisibility=getOption('autoplayResetOnVisibility');}else{autoplayHoverPause=autoplayResetOnVisibility=false;}}autoplayText=getOption('autoplayText');autoplayTimeout=getOption('autoplayTimeout');if(autoplay!==autoplayTem){if(autoplay){if(autoplayButton){showElement(autoplayButton);}if(!animating&&!autoplayUserPaused){startAutoplay();}}else{if(autoplayButton){hideElement(autoplayButton);}if(animating){stopAutoplay();}}}if(autoplayHoverPause!==autoplayHoverPauseTem){autoplayHoverPause?addEvents(container,hoverEvents):removeEvents(container,hoverEvents);}if(autoplayResetOnVisibility!==autoplayResetOnVisibilityTem){autoplayResetOnVisibility?addEvents(doc,visibilityEvent):removeEvents(doc,visibilityEvent);}if(autoplayButton&&autoplayText!==autoplayTextTem){var i=autoplay?1:0,html=autoplayButton.innerHTML,len=html.length-autoplayTextTem[i].length;if(html.substring(len)===autoplayTextTem[i]){autoplayButton.innerHTML=html.substring(0,len)+autoplayText[i];}}}// non-meduaqueries: IE8
// ## update inner wrapper, container, slides if needed
// set inline styles for inner wrapper & container
// insert stylesheet (one line) for slides only (since slides are many)
if(!CSSMQ){// inner wrapper styles
if(!freeze&&(edgePadding!==edgePaddingTem||gutter!==gutterTem)){innerWrapper.style.cssText=getInnerWrapperStyles(edgePadding,gutter,fixedWidth);}if(horizontal&&!fixedWidth){// container styles
if(carousel){container.style.width=getContainerWidth(false,null,items);}// slide styles
var str=getSlideWidthStyle(fixedWidth,gutter,items)+getSlideGutterStyle(gutter);// remove the last line and
// add new styles
removeCSSRule(sheet,getCssRulesLength(sheet)-1);addCSSRule(sheet,'#'+slideId+' > .tns-item',str,getCssRulesLength(sheet));}if(!fixedWidth){needContainerTransform=true;}}if(index!==indexTem){events.emit('indexChanged',info());needContainerTransform=true;}if(items!==itemsTem){additionalUpdates();updateSlidePosition();if(navigator.msMaxTouchPoints){setSnapInterval();}}}// ** things always do regardless of breakpoint zone changing **
if(!horizontal&&!disable){getSlideOffsetTops();updateContentWrapperHeight();needContainerTransform=true;}if(needContainerTransform){doContainerTransformSilent();indexCached=index;}updateFixedWidthInnerWrapperStyle(true);// auto height
if((autoHeight||!carousel)&&!disable){runAutoHeight();}if(breakpointZoneTem!==breakpointZone){events.emit('newBreakpointEnd',info(e));}}// === INITIALIZATION FUNCTIONS === //
function setBreakpointZone(){breakpointZone=0;breakpoints.forEach(function(bp,i){if(windowWidth>=bp){breakpointZone=i+1;}});}function loopNumber(num,min,max){return index>=indexMin&&index<=indexMax?index:index>indexMax?index-slideCount:index+slideCount;}function cutindexber(index,min,indexMax){return index>=indexMin&&index<=indexMax?index:index>indexMax?indexMax:indexMin;}// (slideBy, indexMin, indexMax) => index
var updateIndex=function(){return loop?carousel?// loop + carousel
function(){var leftEdge=indexMin,rightEdge=indexMax;leftEdge+=slideBy;rightEdge-=slideBy;// adjust edges when edge padding is true
// or fixed-width slider with extra space on the right side
if(edgePadding){leftEdge+=1;rightEdge-=1;}else if(fixedWidth){var gt=gutter?gutter:0;if(vpOuter%(fixedWidth+gt)>gt){rightEdge-=1;}}if(cloneCount){if(index>rightEdge){index-=slideCount;}else if(index<leftEdge){index+=slideCount;}}}:// loop + gallery
function(){if(index>indexMax){while(index>=indexMin+slideCount){index-=slideCount;}}else if(index<indexMin){while(index<=indexMax-slideCount){index+=slideCount;}}}:// non-loop
function(){index=Math.max(indexMin,Math.min(indexMax,index));};}();function toggleSlideDisplayAndEdgePadding(){// if (cloneCount) {
// if (fixedWidth && cloneCount) {
var str='tns-transparent';if(freeze){if(!frozen){// remove edge padding from inner wrapper
if(edgePadding){innerWrapper.style.margin='0px';}// add class tns-transparent to cloned slides
if(cloneCount){for(var i=cloneCount;i--;){if(carousel){addClass(slideItems[i],str);}addClass(slideItems[slideCountNew-i-1],str);}}frozen=true;}}else if(frozen){// restore edge padding for inner wrapper
// for mordern browsers
if(edgePadding&&!fixedWidth&&CSSMQ){innerWrapper.style.margin='';}// remove class tns-transparent to cloned slides
if(cloneCount){for(var i=cloneCount;i--;){if(carousel){removeClass(slideItems[i],str);}removeClass(slideItems[slideCountNew-i-1],str);}}frozen=false;}// }
}function updateFixedWidthInnerWrapperStyle(resize){if(fixedWidth&&edgePadding){// remove edge padding when freeze or viewport narrower than one slide
if(freeze||vpOuter<=fixedWidth+gutter){if(innerWrapper.style.margin!=='0px'){innerWrapper.style.margin='0px';}// update edge padding on resize
}else if(resize){innerWrapper.style.cssText=getInnerWrapperStyles(edgePadding,gutter,fixedWidth);}}}function disableSlider(disable){var len=slideItems.length;if(disable){sheet.disabled=true;container.className=container.className.replace(classContainer.substring(1),'');removeElementStyles(container);if(loop){for(var j=cloneCount;j--;){if(carousel){hideElement(slideItems[j]);}hideElement(slideItems[len-j-1]);}}// vertical slider
if(!horizontal||!carousel){removeElementStyles(innerWrapper);}// gallery
if(!carousel){for(var i=index,l=index+slideCount;i<l;i++){var item=slideItems[i];removeElementStyles(item);removeClass(item,animateIn);removeClass(item,animateNormal);}}}else{sheet.disabled=false;container.className+=classContainer;// vertical slider: get offsetTops before container transform
if(!horizontal){getSlideOffsetTops();}doContainerTransformSilent();if(loop){for(var j=cloneCount;j--;){if(carousel){showElement(slideItems[j]);}showElement(slideItems[len-j-1]);}}// gallery
if(!carousel){for(var i=index,l=index+slideCount;i<l;i++){var item=slideItems[i],classN=i<index+items?animateIn:animateNormal;item.style.left=(i-index)*100/items+'%';addClass(item,classN);}}}}// lazyload
function lazyLoad(){if(lazyload&&!disable){var i=index,len=index+items;if(edgePadding){i-=1;len+=1;}i=Math.max(i,0);len=Math.min(len,slideCountNew);for(;i<len;i++){forEachNodeList(slideItems[i].querySelectorAll('.tns-lazy-img'),function(img){// stop propagationl transitionend event to container
var eve={};eve[TRANSITIONEND]=function(e){e.stopPropagation();};addEvents(img,eve);if(!hasClass(img,'loaded')){img.src=getAttr(img,'data-src');addClass(img,'loaded');}});}}}function imgLoadedOrError(e){var img=getTarget(e);addClass(img,imgCompleteClass);removeEvents(img,imgEvents);}function getImageArray(slideStart,slideRange){var imgs=[];for(var i=slideStart,l=Math.min(slideStart+slideRange,slideCountNew);i<l;i++){forEachNodeList(slideItems[i].querySelectorAll('img'),function(img){imgs.push(img);});}return imgs;}// check if all visible images are loaded
// and update container height if it's done
function runAutoHeight(){var imgs=autoHeight?getImageArray(index,items):getImageArray(cloneCount,slideCount);raf(function(){imageLoaded(imgs,updateInnerWrapperHeight);});}function imageLoaded(imgs,cb){// directly execute callback function if all images are complete
if(imgsComplete){return cb();}// check selected image classes otherwise
imgs.forEach(function(img,index){if(hasClass(img,imgCompleteClass)){imgs.splice(index,1);}});// execute callback function if selected images are all complete
if(!imgs.length){return cb();}// otherwise execute this functiona again
raf(function(){imageLoaded(imgs,cb);});}function additionalUpdates(){lazyLoad();updateSlideStatus();updateControlsStatus();updateNavVisibility();updateNavStatus();}function getMaxSlideHeight(slideStart,slideRange){var heights=[];for(var i=slideStart,l=Math.min(slideStart+slideRange,slideCountNew);i<l;i++){heights.push(slideItems[i].offsetHeight);}return Math.max.apply(null,heights);}// update inner wrapper height
// 1. get the max-height of the visible slides
// 2. set transitionDuration to speed
// 3. update inner wrapper height to max-height
// 4. set transitionDuration to 0s after transition done
function updateInnerWrapperHeight(){var maxHeight=autoHeight?getMaxSlideHeight(index,items):getMaxSlideHeight(cloneCount,slideCount);if(innerWrapper.style.height!==maxHeight){innerWrapper.style.height=maxHeight+'px';}}// get the distance from the top edge of the first slide to each slide
// (init) => slideOffsetTops
function getSlideOffsetTops(){slideOffsetTops=[0];var topFirst=slideItems[0].getBoundingClientRect().top,attr;for(var i=1;i<slideCountNew;i++){attr=slideItems[i].getBoundingClientRect().top;slideOffsetTops.push(attr-topFirst);}}// set snapInterval (for IE10)
function setSnapInterval(){outerWrapper.style.msScrollSnapPointsX='snapInterval(0%, '+100/items+'%)';}// update slide
function updateSlideStatus(){var l=index+Math.min(slideCount,items);for(var i=slideCountNew;i--;){var item=slideItems[i];// visible slides
if(i>=index&&i<l){if(hasAttr(item,'tabindex')){setAttrs(item,{'aria-hidden':'false'});removeAttrs(item,['tabindex']);addClass(item,slideActiveClass);}// hidden slides
}else{if(!hasAttr(item,'tabindex')){setAttrs(item,{'aria-hidden':'true','tabindex':'-1'});}if(hasClass(item,slideActiveClass)){removeClass(item,slideActiveClass);}}}}// gallery: update slide position
function updateSlidePosition(){if(!carousel){var l=index+Math.min(slideCount,items);for(var i=slideCountNew;i--;){var item=slideItems[i];if(i>=index&&i<l){// add transitions to visible slides when adjusting their positions
addClass(item,'tns-moving');item.style.left=(i-index)*100/items+'%';addClass(item,animateIn);removeClass(item,animateNormal);}else if(item.style.left){item.style.left='';addClass(item,animateNormal);removeClass(item,animateIn);}// remove outlet animation
removeClass(item,animateOut);}// removing '.tns-moving'
setTimeout(function(){forEachNodeList(slideItems,function(el){removeClass(el,'tns-moving');});},300);}}// set tabindex & aria-selected on Nav
function updateNavStatus(){// get current nav
if(nav){navCurrentIndex=navClicked!==-1?navClicked:getAbsIndex();navClicked=-1;if(navCurrentIndex!==navCurrentIndexCached){var navPrev=navItems[navCurrentIndexCached],navCurrent=navItems[navCurrentIndex];setAttrs(navPrev,{'tabindex':'-1','aria-selected':'false'});setAttrs(navCurrent,{'tabindex':'0','aria-selected':'true'});removeClass(navPrev,navActiveClass);addClass(navCurrent,navActiveClass);}}}function getLowerCaseNodeName(el){return el.nodeName.toLowerCase();}function isButton(el){return getLowerCaseNodeName(el)==='button';}function isAriaDisabled(el){return el.getAttribute('aria-disabled')==='true';}function disEnableElement(isButton,el,val){if(isButton){el.disabled=val;}else{el.setAttribute('aria-disabled',val.toString());}}// set 'disabled' to true on controls when reach the edges
function updateControlsStatus(){if(!controls||rewind||loop){return;}var prevDisabled=prevIsButton?prevButton.disabled:isAriaDisabled(prevButton),nextDisabled=nextIsButton?nextButton.disabled:isAriaDisabled(nextButton),disablePrev=index===indexMin?true:false,disableNext=!rewind&&index===indexMax?true:false;if(disablePrev&&!prevDisabled){disEnableElement(prevIsButton,prevButton,true);}if(!disablePrev&&prevDisabled){disEnableElement(prevIsButton,prevButton,false);}if(disableNext&&!nextDisabled){disEnableElement(nextIsButton,nextButton,true);}if(!disableNext&&nextDisabled){disEnableElement(nextIsButton,nextButton,false);}}// set duration
function resetDuration(el,str){if(TRANSITIONDURATION){el.style[TRANSITIONDURATION]=str;}}function getContainerTransformValue(){var val;if(horizontal){if(fixedWidth){val=-(fixedWidth+gutter)*index+'px';}else{var denominator=TRANSFORM?slideCountNew:items;val=-index*100/denominator+'%';}}else{val=-slideOffsetTops[index]+'px';}return val;}function doContainerTransformSilent(val){resetDuration(container,'0s');doContainerTransform(val);setTimeout(function(){resetDuration(container,'');},10);}function doContainerTransform(val,test){if(!val){val=getContainerTransformValue();}container.style[transformAttr]=transformPrefix+val+transformPostfix;}function animateSlide(number,classOut,classIn,isOut){var l=number+items;if(!loop){l=Math.min(l,slideCountNew);}for(var i=number;i<l;i++){var item=slideItems[i];// set item positions
if(!isOut){item.style.left=(i-index)*100/items+'%';}if(animateDelay&&TRANSITIONDELAY){item.style[TRANSITIONDELAY]=item.style[ANIMATIONDELAY]=animateDelay*(i-number)/1000+'s';}removeClass(item,classOut);addClass(item,classIn);if(isOut){slideItemsOut.push(item);}}}// make transfer after click/drag:
// 1. change 'transform' property for mordern browsers
// 2. change 'left' property for legacy browsers
var transformCore=function(){return carousel?function(duration,distance){if(!distance){distance=getContainerTransformValue();}// constrain the distance when non-loop no-edgePadding fixedWidth reaches the right edge
if(hasRightDeadZone&&index===indexMax){distance=-((fixedWidth+gutter)*slideCountNew-vpInner)+'px';}if(TRANSITIONDURATION||!duration){// for morden browsers with non-zero duration or 
// zero duration for all browsers
doContainerTransform(distance);// run fallback function manually 
// when duration is 0 / container is hidden
if(!duration||!isVisible(container)){onTransitionEnd();}}else{// for old browser with non-zero duration
jsTransform(container,transformAttr,transformPrefix,transformPostfix,distance,speed,onTransitionEnd);}if(!horizontal){updateContentWrapperHeight();}}:function(duration){slideItemsOut=[];var eve={};eve[TRANSITIONEND]=eve[ANIMATIONEND]=onTransitionEnd;removeEvents(slideItems[indexCached],eve);addEvents(slideItems[index],eve);animateSlide(indexCached,animateIn,animateOut,true);animateSlide(index,animateNormal,animateIn);// run fallback function manually 
// when transition or animation not supported / duration is 0
if(!TRANSITIONEND||!ANIMATIONEND||!duration){onTransitionEnd();}};}();function doTransform(duration,distance){// check duration is defined and is a number
if(isNaN(duration)){duration=speed;}// if container is hidden, set duration to 0
// to fix an issue where browser doesn't fire ontransitionend on hidden element
if(animating&&!isVisible(container)){duration=0;}transformCore(duration,distance);}function render(e,sliderMoved){if(updateIndexBeforeTransform){updateIndex();}// render when slider was moved (touch or drag) even though index may not change
if(index!==indexCached||sliderMoved){// events
events.emit('indexChanged',info());events.emit('transitionStart',info());// pause autoplay when click or keydown from user
if(animating&&e&&['click','keydown'].indexOf(e.type)>=0){stopAutoplay();}running=true;doTransform();}}/*
   * Transfer prefixed properties to the same format
   * CSS: -Webkit-Transform => webkittransform
   * JS: WebkitTransform => webkittransform
   * @param {string} str - property
   *
   */function strTrans(str){return str.toLowerCase().replace(/-/g,'');}// AFTER TRANSFORM
// Things need to be done after a transfer:
// 1. check index
// 2. add classes to visible slide
// 3. disable controls buttons when reach the first/last slide in non-loop slider
// 4. update nav status
// 5. lazyload images
// 6. update container height
function onTransitionEnd(event){// check running on gallery mode
// make sure trantionend/animationend events run only once
if(carousel||running){events.emit('transitionEnd',info(event));if(!carousel&&slideItemsOut.length>0){for(var i=0;i<slideItemsOut.length;i++){var item=slideItemsOut[i];// set item positions
item.style.left='';if(ANIMATIONDELAY&&TRANSITIONDELAY){item.style[ANIMATIONDELAY]='';item.style[TRANSITIONDELAY]='';}removeClass(item,animateOut);addClass(item,animateNormal);}}/* update slides, nav, controls after checking ...
       * => legacy browsers who don't support 'event' 
       *    have to check event first, otherwise event.target will cause an error 
       * => or 'gallery' mode: 
       *   + event target is slide item
       * => or 'carousel' mode: 
       *   + event target is container, 
       *   + event.property is the same with transform attribute
       */if(!event||!carousel&&event.target.parentNode===container||event.target===container&&strTrans(event.propertyName)===strTrans(transformAttr)){if(!updateIndexBeforeTransform){var indexTem=index;updateIndex();if(index!==indexTem){events.emit('indexChanged',info());doContainerTransformSilent();}}if(autoHeight){runAutoHeight();}if(nested==='inner'){events.emit('innerLoaded',info());}running=false;navCurrentIndexCached=navCurrentIndex;indexCached=index;}}}// # ACTIONS
function goTo(targetIndex,e){if(freeze){return;}// prev slideBy
if(targetIndex==='prev'){onControlsClick(e,-1);// next slideBy
}else if(targetIndex==='next'){onControlsClick(e,1);// go to exact slide
}else{if(running){onTransitionEnd();}var absIndex=getAbsIndex(),indexGap=0;if(absIndex<0){absIndex+=slideCount;}if(targetIndex==='first'){indexGap=-absIndex;}else if(targetIndex==='last'){indexGap=carousel?slideCount-items-absIndex:slideCount-1-absIndex;}else{if(typeof targetIndex!=='number'){targetIndex=parseInt(targetIndex);}if(!isNaN(targetIndex)){if(!e){targetIndex-=1;// switch from natual index to JS index
if(carousel&&cloneCount){targetIndex+=cloneCount;}}var absTargetIndex=getAbsIndex(targetIndex);if(absTargetIndex<0){absTargetIndex+=slideCount;}indexGap=absTargetIndex-absIndex;}}// gallery: make sure new page won't overlap with current page
if(!carousel&&indexGap&&Math.abs(indexGap)<items){var factor=indexGap>0?1:-1;indexGap+=index+indexGap-slideCount>=indexMin?slideCount*factor:slideCount*2*factor*-1;}index+=indexGap;// make sure index is in range
if(carousel&&loop){if(index<indexMin){index+=slideCount;}if(index>indexMax){index-=slideCount;}}// if index is changed, start rendering
if(getAbsIndex(index)!==getAbsIndex(indexCached)){render(e);}}}// on controls click
function onControlsClick(e,dir){// if (!running) {
if(running){onTransitionEnd();}var passEventObject;if(!dir){e=getEvent(e);var target=e.target||e.srcElement;while(target!==controlsContainer&&[prevButton,nextButton].indexOf(target)<0){target=target.parentNode;}var targetIn=[prevButton,nextButton].indexOf(target);if(targetIn>=0){passEventObject=true;dir=targetIn===0?-1:1;}}if(rewind){if(index===indexMin&&dir===-1){goTo('last',e);return;}else if(index===indexMax&&dir===1){goTo('first',e);return;}}if(dir){index+=slideBy*dir;// pass e when click control buttons or keydown
render(passEventObject||e&&e.type==='keydown'?e:null);}// }
}// on nav click
function onNavClick(e){// if (!running) {
if(running){onTransitionEnd();}e=getEvent(e);var target=e.target||e.srcElement,navIndex;// find the clicked nav item
while(target!==navContainer&&!hasAttr(target,'data-nav')){target=target.parentNode;}if(hasAttr(target,'data-nav')){navIndex=navClicked=[].indexOf.call(navItems,target);goTo(carousel?navIndex+cloneCount:navIndex,e);}// }
}// autoplay functions
function setAutoplayTimer(){autoplayTimer=setInterval(function(){onControlsClick(null,autoplayDirection);},autoplayTimeout);animating=true;}function stopAutoplayTimer(){clearInterval(autoplayTimer);animating=false;}function updateAutoplayButton(action,txt){setAttrs(autoplayButton,{'data-action':action});autoplayButton.innerHTML=autoplayHtmlStrings[0]+action+autoplayHtmlStrings[1]+txt;}function startAutoplay(){setAutoplayTimer();if(autoplayButton){updateAutoplayButton('stop',autoplayText[1]);}}function stopAutoplay(){stopAutoplayTimer();if(autoplayButton){updateAutoplayButton('start',autoplayText[0]);}}// programaitcally play/pause the slider
function play(){if(autoplay&&!animating){startAutoplay();autoplayUserPaused=false;}}function pause(){if(animating){stopAutoplay();autoplayUserPaused=true;}}function toggleAutoplay(){if(animating){stopAutoplay();autoplayUserPaused=true;}else{startAutoplay();autoplayUserPaused=false;}}function onVisibilityChange(){if(doc.hidden){if(animating){stopAutoplayTimer();autoplayVisibilityPaused=true;}}else if(autoplayVisibilityPaused){setAutoplayTimer();autoplayVisibilityPaused=false;}}function mouseoverPause(){if(animating){stopAutoplayTimer();autoplayHoverPaused=true;}}function mouseoutRestart(){if(autoplayHoverPaused){setAutoplayTimer();autoplayHoverPaused=false;}}// keydown events on document 
function onDocumentKeydown(e){e=getEvent(e);switch(e.keyCode){case KEYS.LEFT:onControlsClick(e,-1);break;case KEYS.RIGHT:onControlsClick(e,1);}}// on key control
function onControlsKeydown(e){e=getEvent(e);var code=e.keyCode;switch(code){case KEYS.LEFT:case KEYS.UP:case KEYS.PAGEUP:if(!prevButton.disabled){onControlsClick(e,-1);}break;case KEYS.RIGHT:case KEYS.DOWN:case KEYS.PAGEDOWN:if(!nextButton.disabled){onControlsClick(e,1);}break;case KEYS.HOME:goTo('first',e);break;case KEYS.END:goTo(slideCount-1,e);break;}}// set focus
function setFocus(focus){focus.focus();}// on key nav
function onNavKeydown(e){var curElement=doc.activeElement;if(!hasAttr(curElement,'data-nav')){return;}e=getEvent(e);var code=e.keyCode,navIndex=[].indexOf.call(navItems,curElement),len=visibleNavIndexes.length,current=visibleNavIndexes.indexOf(navIndex);if(options.navContainer){len=slideCount;current=navIndex;}function getNavIndex(num){return options.navContainer?num:visibleNavIndexes[num];}switch(code){case KEYS.LEFT:case KEYS.PAGEUP:if(current>0){setFocus(navItems[getNavIndex(current-1)]);}break;case KEYS.UP:case KEYS.HOME:if(current>0){setFocus(navItems[getNavIndex(0)]);}break;case KEYS.RIGHT:case KEYS.PAGEDOWN:if(current<len-1){setFocus(navItems[getNavIndex(current+1)]);}break;case KEYS.DOWN:case KEYS.END:if(current<len-1){setFocus(navItems[getNavIndex(len-1)]);}break;// Can't use onNavClick here,
// Because onNavClick require event.target as nav items
case KEYS.ENTER:case KEYS.SPACE:navClicked=navIndex;goTo(navIndex+cloneCount,e);break;}}// IE10 scroll function
function ie10Scroll(){transformCore(0,container.scrollLeft);indexCached=index;}function getEvent(e){e=e||win.event;return isTouchEvent(e)?e.changedTouches[0]:e;}function getTarget(e){return e.target||win.event.srcElement;}function isTouchEvent(e){return e.type.indexOf('touch')>=0;}function preventDefaultBehavior(e){e.preventDefault?e.preventDefault():e.returnValue=false;}function onPanStart(e){if(running){onTransitionEnd();}panStart=true;caf(rafIndex);rafIndex=0;var $=getEvent(e);events.emit(isTouchEvent(e)?'touchStart':'dragStart',info(e));if(!isTouchEvent(e)&&['img','a'].indexOf(getLowerCaseNodeName(getTarget(e)))>=0){preventDefaultBehavior(e);}lastPosition.x=initPosition.x=parseInt($.clientX);lastPosition.y=initPosition.y=parseInt($.clientY);translateInit=parseFloat(container.style[transformAttr].replace(transformPrefix,'').replace(transformPostfix,''));resetDuration(container,'0s');}function onPanMove(e){if(panStart){var $=getEvent(e);lastPosition.x=parseInt($.clientX);lastPosition.y=parseInt($.clientY);}if(!rafIndex){rafIndex=raf(function(){panUpdate(e);});}}function panUpdate(e){if(!moveDirectionExpected){panStart=false;return;}caf(rafIndex);if(panStart){rafIndex=raf(function(){panUpdate(e);});}if(moveDirectionExpected==='?'&&lastPosition.x!==initPosition.x&&lastPosition.y!==initPosition.y){moveDirectionExpected=getTouchDirection(toDegree(lastPosition.y-initPosition.y,lastPosition.x-initPosition.x),swipeAngle)===options.axis;}if(moveDirectionExpected){try{if(e.type){events.emit(isTouchEvent(e)?'touchMove':'dragMove',info(e));}}catch(err){}var x=translateInit,dist=getDist(lastPosition,initPosition);if(!horizontal||fixedWidth){x+=dist;x+='px';}else{var percentageX=TRANSFORM?dist*items*100/(vpInner*slideCountNew):dist*100/vpInner;x+=percentageX;x+='%';}container.style[transformAttr]=transformPrefix+x+transformPostfix;}}function onPanEnd(e){if(swipeAngle){moveDirectionExpected='?';}// reset
if(panStart){caf(rafIndex);resetDuration(container,'');panStart=false;var $=getEvent(e);lastPosition.x=parseInt($.clientX);lastPosition.y=parseInt($.clientY);var dist=getDist(lastPosition,initPosition);// initPosition = {x:0, y:0}; // reset positions
// lastPosition = {x:0, y:0}; // reset positions
if(Math.abs(dist)>=5){// drag vs click
if(!isTouchEvent(e)){// prevent "click"
var target=getTarget(e);addEvents(target,{'click':function preventClick(e){preventDefaultBehavior(e);removeEvents(target,{'click':preventClick});}});}rafIndex=raf(function(){if(horizontal){var indexMoved=-dist*items/vpInner;indexMoved=dist>0?Math.floor(indexMoved):Math.ceil(indexMoved);index+=indexMoved;}else{var moved=-(translateInit+dist);if(moved<=0){index=indexMin;}else if(moved>=slideOffsetTops[slideOffsetTops.length-1]){index=indexMax;}else{var i=0;do{i++;index=dist<0?i+1:i;}while(i<slideCountNew&&moved>=slideOffsetTops[i+1]);}}render(e,dist);events.emit(isTouchEvent(e)?'touchEnd':'dragEnd',info(e));});}}}// === RESIZE FUNCTIONS === //
// (slideOffsetTops, index, items) => vertical_conentWrapper.height
function updateContentWrapperHeight(){innerWrapper.style.height=slideOffsetTops[index+items]-slideOffsetTops[index]+'px';}/*
   * get nav item indexes per items
   * add 1 more if the nav items cann't cover all slides
   * [0, 1, 2, 3, 4] / 3 => [0, 3]
   */function getVisibleNavIndex(){// reset visibleNavIndexes
visibleNavIndexes=[];var absIndexMin=getAbsIndex()%items;while(absIndexMin<slideCount){if(carousel&&!loop&&absIndexMin+items>slideCount){absIndexMin=slideCount-items;}visibleNavIndexes.push(absIndexMin);absIndexMin+=items;}// nav count * items < slide count means
// some slides can not be displayed only by nav clicking
if(loop&&visibleNavIndexes.length*items<slideCount||!loop&&visibleNavIndexes[0]>0){visibleNavIndexes.unshift(0);}}/*
   * 1. update visible nav items list
   * 2. add "hidden" attributes to previous visible nav items
   * 3. remove "hidden" attrubutes to new visible nav items
   */function updateNavVisibility(){if(!nav||navAsThumbnails){return;}getVisibleNavIndex();if(visibleNavIndexes!==visibleNavIndexesCached){forEachNodeList(navItems,function(el,i){if(visibleNavIndexes.indexOf(i)<0){hideElement(el);}else{showElement(el);}});// cache visible nav indexes
visibleNavIndexesCached=visibleNavIndexes;}}function info(e){return{container:container,slideItems:slideItems,navContainer:navContainer,navItems:navItems,controlsContainer:controlsContainer,hasControls:hasControls,prevButton:prevButton,nextButton:nextButton,items:items,slideBy:slideBy,cloneCount:cloneCount,slideCount:slideCount,slideCountNew:slideCountNew,index:index,indexCached:indexCached,navCurrentIndex:navCurrentIndex,navCurrentIndexCached:navCurrentIndexCached,visibleNavIndexes:visibleNavIndexes,visibleNavIndexesCached:visibleNavIndexesCached,sheet:sheet,event:e||{}};}return{getInfo:info,events:events,goTo:goTo,play:play,pause:pause,isOn:isOn,updateSliderHeight:updateInnerWrapperHeight,rebuild:function rebuild(){return tns(options);},destroy:function destroy(){// remove win event listeners
removeEvents(win,{'resize':onResize});// remove arrowKeys eventlistener
removeEvents(doc,docmentKeydownEvent);// sheet
sheet.disabled=true;// cloned items
if(loop){for(var j=cloneCount;j--;){if(carousel){slideItems[0].remove();}slideItems[slideItems.length-1].remove();}}// Slide Items
var slideClasses=['tns-item',slideActiveClass];if(!carousel){slideClasses=slideClasses.concat('tns-normal',animateIn);}for(var i=slideCount;i--;){var slide=slideItems[i];if(slide.id.indexOf(slideId+'-item')>=0){slide.id='';}slideClasses.forEach(function(cl){removeClass(slide,cl);});}removeAttrs(slideItems,['style','aria-hidden','tabindex']);slideItems=slideId=slideCount=slideCountNew=cloneCount=null;// controls
if(controls){removeEvents(controlsContainer,controlsEvents);if(options.controlsContainer){removeAttrs(controlsContainer,['aria-label','tabindex']);removeAttrs(controlsContainer.children,['aria-controls','aria-disabled','tabindex']);}controlsContainer=prevButton=nextButton=null;}// nav
if(nav){removeEvents(navContainer,navEvents);if(options.navContainer){removeAttrs(navContainer,['aria-label']);removeAttrs(navItems,['aria-selected','aria-controls','tabindex']);}navContainer=navItems=null;}// auto
if(autoplay){clearInterval(autoplayTimer);if(autoplayButton){removeEvents(autoplayButton,{'click':toggleAutoplay});}removeEvents(container,hoverEvents);removeEvents(container,visibilityEvent);if(options.autoplayButton){removeAttrs(autoplayButton,['data-action']);}}// container
container.id=containerIdCached||'';container.className=container.className.replace(classContainer,'');removeElementStyles(container);if(carousel&&TRANSITIONEND){var eve={};eve[TRANSITIONEND]=onTransitionEnd;removeEvents(container,eve);}removeEvents(container,touchEvents);removeEvents(container,dragEvents);// outerWrapper
containerParent.insertBefore(container,outerWrapper);outerWrapper.remove();outerWrapper=innerWrapper=container=index=indexCached=items=slideBy=navCurrentIndex=navCurrentIndexCached=hasControls=visibleNavIndexes=visibleNavIndexesCached=this.getInfo=this.events=this.goTo=this.play=this.pause=this.destroy=null;this.isOn=isOn=false;}};};return tns;}();;(function(){var version='1.0.16',baseApiUrl='https://sarafan.tech/widget_api/',baseApiUrlTest='https://test.sarafan.tech/widget_api/',baseApiUrlTest2='https://geoip.getsarafan.com/widget_api/',statUrl='https://sarafan.tech/widget_api/events',frameParserUrl='https://parsing.getsarafan.com/api/v1/instagram/array',statUrlTest='https://test.sarafan.tech/widget_api/events';var test=false;var hostname=window.location.hostname;if(hostname){if(hostname==='widget.local'||hostname==='sarafan.web.local')test=true;if(hostname==='adv.cosmo.ru'||hostname==='testing.cosmo.ru')test=true;var c=getParameterByName('console');if(c)test=true;var apiType=getParameterByName('apiType');if(apiType==='test'){baseApiUrl=baseApiUrlTest;statUrl=statUrlTest;}else if(apiType==='test2'){baseApiUrl=baseApiUrlTest2;}}else{console.log('Sarafan Widget: we can not determine hostname on your browser.');}function Sarafan(){this.version=version;this.cache=sarafanSDK&&sarafanSDK.cache?sarafanSDK.cache:{};this.products=sarafanSDK&&sarafanSDK.products?sarafanSDK.products:new Map();this.cacheQueue=sarafanSDK&&sarafanSDK.cacheQueue?sarafanSDK.cacheQueue:[];this.floorQueue=sarafanSDK&&sarafanSDK.floorQueue?sarafanSDK.floorQueue:[];this.commonInfoCache=sarafanSDK&&sarafanSDK.commonInfoCache?sarafanSDK.commonInfoCache:{};this.cacheQueueStatus=false;this.ad={};this.pins={};this.mediaTags={};this.optionsFromApiData={};this.rulesFromApiData={};this.test=test;this.baseApiUrl=baseApiUrl;this.site=checkSiteType();this.nextFloorId=sarafanSDK&&sarafanSDK.nextFloorId?sarafanSDK.nextFloorId:1;// for statistics working
this.statData=sarafanSDK&&sarafanSDK.statData?sarafanSDK.statData:[];this.startStamp=new Date().getTime();this.pageSessionId=this.guid();this._debounceStatRequest=this.debounce(this.statRequest.bind(this),2000);this._isSystemReady=false;// readiness to send statistics
this.lastWidgetId=0;// last serial number for widget (for example, for video player, floor, image post, ...)
this.lastQueryId=0;// last serial number for search query
this.lastSerialNum=0;// last serial number of events
this.optionsSetID=null;window.addEventListener('beforeunload',function(e){this.statRequest(true);}.bind(this),false);window.addEventListener('online',function(e){this.statRequest();}.bind(this));}Sarafan.prototype.search=function(imagesDataArray,pageMode,version,title,header,location){// shorter variant
var notLoadInFloorUrls=[];imagesDataArray=imagesDataArray.map(function(v){if(window.location.host==="www.wday.ru"){if(v.node.className.match(/swiper-lazy/)){notLoadInFloorUrls.push(v.url);}}return{mode:v.mode,url:v.url,qid:v.qid,wid:v.wid};});if(!imagesDataArray||!imagesDataArray.length){return false;}// sending
return fetch(baseApiUrl+'search',{method:'post',body:JSON.stringify({ps:this.pageSessionId,tas:this.getTimeAfterStart(),images:imagesDataArray,pageMode:pageMode,version:version,title:title,header:header,pu:location}),credentials:"include"}).then(function(response){if(response.ok){return response.json();}throw new Error('Getting search error.');}).then(function(responses){sarafanSDK.lastQueryId++;// because "this" not working
if(test){console.log('search responses start');console.log(responses);console.log('search responses finish');}if(responses.result==='Error'){return false;}responses.forEach(function(response,i){if(response&&response.result.toLowerCase()==='ok'){sarafanSDK.cache[response.image]=response.offers.slice(0);for(var _i=0;_i<response.offers.length;_i++){var offer=response.offers[_i];if(!sarafanSDK.products.has(offer.product_id)){sarafanSDK.products.set(offer.product_id,response.image);}}sarafanSDK.commonInfoCache[response.image]={'mediaId':response['media_id'],'mediaLinkId':response['media_link_id']};if(response.ad){sarafanSDK.ad[response.image]=response.ad.slice(0);}if(response.pins){sarafanSDK.pins[response.image]=response.pins.slice(0);for(var _i2=0;_i2<response.pins.length;_i2++){for(var j=0;j<response.pins[_i2].offers.length;j++){var _offer=response.pins[_i2].offers[j];if(!sarafanSDK.products.has(_offer.product_id)){sarafanSDK.products.set(_offer.product_id,response.image);}}}}if(response.tags){sarafanSDK.mediaTags[response.image]=response.tags.slice(0);}if(Object.keys(response.offers).length>0){sarafanSDK.cacheQueueStatus=true;}if(window.location.host==="www.wday.ru"&&notLoadInFloorUrls){var find=false;for(var _i3=0;_i3<notLoadInFloorUrls.length;_i3++){if(notLoadInFloorUrls[_i3]===response.image){find=true;break;}}if(!find){sarafanSDK.cacheQueue[response.image]=response.offers.slice(0);}}else{sarafanSDK.cacheQueue[response.image]=response.offers.slice(0);}sarafanSDK.floorQueue[response.image]=response.offers.slice(0);}});if(test){console.log('cache start');console.log(sarafanSDK.cache);console.log('cache finish');}return sarafanSDK.cache;});};Sarafan.prototype.view=function(src,mode,version){var requestStr=baseApiUrl+'view?image='+encodeURIComponent(src)+'&mode='+encodeURIComponent(mode);if(version){requestStr=requestStr+'&version='+encodeURIComponent(version);}fetch(requestStr,{credentials:"include"});};/*
    * Getting options for all script.
    */Sarafan.prototype.options=function(version){return fetch(baseApiUrl+'options',{method:'post',body:JSON.stringify({version:version,ps:this.pageSessionId,tas:this.getTimeAfterStart(),pu:this.getLocationHref(),sd:[window.screen.width,window.screen.height]}),credentials:"include"}).then(function(response){if(response.ok){return response.json();}throw new Error('Getting options error.');}).then(function(response){if(response.result==='Error'){return null;}sarafanSDK.optionsSetID=parseInt(response['options_set_id'])||null;if(response.options){sarafanSDK.optionsFromApiData=response.options;}if(response.lang){sarafanSDK.optionsFromApiData.lang=response.lang;}if(response.rules){sarafanSDK.rulesFromApiData=response.rules;}return sarafanSDK.optionsFromApiData;});};Sarafan.prototype.hasOffers=function(src){if(!baseApiUrl){return true;}if(sarafanSDK.cache[src]!=undefined){if(sarafanSDK.cache[src].length>0){return true;}}return false;};//return ad offers by img src
Sarafan.prototype.getAdOffersForPicture=function(src){if(sarafanSDK.ad[src]!=undefined){return sarafanSDK.ad[src];}return[];};//returns pins by img src
Sarafan.prototype.getPinsForPicture=function(src){if(sarafanSDK.pins[src]!=undefined){return sarafanSDK.pins[src];}return[];};Sarafan.prototype.getOffersForPicture=function(src){if(sarafanSDK.cache[src]!=undefined){return sarafanSDK.cache[src];}else return[];};Sarafan.prototype.getTagsForPicture=function(src){if(sarafanSDK.mediaTags[src]!=undefined){return sarafanSDK.mediaTags[src];}else return[];};Sarafan.prototype.toShortUrl=function(fullUrl){var URLobject=new URL(fullUrl);return URLobject.hostname+URLobject.pathname;};Sarafan.prototype.getLocationHref=function(){return window.location.href||document.URL||document.documentURI||'';};/* Get images src from iframes */Sarafan.prototype.frameSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(data){var rawResponse;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data['ps']=this.pageSessionId;data['tas']=this.getTimeAfterStart();_context.next=4;return fetch(frameParserUrl,{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(data)});case 4:rawResponse=_context.sent;_context.next=7;return rawResponse.json();case 7:return _context.abrupt("return",_context.sent);case 8:case"end":return _context.stop();}}},_callee,this);}));return function(_x){return _ref.apply(this,arguments);};}();// STATISTICS LOGIC START
// prepares event for sending to statistics server and starts sending logic
Sarafan.prototype.sendEvent=function(eventData){var preparedEventData={};preparedEventData.tas=this.getTimeAfterStart();if(eventData.wid)preparedEventData.wid=eventData.wid;if(eventData.qid)preparedEventData.qid=eventData.qid;if(eventData.mediaLinkId)preparedEventData.mli=eventData.mediaLinkId;if(eventData.mediaId)preparedEventData.mi=eventData.mediaId;preparedEventData.tp=eventData.type;if(eventData.mode)preparedEventData.m=eventData.mode;if(eventData.subMode)preparedEventData.sm=eventData.subMode;preparedEventData.osi=this.optionsSetID;preparedEventData.vb=[parseInt(window.pageXOffset),parseInt(window.pageYOffset),parseInt(Math.max(document.documentElement.clientWidth,window.innerWidth||0)),parseInt(Math.max(document.documentElement.clientHeight,window.innerHeight||0))];if(eventData.media){var bounding=eventData.media.getBoundingClientRect();preparedEventData.mb=[parseInt(bounding.left),parseInt(bounding.top),parseInt(bounding.right-bounding.left),parseInt(bounding.bottom-bounding.top)];}if(eventData.component){var _bounding=eventData.component.getBoundingClientRect();preparedEventData.cb=[parseInt(_bounding.left),parseInt(_bounding.top),parseInt(_bounding.right-_bounding.left),parseInt(_bounding.bottom-_bounding.top)];}if(eventData.mousePosition)preparedEventData.mp=eventData.mousePosition;if(eventData.tags)preparedEventData.t=eventData.tags;// objects ob
if(eventData.offersData){// excluded statistics types for objects
if(![''].includes(eventData.type)){var ob=[];eventData.offersData.forEach(function(offer){if(!(ob.filter(function(e){return e.id==offer.object_id;}).length>0))ob.push({id:offer.object_id});});preparedEventData.ob=ob;}// excluded statistics types for offers
if(!['html.pin','viewport.pin'].includes(eventData.type)){var of=[];eventData.offersData.forEach(function(offer){of.push({t:offer.type,id:offer.offer_id,r:offer.retailer_id,prid:offer.product_id,pcid:offer.picture_id,a:offer.ad_model,pr:offer.price,opr:offer.old_price,c:offer.currency,bid:offer.banner_id,p:offer.position});});preparedEventData.of=of;}}preparedEventData.sn=++sarafanSDK.lastSerialNum;this.sendStatistic(preparedEventData);};// stores prepared for sending data of event
// and starts debounce request if it's possible
Sarafan.prototype.setSystemIsReady=function(){sarafanSDK._isSystemReady=true;};Sarafan.prototype.clearCacheQueue=function(){sarafanSDK.cacheQueue=[];};Sarafan.prototype.incrementFloorId=function(){sarafanSDK.nextFloorId++;};Sarafan.prototype.sendStatistic=function(data){this.statData.push(data);if(sarafanSDK._isSystemReady){this._debounceStatRequest();}};Sarafan.prototype.getIncrementedWidgetId=function(){return++sarafanSDK.lastWidgetId;};Sarafan.prototype.getTimeAfterStart=function(){var time=Math.round((new Date().getTime()-this.startStamp)/1000);return time>0?time:0;};Sarafan.prototype.statRequest=function(isForced){if(this.statData.length===0){return false;}if(!navigator.onLine){console.error('Sarafan statistics request: No internet connection');return false;}if(isForced){console.info('Sarafan statistics request: It is FORCED request');}this._makeStatRequest(this.statData,isForced);this.statData=[];};Sarafan.prototype._makeStatRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(data,isForced){var statObj;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(isForced&&navigator.sendBeacon&&navigator.sendBeacon(statUrl,data))){_context2.next=5;break;}// sent over sendBeacon
this.statData=[];return _context2.abrupt("return",true);case 5:this.statData=[];statObj={version:this.version,ps:this.pageSessionId,tas:this.getTimeAfterStart(),events:data};if(document.referrer&&document.referrer.length!==0){statObj.r=document.referrer;}_context2.next=10;return fetch(statUrl,{method:'post',body:JSON.stringify(statObj),credentials:"include"});case 10:return _context2.abrupt("return",_context2.sent);case 11:case"end":return _context2.stop();}}},_callee2,this);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();Sarafan.prototype.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function later(){timeout=null;if(!immediate)func.apply(context,args);};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args);};};Sarafan.prototype.guid=function(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}return s4()+s4()+s4()+s4()+s4()+s4()+s4()+s4();};// STATISTICS LOGIC END
Sarafan.prototype=Object.create(Sarafan.prototype);var sarafanSDK=new Sarafan();function sendError(){throw new Error("can't modify, read-only view");}window.sarafanSDK=new Proxy(sarafanSDK,{get:function get(target,property){return sarafanSDK[property];},set:sendError,defineProperty:sendError,deleteProperty:sendError,preventExtensions:sendError,setPrototypeOf:sendError});// window.sarafanSDK = new Sarafan();
function getParameterByName(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));}/*
    * This function checks hostname & returns variants of site
    *
    * Current variants:
    * 1. cosmo
    * 2. other
    * */function checkSiteType(){var hostname=window.location.hostname.toLowerCase().trim();if(hostname.indexOf('cosmo.ru')+1){return'cosmo';}if(hostname.indexOf('freundin.de')+1){return'freundin';}if(hostname.indexOf('kp.ru')+1){return'kp';}if(hostname.indexOf('eva.ru')+1){return'eva';}// wmj
if(hostname.indexOf('wmj.ru')+1){return'wmj';}return'other';}})();;(function(){var _marked=/*#__PURE__*/regeneratorRuntime.mark(returnSlide);// can be dev or number
var version=window.sarafanSDK.version,baseApiUrl=window.sarafanSDK.baseApiUrl;var test=window.sarafanSDK.test;var observer;var googletag;var targetNode=document.body;var observerConfig={//attributes: true,
childList:true,// characterData: true,
subtree:true};var dblClickQueue=[];var dblClickCounter=1;var currentLocationHref;var scrolled=false;var area=[document];var bodyOffsets;var url=window.location.href;/* when document.clientWidth less than this size show AD offer on the second position in slider */var mobileMinWidth=415;document.addEventListener("DOMContentLoaded",function(event){bodyOffsets=document.body.getBoundingClientRect();if(_enableDblClick){googletag=window.googletag||{};googletag.cmd=googletag.cmd||[];}if(test)console.log('bodyOffsets.top: '+bodyOffsets.top);if(test)console.log('bodyOffsets.left: '+bodyOffsets.left);});/* monitor location change*/ // window.addEventListener("scroll", locationChanged);
function updateCart(){if(window.Cart&&window.Cart.updateCart){window.Cart.updateCart();}}function checkCartIsClicked(e){var sarafanCart=document.getElementsByClassName("sarafan-cart")[0];if(sarafanCart){sarafanCart.dispatchEvent(new CustomEvent("check-cart-is-clicked",{detail:{className:e.target.className}}));}}function locationChanged(){if(url!==window.location.href){window.sarafanSDK.options(version).then(function(){if(test)console.log('Location changed, new options received');}).catch(function(e){return test?console.log(e):void 0;});scrolled=true;}}if(test)console.log('API url: '+baseApiUrl);var me=getCurrentScript(),optionsFromApiData=[],// options from sarafan API
_theme='default-theme',// default-theme, cosmo-theme, 7days-theme, pink-theme, brown-theme, orange-theme, glamour, ...
_border=null,// page border, querySelector
_pageMode='button',// button, view
_buttonSize='medium',// small, medium, large
_corner='bottomcenter',// topleft, topright, bottomleft, bottomright
_btnType='btn-standart',// btn-standart, btn-only-icon, btn-only-text
_imagesSearchType='sarafan-class',// 'all-classes', 'sarafan-class'
_viewModeType='load-view-simply',// 'load-view-simply', 'load-view-all'
_viewModeProbability=50,// default 50%
_onHover=false,// works button on hover, default = false
_showPrice=false,_enableButtonMode=true,_enableViewMode=true,_enableDblClick=false,_dblClickCampaign='',_enableFloorMode=false,_enableLazyLoad=true,_enableFrames=false,_language='en',_processImageObject=false,_offersPanelOffsetY=100,// default 100%.  0%,       ,
//  100% -     offersShift  .  -100% -   .
_btnShiftX=10,_btnShiftY=10,// button spaces from edges of image (TODO make possibility to work with %)
_showFirstPin=true,offersFloor=[],optionsHandlers={'default-theme':function defaultTheme(){_theme='default-theme';},'cosmo-theme':function cosmoTheme(){_theme='cosmo-theme';},'7days-theme':function daysTheme(){_theme='7days-theme';},'fivmagazine-theme':function fivmagazineTheme(){_theme='fivmagazine-theme';},'pink-theme':function pinkTheme(){_theme='pink-theme';},'brown-theme':function brownTheme(){_theme='brown-theme';},'orange-theme':function orangeTheme(){_theme='orange-theme';},button:function button(){_pageMode='button';},inpicture:function inpicture(){_pageMode='inpicture';},view:function view(){_pageMode='view';},medium:function medium(){_buttonSize='';},small:function small(){_buttonSize='small';},large:function large(){_buttonSize='large';},topleft:function topleft(){_corner='topleft';},topright:function topright(){_corner='topright';},bottomleft:function bottomleft(){_corner='bottomleft';},bottomright:function bottomright(){_corner='bottomright';},bottomcenter:function bottomcenter(){_corner='bottomcenter';},'btn-standart':function btnStandart(){_btnType='btn-standart';},'btn-only-icon':function btnOnlyIcon(){_btnType='btn-only-icon';},'btn-only-text':function btnOnlyText(){_btnType='btn-only-text';},'all-classes':function allClasses(){_imagesSearchType='all-classes';},'sarafan-class':function sarafanClass(){_imagesSearchType='sarafan-class';},'load-view-simply':function loadViewSimply(){_viewModeType='load-view-simply';},'load-view-all':function loadViewAll(){_viewModeType='load-view-all';},'view-mode-probability':function viewModeProbability(percent){_viewModeProbability=percent;}};if(location.href==='https://www.wday.ru/moda-shopping/novosty/kak-novyiy-stilist-keyt-middlton-izmenila-ee-garderob/'||location.href==="https://www.wday.ru/moda-shopping/gar/bazovyi-letnii-garderob-dlya-devushek-plus-size/"||location.href==="https://www.wday.ru/moda-shopping/style/katya-gershuni-nosite-telnyashki-i-hudeyte-chtobyi-vyiglyadet-na-10-let-moloje/"){_dblClickCampaign='81006599/hmiru-wday/sarafan';}var options=me.getAttribute('data-sarafan-options')||"";options=options.toLowerCase().split(',').map(function(value){return value.trim();});options.forEach(function(option){if(optionsHandlers[option]){optionsHandlers[option]();}});var optionHandlers2={'theme':function theme(val){_theme=val;},'border':function border(val){_border=val;},'pageMode':function pageMode(val){_pageMode=val;},'buttonSize':function buttonSize(val){_buttonSize=val;},'corner':function corner(val){_corner=val;},'btnType':function btnType(val){_btnType=val;},'imagesSearchType':function imagesSearchType(val){_imagesSearchType=val;},'viewModeType':function viewModeType(val){_viewModeType=val;},'viewModeProbability':function viewModeProbability(val){_viewModeProbability=val;},'showPrice':function showPrice(val){_showPrice=val;},'onHover':function onHover(val){_onHover=val;},'enableButtonMode':function enableButtonMode(val){_enableButtonMode=val;},'enableViewMode':function enableViewMode(val){_enableViewMode=val;},'enableFloorMode':function enableFloorMode(val){_enableFloorMode=val;},'enableFrames':function enableFrames(val){_enableFrames=val;},'enableDblClick':function enableDblClick(val){_enableDblClick=val;},'dblClickCampaign':function dblClickCampaign(val){_dblClickCampaign=val;if(location.href==='https://www.wday.ru/moda-shopping/novosty/kak-novyiy-stilist-keyt-middlton-izmenila-ee-garderob/'||location.href==="https://www.wday.ru/moda-shopping/gar/bazovyi-letnii-garderob-dlya-devushek-plus-size/"||location.href==="https://www.wday.ru/moda-shopping/style/katya-gershuni-nosite-telnyashki-i-hudeyte-chtobyi-vyiglyadet-na-10-let-moloje/"){_dblClickCampaign='81006599/hmiru-wday/sarafan';}},'enableLazyLoad':function enableLazyLoad(val){_enableLazyLoad=val;},'language':function language(val){_language=val;},'floorWrapperSubTitle':function floorWrapperSubTitle(val){_floorWrapperSubTitle=val;},'processImageObject':function processImageObject(val){_processImageObject=val;},'showFirstPin':function showFirstPin(val){_showFirstPin=val;},'offersPanelOffsetY':function offersPanelOffsetY(val){_offersPanelOffsetY=val;},'btnShiftX':function btnShiftX(val){_btnShiftX=val;},'btnShiftY':function btnShiftY(val){_btnShiftY=val;}};if(parseInt(me.getAttribute('data-sarafan-view-probability'))){_viewModeProbability=parseInt(me.getAttribute('data-sarafan-view-probability'));}var button,offers,offersShift=10,buttonClass='sarafan-button',buttonText=window.sarafanSDK.site==='cosmo'?'  ':'  ',additionalOfferText=' ',viewsTitleText=null,_floorWrapperSubTitle=null,floorWrapperDescription=null,// empty default
offerTemplate,svgEye,svgEyeSmall,iconCosmo,buttonTemplate,offersPanelTemplate,modeButtonClass='sarafan-button-mode',modeViewClass='sarafan-view-mode',modeInPictureClass='sarafan-inpicture',emptyWrapperClass='sarafan-empty-div',sarafanViewPanelClass='sarafan-offers-view-panel',sarafanButtonPanelClass="sarafan-offers-button-panel",sarafanPinPanelClass="sarafan-offers-pin-panel",sarafanFloorPanelClass='sarafan-offers-floor-panel',floorClass='sarafan-floor',sarafanOffersPanelClass='sarafan-offers-panel',sarafanInPicturePanelClass='sarafan-inpic-panel',minWidthOfImageForDisplayBottomOffersWrapper=200,minHeightOfImageForDisplayBottomOffersWrapper=300,minWidthForInPicture=320,minWidthOfImageForChangeRow=500,nextFloor=null,nextFloorOffset=5000,populateNextFloorLocked=false;var currencies={RUR:'P',RUB:'P',USD:'$'};/*
        function for working of creating object, example:
        var sarafan = new Sarafan({
            'theme': 'cosmo-theme',
        });
        sarafan.start;
    */var SarafanParent=function SarafanParent(options2){if(test)console.log('Sarafan: start Sarafan constructor');// rewrite variables with new options
for(var prop in options2){// skip loop if the property is from prototype
if(!options2.hasOwnProperty(prop))continue;if(optionHandlers2[prop]){optionHandlers2[prop](options2[prop]);}}};/* API FUNCTIONS */function rewriteOptionsFromApiResponse(){// <<< START
// rewrite options from API response
if(test)console.log('Sarafan widget: rewrite options from API response');optionsFromApiData=window.sarafanSDK.optionsFromApiData;if(location.href==="https://sarafan.tech/widget/mydemo/alt.html"){optionsFromApiData.enableFloorMode="1";optionsFromApiData.corner="bottomright";optionsFromApiData.theme="alt";optionsFromApiData.btnShiftY="15";}if(optionsFromApiData.lang){_language=optionsFromApiData.lang;}if(optionsFromApiData.theme){_theme=optionsFromApiData.theme;}if(optionsFromApiData.border){_border=optionsFromApiData.border;}buttonText=window.sarafanSDK.site==='cosmo'?'  ':'  ';if(optionsFromApiData.buttonTexts){optionsFromApiData.buttonTexts.forEach(function(row,i){if(row.text&&row.tags.length===0){if(!row.language||row.language===_language){buttonText=row.text;return true;}}});}additionalOfferText=' ';if(optionsFromApiData.additionalOfferTexts){optionsFromApiData.additionalOfferTexts.forEach(function(row,i){if(row.text&&row.tags.length===0){if(!row.language||row.language===_language){additionalOfferText=row.text;return true;}}});}viewsTitleText=null;// default
if(optionsFromApiData.viewsTitleTexts){optionsFromApiData.viewsTitleTexts.forEach(function(row,i){if(row.text&&row.tags.length===0){if(!row.language||row.language===_language){viewsTitleText=row.text;return true;}}});}if(parseInt(optionsFromApiData.showPrice)){_showPrice=true;}else if(parseInt(optionsFromApiData.showPrice)===0){_showPrice=false;}if(parseInt(optionsFromApiData.onHover)){_onHover=true;}else if(parseInt(optionsFromApiData.onHover)===0){_onHover=false;}if(optionsFromApiData.corner){_corner=optionsFromApiData.corner;}if(optionsFromApiData.pageMode){_pageMode=optionsFromApiData.pageMode;}if(optionsFromApiData.btnType){_btnType=optionsFromApiData.btnType;}if(optionsFromApiData.imagesSearchType){_imagesSearchType=optionsFromApiData.imagesSearchType;}if(optionsFromApiData.floorWrapperSubTitle){_floorWrapperSubTitle=optionsFromApiData.floorWrapperSubTitle;}var cosmoAttr=window.sarafanSDK.site==='cosmo'?'data-ga="SarafanButton"':'';offerTemplate='  <a href="#" target="_blank" class="offer-link" rel="noindex">'+'    <sfandiv class="offer-image" '+cosmoAttr+'>'+'      <img src="" alt="" class="img-responsive img-sarafan-offer-image" '+cosmoAttr+'>'+'    </sfandiv>'+'<sfandiv class="offer-name" '+cosmoAttr+'></sfandiv>'+'<sfandiv class="offer-seller" '+cosmoAttr+'></sfandiv>';if(_showPrice){offerTemplate+='<sfandiv class="offer-price">'+'</sfandiv>';}offerTemplate+='<sfandiv class="offer-legal-info">'+'</sfandiv>';offerTemplate+='</a>';if(optionsFromApiData.offerTemplate){offerTemplate=optionsFromApiData.offerTemplate;}if(parseInt(optionsFromApiData.enableLazyLoad)){_enableLazyLoad=true;}else if(parseInt(optionsFromApiData.enableLazyLoad)===0){_enableLazyLoad=false;}if(parseInt(optionsFromApiData.enableButtonMode)){_enableButtonMode=true;}else if(parseInt(optionsFromApiData.enableButtonMode)===0){_enableButtonMode=false;}if(parseInt(optionsFromApiData.enableViewMode)){_enableViewMode=true;}else if(parseInt(optionsFromApiData.enableViewMode)===0){_enableViewMode=false;}if(parseInt(optionsFromApiData.enableFloorMode)){_enableFloorMode=true;}else if(parseInt(optionsFromApiData.enableFloorMode)===0){_enableFloorMode=false;}if(parseInt(optionsFromApiData.enableFrames)){_enableFrames=true;}else if(parseInt(optionsFromApiData.enableFrames)===0){_enableFrames=false;}if(parseInt(optionsFromApiData.enableDblClick)&&optionsFromApiData.dblClickCampaign){_enableDblClick=true;}else if(parseInt(optionsFromApiData.enableDblClick)===0){_enableDblClick=false;}if(location.href==='https://www.wday.ru/moda-shopping/novosty/kak-novyiy-stilist-keyt-middlton-izmenila-ee-garderob/'||location.href==="https://www.wday.ru/moda-shopping/gar/bazovyi-letnii-garderob-dlya-devushek-plus-size/"||location.href==="https://www.wday.ru/moda-shopping/style/katya-gershuni-nosite-telnyashki-i-hudeyte-chtobyi-vyiglyadet-na-10-let-moloje/"){_enableDblClick=true;}if(parseInt(optionsFromApiData.processImageObject)){_processImageObject=true;}else if(parseInt(optionsFromApiData.processImageObject)===0){_processImageObject=false;}if(parseInt(optionsFromApiData.showFirstPin)){_showFirstPin=true;}else if(parseInt(optionsFromApiData.showFirstPin)===0){_showFirstPin=false;}if(typeof optionsFromApiData.offersPanelOffsetY!=='undefined'){_offersPanelOffsetY=parseInt(optionsFromApiData.offersPanelOffsetY);}if(typeof optionsFromApiData.viewModeProbability!=='undefined'){_viewModeProbability=parseInt(optionsFromApiData.viewModeProbability);}if(typeof optionsFromApiData.btnShiftX!=='undefined'){_btnShiftX=parseInt(optionsFromApiData.btnShiftX);}if(typeof optionsFromApiData.btnShiftY!=='undefined'){_btnShiftY=parseInt(optionsFromApiData.btnShiftY);}var adv=window.location.hostname.slice(-3)==='.de'?'Anzeige':'ADV';offersPanelTemplate='<sfandiv class="sarafan-offers"></sfandiv>'+// '<sfandiv class="sarafan-tns-nav"><span></span><span></span></sfandiv>'+
'<sfandiv class="sarafan-tns-controls"><button data-controls="prev"></button><button data-controls="next"></button></sfandiv>'+'<sfandiv class="sarafan-offers-panel-footer">'+'<sfandiv class="legal-element sarafan-offers-panel-ads-opener"><img src="https://sarafan.tech/widget/img/legal-info@2x.png" class="legal-icon-element img-sarafan-icon-element"></sfandiv>'+'  <sfanspan class="legal-adv-element">'+adv+'</sfanspan></sfandiv>'+'<sfandiv class="sarafan-offers-panel-ads" '+'  onclick="window.open(\'https://sarafan.tech\', \'_blank\');">POWERED BY SARAFAN</sfandiv>';svgEye='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n'+'    <g fill="none" fill-rule="evenodd">\n'+'        <path d="M0 0h24v24H0z"/>\n'+'        <path class="icon-element" fill-rule="nonzero" d="M23.723 10.651C21.373 6.665 16.993 4 12 4 7.006 4 2.625 6.666.277 10.651a2 2 0 0 0 0 2.031c2.35 3.987 6.73 6.651 11.723 6.651 4.994 0 9.375-2.666 11.723-6.651a2 2 0 0 0 0-2.03zM12 17.333a5.664 5.664 0 0 1-5.667-5.666A5.664 5.664 0 0 1 12 6a5.664 5.664 0 0 1 5.667 5.667A5.664 5.664 0 0 1 12 17.333zm4.333-5.666a4.333 4.333 0 1 1-8.156-2.04A1.784 1.784 0 1 0 9.96 7.843h-.002a4.333 4.333 0 0 1 6.374 3.823z"/>\n'+'    </g>\n'+'</svg>\n';svgEyeSmall='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">\n'+'    <g fill="none" fill-rule="evenodd">\n'+'        <path d="M0 0h24v24H0z"/>\n'+'        <path class="icon-element" fill-rule="nonzero" d="M23.723 10.651C21.373 6.665 16.993 4 12 4 7.006 4 2.625 6.666.277 10.651a2 2 0 0 0 0 2.031c2.35 3.987 6.73 6.651 11.723 6.651 4.994 0 9.375-2.666 11.723-6.651a2 2 0 0 0 0-2.03zM12 17.333a5.664 5.664 0 0 1-5.667-5.666A5.664 5.664 0 0 1 12 6a5.664 5.664 0 0 1 5.667 5.667A5.664 5.664 0 0 1 12 17.333zm4.333-5.666a4.333 4.333 0 1 1-8.156-2.04A1.784 1.784 0 1 0 9.96 7.843h-.002a4.333 4.333 0 0 1 6.374 3.823z"/>\n'+'    </g>\n'+'</svg>\n';iconCosmo='<sfanspan class="icon-element"><img src="https://sarafan.tech/widget/img/cosmo-cart.png" alt="" class="img-sarafan-icon-element"></sfanspan>';iconTopnews='<sfanspan class="icon-element"><img src="https://sarafan.tech/widget/img/topnewscart.png" alt="" class="img-sarafan-icon-element"></sfanspan>';buttonTemplate=getButtonTemplate();// standart button without tags logic
// FINISH >>>
}/* * * END * * */ /* SLIDER BLOCK */ /* generate tiny-slider block */function generateSliderTNS(container,controlsContainer){return tns({mode:'carousel',container:container,gutter:0,edgePadding:0,controlsText:['',''],autoHeight:true,loop:false,responsive:false,controlsContainer:controlsContainer.querySelector('.sarafan-tns-controls'),nav:false,lazyload:true//WARN: probably no works in tiny slider JS
});}function returnSlide(slicedOffers,dataForStat){var cnt,i;return regeneratorRuntime.wrap(function returnSlide$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cnt=slicedOffers.length;i=0;case 2:if(!(i<cnt)){_context3.next=8;break;}_context3.next=5;return generateSarafanSlide(slicedOffers[i],dataForStat);case 5:i++;_context3.next=2;break;case 8:return _context3.abrupt("return",true);case 9:case"end":return _context3.stop();}}},_marked);}/* generate slider node */function generateSliderNode(slicedOffers,offersNode,offersPanel,dataForStat){slicedOffers.forEach(function(){var sarafanSlide=document.createElement('sfandiv');sarafanSlide.classList.add('sarafan-slide');sarafanSlide.classList.add('sarafan-empty');offersNode.appendChild(sarafanSlide);});var buildFirstFloor=false;if(dataForStat.mode==='floor'){if(!offersFloor[window.location.href]){offersFloor[window.location.href]=[];buildFirstFloor=true;}offersFloor[window.location.href]=offersFloor[window.location.href].concat(slicedOffers);slicedOffers=_toConsumableArray(offersFloor[window.location.href]);}var show=returnSlide(slicedOffers,dataForStat);var buildSlide=function buildSlide(trigger){var nextSlideData=show.next();if(dataForStat.mode==='floor'){offersFloor[window.location.href].shift();}if(!nextSlideData.done){var place=offersNode.querySelector('.sarafan-empty');place.appendChild(nextSlideData.value.node);place.classList.remove('sarafan-empty');if(dataForStat&&!place.classList.contains('sarafan-first-showed')){// if first than we need inview
// if next than widget is just in viewport right now
if(trigger==='first'){var selectorStr='.'+offersPanel.classList[0];if(offersPanel.hasAttribute('data-sarafan-src')){selectorStr+='['+'data-sarafan-src="'+offersPanel.getAttribute('data-sarafan-src')+'"]';}if(offersPanel.hasAttribute('data-floor-id')){selectorStr+='['+'data-floor-id="'+offersPanel.getAttribute('data-floor-id')+'"]';}selectorStr+=' .sarafan-offers';// first viewport view mode showing
inView(selectorStr).once('enter',function(){sarafanSDK.sendEvent(_objectSpread({},dataForStat,{offersData:nextSlideData.value.offersData,type:"viewport.offers"}));});}else if(trigger==='next'){// not first showing
sarafanSDK.sendEvent(_objectSpread({},dataForStat,{offersData:nextSlideData.value.offersData,type:"viewport.offers"}));}place.classList.add('sarafan-first-showed');}}};if(!dataForStat.mode||dataForStat.mode!=='floor'||buildFirstFloor){buildSlide('first');}var slider=generateSliderTNS(offersNode,offersPanel);if(dataForStat.mode&&dataForStat.mode==='floor'&&!buildFirstFloor){offersPanel.querySelector('.sarafan-tns-controls').removeAttribute('hidden');}offersPanel.querySelector('button[data-controls="next"]').onclick=function(){var sliderInfo=slider.getInfo();if(sliderInfo.slideItems[sliderInfo.index].nextElementSibling&&sliderInfo.slideItems[sliderInfo.index].nextElementSibling.classList.contains('sarafan-empty')){buildSlide('next');if(_enableDblClick){dblClickQueue.forEach(function(v){dblClickRenderSlot(v.str,v.placement,v.resolutions,v.id,200);});dblClickQueue=[];}}};return slider;}/* generate one slide with sliced element */function generateSarafanSlide(e,dataForStat){var sarafanSlide=document.createElement('sfandiv');sarafanSlide.classList.add('sf-slide-content');var _loop=function _loop(i){var offerADV=null;// NODE object of offer for statistics working
switch(e[i].type){case'adfox':{var floorDiv,floorJs;floorDiv=e[i].insert_code_div;floorJs=e[i].insert_code_js;offerADV=document.createElement('sfandiv');offerADV.classList.add('offer','type-C');offerADV.innerHTML+=floorDiv;sarafanSlide.appendChild(offerADV);setTimeout(function(){new Function(floorJs)();},100);window.floorCount++;break;}case'adfox_p':{var _getAdfoxCodes=getAdfoxCodes(e[i]),_floorDiv=_getAdfoxCodes.floorDiv,_floorJs=_getAdfoxCodes.floorJs;offerADV=document.createElement('sfandiv');offerADV.classList.add('sf-promo');offerADV.innerHTML+=_floorDiv;sarafanSlide.appendChild(offerADV);setTimeout(function(){new Function(_floorJs)();},100);// sarafanSlide.appendChild(getPromo(e[i], cnt));
break;}case'adfox_mm':{var _getAdfoxCodes2=getAdfoxCodes(e[i]),_floorDiv2=_getAdfoxCodes2.floorDiv,_floorJs2=_getAdfoxCodes2.floorJs;offerADV=document.createElement('sfandiv');offerADV.classList.add('offer','sf-mm');offerADV.innerHTML+=_floorDiv2;sarafanSlide.appendChild(offerADV);setTimeout(function(){new Function(_floorJs2)();},100);// sarafanSlide.appendChild(getMicromedia(e[i]));
break;}case'doubleclick':{var dblObj=getDoubleClickDiv(e[i],dblClickCounter);sarafanSlide.appendChild(dblObj.div);dblClickQueue.push(dblObj);if(e[i].place==='ad'){dblClickCounter++;if(dblClickCounter>2)dblClickCounter=1;}break;}default:sarafanSlide.appendChild(getSarafanOffer(e[i],'button',null,dataForStat));break;}if(offerADV){var clickListener=function clickListener(event){event.preventDefault();var mousePosition=[event.clientX,event.clientY];sarafanSDK.sendEvent(_objectSpread({type:"click.offer"},dataForStat,{offersData:[e[i]],component:offerADV,mousePosition:mousePosition}));};offerADV.addEventListener('click',clickListener,false);offerADV.addEventListener('auxclick',clickListener,false);}};for(var i=0;i<e.length;i++){_loop(i);}return{node:sarafanSlide,offersData:e};}/* * * END * * */function getAdfoxCodes(e){var floorDiv,floorJs;var oldVal=e.insert_code_div.substring(e.insert_code_div.lastIndexOf("adfox_"),e.insert_code_div.lastIndexOf("\""));var uniqueStr='adfox_'+randomStr();floorDiv=e.insert_code_div.replace(/adfox_.*\"/,uniqueStr+'\"'+' style=\"height: 280px\"');floorJs=e.insert_code_js.replace(oldVal,uniqueStr);return{floorDiv:floorDiv,floorJs:floorJs};}/* RENDER & SHOW BUTTON FUNCTIONS */ /* generate button for theme */function getButtonTemplate(btnText){var buttonTemplate='';if(!btnText)btnText=buttonText;// get from global buttonText option
if(_theme==='cosmo-theme'){buttonTemplate+='<sfanspan class="icon-element-wrapper">'+iconCosmo+'</sfanspan>';buttonTemplate+='<sfanspan class="sarafan-button-text">'+btnText+'</sfanspan>';return buttonTemplate;}if(_theme==='topnews-theme'){buttonTemplate+='<sfanspan class="icon-element-wrapper">'+iconTopnews+'</sfanspan>';buttonTemplate+='<sfanspan class="sarafan-button-text topnews-button-text">'+btnText+'</sfanspan>';return buttonTemplate;}switch(_btnType){case'btn-only-icon':if(_buttonSize==='small'){svgEye=svgEyeSmall;}buttonTemplate+='<sfanspan class="icon-element-wrapper">'+svgEye+'</sfanspan>';break;case'btn-only-text':buttonTemplate+='<sfanspan class="sarafan-button-text">'+btnText+'</sfanspan>';break;case'sfn-btn__type1'||'sfn-btn__type2':buttonTemplate+='<sfanspan class="sfn-btn__label">'+btnText+'</sfanspan>';break;default:if(_buttonSize==='small'){svgEye=svgEyeSmall;}buttonTemplate+='<sfanspan class="icon-element-wrapper">'+svgEye+'</sfanspan>';buttonTemplate+='<sfanspan class="sarafan-button-text">'+btnText+'</sfanspan>';}if(optionsFromApiData.buttonTemplate){buttonTemplate=optionsFromApiData.buttonTemplate;var btn=document.createElement('div');btn.innerHTML=buttonTemplate;var btnTextNode=btn.querySelector('.sarafan-button-text');if(btnTextNode){btnTextNode.innerHTML=btnText;buttonTemplate=btn.innerHTML;}}return buttonTemplate;}function isMobile(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;};/* render button */function showSarafanButton(image,imageData){if(test)console.log('showSarafanButton');if(!_enableButtonMode){if(test)console.log('Option enableButtonMode is disabled. ');return false;}if(image.classList.contains('sarafan-hidden')){if(test)console.log('Class sarafan-hidden stopped rendering of widget on image '+image.src);return false;}if(location.host==="www.woman.ru"&&(image.matches(".photoWp img")||image.classList.contains("gallery__full-image"))){return false;}var dataImageSrc=getImageSrc(image);if(test)console.log('showSarafanButton function successfuly started on image '+image.src);button=document.createElement('sfanspan');button.classList.add(buttonClass);if(_theme){button.classList.add('theme-'+_theme);}if(_btnType){button.classList.add('type-'+_btnType);}if(optionsFromApiData.buttonClasses){var myarr=optionsFromApiData.buttonClasses.split(" ");for(var i=0,len=myarr.length;i<len;i++){button.classList.add(myarr[i]);}}button.setAttribute('data-sarafan-src',dataImageSrc);var btnText='',imageTags=window.sarafanSDK.getTagsForPicture(dataImageSrc);if(optionsFromApiData.buttonTexts&&optionsFromApiData.buttonTexts.length!==0){optionsFromApiData.buttonTexts.forEach(function(row,i){row.tags=row.tags?Object.values(row.tags):[];if(row.text){if(!row.language||row.language===_language){if(row.tags.length===0||imageTags&&imageTags.filter(function(x){return row.tags.includes(x);}).length!==0){btnText=row.text;return true;}}}});}if(location.href==="https://sarafan.tech/widget/mydemo/alt.html"){btnText="SE TJET HER";}button.innerHTML=getButtonTemplate(btnText);if(_buttonSize!=='medium'){button.classList.add('sarafan-button-'+_buttonSize);}var currentComponent=button;// we can get boundings calculating only for local variables (for example, getBoundigClientRect function)
button.addEventListener('click',function(e){e=e||window.event;e.preventDefault();var mousePosition=[e.clientX,e.clientY];removeClassForGlamourPins();var imgStyle=window.getComputedStyle(image);if(parseInt(imgStyle.width)>minWidthForInPicture&&imageData['mode']==='inpicture'){showSarafanInPicOffers(e,dataImageSrc,this,getCoords(image),imgStyle);}else{showSarafanButtonOffers(e,dataImageSrc,this,image,mousePosition,imageData);}});if(_onHover){if(!!('ontouchstart'in window)){//check for touch device
//behaviour and events for touch device
if(test)console.log('Behaviour for touch device worked. Hover event wont be added');}else{//behaviour and events for pointing device like mouse
button.addEventListener('mouseover',function(e){e=e||window.event;e.preventDefault();var mousePosition=[e.clientX,e.clientY];// no action if offers already showed for current button
if(offers&&!isHidden(offers)&&offers.getAttribute('data-sarafan-src')===dataImageSrc){return false;}var imgStyle=window.getComputedStyle(image);if(parseInt(imgStyle.width)>minWidthForInPicture&&imageData['mode']==='inpicture'){showSarafanInPicOffers(e,dataImageSrc,this,getCoords(image),imgStyle);}else{showSarafanButtonOffers(e,dataImageSrc,this,image,mousePosition,imageData);}});}}// check rule existion & button position
if(imageData&&imageData.imageRule&&imageData.imageRule.position&&imageData.imageRule.position==='block'){insertElementIntoDom(button,image,imageData.imageRule);}else{// default absolute position of button
var _imageWrapper=image.closest("."+emptyWrapperClass);if(location.host==="www.wday.ru"){var slide=image.closest(".swiper-zoom-container");if(slide){_imageWrapper=slide;}}// if (location.host === "www.woman.ru") {
//     const slide = image.closest(".gallery__slide");
//     if (slide) {
//         imageWrapper = slide;
//     }
// }
if(_imageWrapper){}else{_imageWrapper=document.createElement('sfandiv');_imageWrapper.classList.add(emptyWrapperClass);var imageStyles=window.getComputedStyle(image);_imageWrapper.style.width=image.style.width?image.style.width:imageStyles.width;if(window.location.hostname=='arcor.de'||window.location.hostname=='www.arcor.de'){var pWrap=image.parentNode;_imageWrapper.style.width=window.getComputedStyle(pWrap).width;}if(window.sarafanSDK.site!=='wmj'&&location.hostname!=="www.ellegirl.ru"&&location.hostname!=="www.woman.ru"){_imageWrapper.style.height='100%';}// if (location.hostname === "www.woman.ru" && isMobile()) {
//     imageWrapper.style.height = "auto";
// }
if(location.hostname==="www.brigitte.de"||location.hostname==="widget.local"){if(image.offsetHeight>image.parentNode.offsetHeight){_imageWrapper.style.height=image.parentNode.offsetHeight+"px";}}if(location.hostname==="www.brigitte.de"||location.hostname==="widget.local"){if(image.offsetHeight>image.parentNode.offsetHeight){_imageWrapper.style.height=image.parentNode.offsetHeight+"px";}}if(imageStyles.margin){_imageWrapper.style.margin=imageStyles.margin;}else{_imageWrapper.style.marginTop=imageStyles.marginTop;_imageWrapper.style.marginBottom=imageStyles.marginBottom;_imageWrapper.style.marginLeft=imageStyles.marginLeft;_imageWrapper.style.marginRight=imageStyles.marginRight;}if(location.hostname==="www.woman.ru"&&image.matches(".gallery img")){_imageWrapper.style.margin="auto";}wrap(image,_imageWrapper);}if(location.hostname!=='www.wday.ru'||!_imageWrapper.querySelector('.sarafan-button')){_imageWrapper.appendChild(button);}if(window.location.hostname=='fivmagazine.de'){var imageFloat=getComputedStyle(image).float;if(imageFloat!='none'){_imageWrapper.style.cssFloat=imageFloat;image.style.cssFloat='none';_imageWrapper.style.height=image.clientHeight;}}button.style.display='inline-flex';// initial position
button.style.left=_btnShiftX+'px';button.style.top=_btnShiftY+'px';var cartImgBtn=_imageWrapper.getElementsByClassName("sarafan-image__btn-container")[0];if(_corner==='topleft'){button.style.left=_btnShiftX+'px';button.style.top=_btnShiftY+'px';button.style.bottom=button.style.right='initial';}else if(_corner==='topright'){button.style.right=_btnShiftX+'px';button.style.top=_btnShiftY+'px';button.style.left=button.style.bottom='initial';}else if(_corner==='bottomleft'){button.style.bottom=_btnShiftY+'px';button.style.left=_btnShiftX+'px';button.style.top=button.style.right='initial';}else if(_corner==='bottomright'){button.style.right=_btnShiftX+'px';button.style.bottom=_btnShiftY+'px';button.style.left=button.style.top='initial';}else if(_corner==='bottomcenter'){if(cartImgBtn&&cartImgBtn.dataset.corner===_corner&&window.getComputedStyle(button).position==="absolute"){clearOffset(button);clearOffset(cartImgBtn);var btnsContainers=getBtnsContainer(_corner);button.style.bottom=_btnShiftY+'px';btnsContainers.appendChild(cartImgBtn);btnsContainers.appendChild(button);if(location.host==="www.wday.ru"&&_imageWrapper.classList.contains("swiper-zoom-container")){var panel=document.querySelector(".fullscreen-slider__bottom-panel");var offset;panel?offset=panel.offsetHeight-3:offset=45;offset=Math.max(offset,45);cartImgBtn.style.bottom=offset+"px";button.style.bottom=offset+_btnShiftY+"px";}if(location.host==="www.woman.ru"){var _offset=0;var gallery=_imageWrapper.closest(".gallery");if(gallery){var pager=gallery.getElementsByClassName("gallery-pager")[0];if(pager&&window.getComputedStyle(pager).position==="absolute"){_offset=pager.offsetHeight;}if(isMobile()){_offset=image.getBoundingClientRect().bottom-document.documentElement.clientHeight*0.89;if(_offset<0){_offset=0;}}}cartImgBtn.style.bottom=_offset+"px";button.style.bottom=_offset+_btnShiftY+"px";}_imageWrapper.appendChild(btnsContainers);}else{var btnWidthRect=button.getBoundingClientRect();var btnWidth=btnWidthRect.right-btnWidthRect.left;button.style.left='calc(50% - '+btnWidth/2+'px)';button.style.bottom=_btnShiftY+'px';button.style.top=button.style.right='initial';button.classList.add('sfn-bottomcenter');if(location.host==="www.gala.de"){button.style.left='calc(50% - '+64+'px)';}if(location.host==="www.wday.ru"&&_imageWrapper.classList.contains("swiper-zoom-container")){var _panel=document.querySelector(".fullscreen-slider__bottom-panel");var _offset2;_panel?_offset2=_panel.offsetHeight-3:_offset2=45;_offset2=Math.max(_offset2,45);button.style.bottom=_offset2+_btnShiftY+"px";}if(location.host==="www.woman.ru"){var _offset3=0;var _gallery=_imageWrapper.closest(".gallery");if(_gallery){var _pager=_gallery.getElementsByClassName("gallery-pager")[0];if(_pager&&window.getComputedStyle(_pager).position==="absolute"){_offset3=_pager.offsetHeight;}if(isMobile()){_offset3=image.getBoundingClientRect().bottom-document.documentElement.clientHeight*0.89;if(_offset3<0){_offset3=0;}}}button.style.bottom=_offset3+_btnShiftY+"px";}}}else if(_corner==='marginbottom'){button.style.position='initial';button.style.display='block';button.classList.add('sfn-marginbottom');// var btnWidthRect = button.getBoundingClientRect();
// var btnWidth = btnWidthRect.right - btnWidthRect.left;
// var btnHeight = btnWidthRect.bottom - btnWidthRect.top;
// button.style.left = 'calc(50% - ' + btnWidth / 2 +'px)';
// button.style.bottom = shift + 'px';
// button.style.top = button.style.right = 'initial';
// button.parentNode.style.paddingBottom = shift * 2 + btnHeight + 'px';
}}sarafanSDK.sendEvent(_objectSpread({type:"html.button",media:image,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:currentComponent},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{mode:"button"}));// first viewport button showing
inView('.'+buttonClass+'['+'data-sarafan-src="'+currentComponent.getAttribute('data-sarafan-src')+'"]').once('enter',function(){sarafanSDK.sendEvent(_objectSpread({type:"viewport.button",media:image,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:currentComponent},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{mode:"button"}));});if(window.sarafanSDK.site==='wmj'){imageWrapper.style.overflow='hidden';}}function clearOffset(btn){btn.style.position="relative";btn.style.left="initial";btn.style.top="initial";btn.style.bottom="initial";btn.style.right="initial";}function getBtnsContainer(corner){var btnsContainers=document.createElement("sfandiv");btnsContainers.classList.add("sarafan-buttons-container","sarafan-buttons-container-by-widget");btnsContainers.style.display="flex";btnsContainers.style.position="absolute";btnsContainers.style.bottom="0px";btnsContainers.style.justifyContent="center";btnsContainers.style.alignItems="flex-end";btnsContainers.style.width="100%";if(corner==='bottomcenter'){btnsContainers.style.bottom="0px";}return btnsContainers;}function getButton(dataImageSrc){return document.querySelector('.'+buttonClass+'['+'data-sarafan-src="'+dataImageSrc+'"]');}function hideSarafanButton(btn){if(!isHidden(btn)){btn.style.display='none';}}/* * * END * * */ /* RENDER & SHOW OFFERS BLOCK */ /*
    * Function make logic:
    * 1. hide offer panel if it's exists & displayed
    * 2. send to api about clicking
    * 3. create offers panel if it's not exist
    * 4. and if it's exist than do refreshing of offers panel template & setting attribute 'data-sarafan-src'
    * 5. fills the offers panel with goods
    * 6. sets the coordinates of offers panel
    * 7. correct offers panel position if it climbs out of the screen
    */function showSarafanButtonOffers(e,imageSrc,btn,image,mousePosition,imageData){checkCartIsClicked(e);e.stopPropagation();offers=document.querySelector('sfandiv[data-sarafan-src="'+imageSrc+'"]');if(offers&&!isHidden(offers)){offers.style.display='none';hideAllPanels();return false;}else hideAllPanels();if(window.sarafanSDK.site==='freundin'){imageSrc=imageSrc.replace('_mobile','').replace('product_single_s','product_single_l');imageSrc=imageSrc.replace(window.location.origin,'');}if(test)console.log('Sarafan widget: view action on image '+imageSrc);window.sarafanSDK.view(imageSrc,'button',version);if(!btn.classList.contains('sfn-first-clicked')&&JSON.stringify(mousePosition)!=='[0,0]'){btn.classList.add('sfn-first-clicked');sarafanSDK.sendEvent(_objectSpread({type:"click.button",component:btn},sarafanSDK.commonInfoCache[imageSrc],{media:image,tags:sarafanSDK.getTagsForPicture(imageSrc),mousePosition:mousePosition},imageData,{mode:"button"}));}if(!offers){offers=document.createElement('sfandiv');offers.id=sarafanOffersPanelClass;offers.classList.add(sarafanOffersPanelClass);if(_theme){offers.classList.add('theme-'+_theme);}offers.innerHTML=offersPanelTemplate;offers.setAttribute('data-sarafan-src',imageSrc);offers.addEventListener('click',function(event){checkCartIsClicked(event);event.stopPropagation();// if (test) console.log('stop propogation');
});if(_enableDblClick){var loader=document.createElement('div');loader.classList.add('loading1');loader.style.margin='-38% auto';offers.appendChild(loader);}}else{offers.style.display='inline-block';return true;// offers.innerHTML = offersPanelTemplate;
// offers.classList.remove('legacy-opened');
// offers.setAttribute('data-sarafan-src', imageSrc);
}offers.classList.add(sarafanButtonPanelClass);document.querySelector('body').appendChild(offers);offers.insertAdjacentHTML('afterbegin','<div class="close-area" onclick="this.parentNode.style.display=\'none\';"><div class="close-btn">'+'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 32.526 32.526" xml:space="preserve" width="9px" height="9px">'+'<polygon points="32.526,2.828 29.698,0 16.263,13.435 2.828,0 0,2.828 13.435,16.263 0,29.698 2.828,32.526 16.263,19.091   29.698,32.526 32.526,29.698 19.091,16.263 " fill="#FFFFFF"/>'+'</div></div>');var offersArr=window.sarafanSDK.getOffersForPicture(imageSrc),adOffersArr=window.sarafanSDK.getAdOffersForPicture(imageSrc);/* get complete the look cards */var completes=adOffersArr.filter(function(e){return e.type==='A';});/* get micromedia cards */var micromedia=adOffersArr.filter(function(e){return e.type==='adfox_mm';});/* get adfox cards */ // let ads = adOffersArr.filter(e => !completes.includes(e)).filter(e => e.type === 'adfox').filter(e => (e.insert_code_div).length > 5);
var ads=[];/* get promo cards */var promo=adOffersArr.filter(function(e){return e.type==='adfox_p';});/* get offers count for current resolution */var cnt=getOffersCnt(document.documentElement.clientWidth);/* Merge arrays with offers, ADs and complete the look's at the end */if(typeof window.Ya!=='undefined'&&typeof window.Ya.adfoxCode!=='undefined'){micromedia=micromedia.concat(ads);}var totalArr;if(_enableDblClick){var item={type:'doubleclick',place:'ad'};totalArr=insertAfterEach(offersArr,item,cnt-1).concat(completes);promo=Object.assign({},item);promo.place='promo';if(totalArr.length<3){promo.size='sm';}else{if(cnt<3){promo.size='sm';}}}else{totalArr=insertAdOffers(offersArr,micromedia,cnt-1).concat(completes);}if(totalArr.length===1||totalArr.length===2&&cnt>2){offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}else if(totalArr.length===3&&cnt>3){offers.classList.remove('sf-2');offers.classList.remove('sf-4');offers.classList.add('sf-3');}else{switch(cnt){case 1:case 2:{offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}break;case 3:{offers.classList.remove('sf-2');offers.classList.remove('sf-4');offers.classList.add('sf-3');}break;default:{offers.classList.remove('sf-2');offers.classList.remove('sf-3');offers.classList.add('sf-4');}break;}}/* Split offers by elements count */var sliced=splitArray(totalArr,cnt);if(_enableDblClick){if(promo)sliced.splice(1,0,[promo]);// if (promo.length > 0) sliced.splice(1, 0, promo);
if(promo.length>0)sliced.splice(1,0,promo);if(sliced[0].length===1){sliced[0].push({type:'doubleclick',place:'ad'});}dblClickCounter=1;}var sarafanOffers=offers.querySelector('.sarafan-offers');var btnCoordinates=getCoords(btn);var clientWidth=window.innerWidth||document.documentElement.clientWidth;var clientHeight=window.innerHeight||document.documentElement.clientHeight;offers.style.display='inline-block';offers.classList.add('count-'+totalArr.length);offers.dataset.countOffers=totalArr.length;// initial position for initial rendering
offers.style.left=0;offers.style.top=0;var btnRect=button.getBoundingClientRect();var btnWidth=btnRect.right-btnRect.left,btnHeight=btnRect.bottom-btnRect.top;var offersRect=offers.getBoundingClientRect();var offersWidth=offersRect.right-offersRect.left,offersHeight=offersRect.bottom-offersRect.top;var fixLeft=0,fixTop=0,addTop=0;// special for Eva
if(window.sarafanSDK.site==='eva'){fixTop=bodyOffsets.top;fixLeft=bodyOffsets.left;}// calculating the absolute TOP coordinate (relative to body) of the OFFER PANEL
// FORMULA:
// ATC = T0 + X * D / 100
// T0 - it is absolute TOP coordinate then offersPanelOffsetY = 0%
// X - it is offersPanelOffsetY in %
// D - it is how much pixels in 1%
var ATC;if(image.matches(".o-lightbox img")&&location.hostname==="www.gala.de"||location.host==="www.wday.ru"&&image.matches(".swiper-zoom-container img")||location.host==="www.woman.ru"&&image.matches(".gallery img")){ATC=btnCoordinates.top-offers.offsetHeight/2+btn.offsetHeight/2+(button.offsetHeight/2+offersShift+offersHeight/2)*-Math.abs(_offersPanelOffsetY)/100;}else{ATC=btnCoordinates.top-offers.offsetHeight/2+btn.offsetHeight/2+(button.offsetHeight/2+offersShift+offersHeight/2)*_offersPanelOffsetY/100;}if(_corner==='topleft'){// coords for dropping down (offers showing to down)
offers.style.left=btnCoordinates.left+'px';// offers.style.top = btnCoordinates.top + btn.offsetHeight + offersShift + 'px';
offers.style.top=ATC+'px';}else if(_corner==='topright'){// coords for dropping down (offers showing to down)
offers.style.left=btnCoordinates.left+btn.offsetWidth-offers.offsetWidth+'px';// offers.style.top = (btnCoordinates.top + btn.offsetHeight + offersShift) + 'px';
offers.style.top=ATC+'px';}else if(_corner==='bottomleft'){// coords for dropping down (offers showing to down)
offers.style.left=btnCoordinates.left+fixLeft+'px';// offers.style.top = btnCoordinates.top + btn.offsetHeight + offersShift - fixTop - addTop + 'px';
offers.style.top=ATC-fixTop-addTop+'px';// old coords for dropping up (offers showing to up)
// offers.style.left = btnCoordinates.left + 'px';
// offers.style.top = (btnCoordinates.top - offersHeight - offersShift) + 'px';
}else if(_corner==='bottomright'){// coords for dropping down (offers showing to down)
offers.style.left=btnCoordinates.left+btn.offsetWidth-offers.offsetWidth+fixLeft+'px';// offers.style.top = (btnCoordinates.top + btn.offsetHeight + offersShift - fixTop - addTop) + 'px';
offers.style.top=ATC-fixTop-addTop+'px';// if (test) console.log('left = ' + btnCoordinates.left + ' + ' + btn.offsetWidth + ' - ' + offers.offsetWidth + ' + ' +  bodyOffsets.left);
// if (test) console.log('top = ' + btnCoordinates.top + ' + ' + btnHeight + ' + ' + offersShift + ' - ' + bodyOffsets.top);
}else if(_corner==='bottomcenter'){// coords for dropping down (offers showing to down)
offers.style.left=btnCoordinates.left-offersWidth/2+btnWidth/2+fixLeft+'px';// offers.style.top = (btnCoordinates.top + btnHeight + offersShift - fixTop - addTop) + 'px';
offers.style.top=ATC-fixTop-addTop+'px';// var btnWidthRect = button.getBoundingClientRect();
// var btnWidth = btnWidthRect.right - btnWidthRect.left;
// button.style.left = 'calc(50% - ' + btnWidth / 2 +'px)';
// button.style.bottom = shift + 'px';
// button.style.top = 'initial';
}else if(_corner==='marginbottom'){offers.style.left=btnCoordinates.left-offersWidth/2+btnWidth/2+'px';offers.style.top=btnCoordinates.top+btnHeight+offersShift+'px';}if(btnCoordinates.left<0){offers.style.left=0;}if(btnCoordinates.top<0){offers.style.top=0;}if(location.host=="www.wday.ru"&&image.matches(".swiper-zoom-container img")){offers.style.top=Math.abs(parseInt(document.body.style.top))+parseInt(offers.style.top)+"px";offers.style.zIndex=99999;}else{checkElementPositionForViewport(offers,clientWidth,clientHeight);}if(test)console.log('_____________________________________________________      ____________________');if(test)console.log(sarafanOffers);// sarafanOffers.innerHTML += "";
var slider=generateSliderNode(sliced,sarafanOffers,offers,_objectSpread({mode:"button",component:btn},sarafanSDK.commonInfoCache[imageSrc],{media:image,tags:sarafanSDK.getTagsForPicture(imageSrc),mousePosition:mousePosition},imageData));if(dblClickQueue.length>0){dblClickQueue.forEach(function(v){dblClickRenderSlot(v.str,v.placement,v.resolutions,v.id,200);});var dblClicks=sarafanOffers.querySelectorAll('sfandiv.offer > div');setTimeout(function(){// slider.destroy();
var c=0;dblClicks.forEach(function(v){if(v.getAttribute('data-sf-empty')==='true'){c++;var s=v.parentNode.parentNode.children.length===1?v.parentNode.parentNode:v.parentNode;s.remove();}});if(c>0){if(c>1){offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}slider.rebuild();}sarafanOffers.style.visibility='visible';offers.querySelector('.loading1').remove();offers.querySelector('.sarafan-tns-controls').style.visibility='visible';},300);dblClickQueue=[];}// make listener for legacy information opener (button mode)
var legalOpener=offers.querySelector('.sarafan-offers-panel-footer');if(legalOpener){// legalOpener.addEventListener("click", () => { toggleLegacyOpened('.' + sarafanOffersPanelClass, 'legacy-opened'); event.stopPropagation(); });
legalOpener.addEventListener("click",function(){toggleLegacyOpened('.'+sarafanOffersPanelClass,'legacy-opened');checkCartIsClicked(event);event.stopPropagation();});}}function insertAfterEach(arr,item,each){return arr.reduce(function(r,v,i){return(i+1)%each===0?r.concat(v,item):r.concat(v);},[]);}/* render inpicture */function showSarafanInPicOffers(e,imageSrc,btn,imgCoords,imgStyle){checkCartIsClicked(e);e.stopPropagation();offers=document.getElementById(sarafanInPicturePanelClass);if(offers&&!isHidden(offers)){offers.style.display='none';if(offers.getAttribute('data-sarafan-src')===imageSrc){return false;}}if(test)console.log('Sarafan widget: view action on image '+imageSrc);window.sarafanSDK.view(imageSrc,'button',version);if(!offers){offers=document.createElement('sfandiv');offers.id=sarafanInPicturePanelClass;offers.classList.add(sarafanOffersPanelClass);if(_theme){offers.classList.add('theme-'+_theme);}offers.innerHTML=offersPanelTemplate;offers.setAttribute('data-sarafan-src',imageSrc);offers.addEventListener('click',function(event){checkCartIsClicked(event);event.stopPropagation();// if (test) console.log('stop propogation');
});}else{offers.innerHTML=offersPanelTemplate;offers.classList.remove('legacy-opened');offers.setAttribute('data-sarafan-src',imageSrc);}document.querySelector('body').appendChild(offers);offers.insertAdjacentHTML('afterbegin','<div class="close-area" onclick="this.parentNode.style.display=\'none\';"><div class="close-btn">'+'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 32.526 32.526" xml:space="preserve" width="9px" height="9px">'+'<polygon points="32.526,2.828 29.698,0 16.263,13.435 2.828,0 0,2.828 13.435,16.263 0,29.698 2.828,32.526 16.263,19.091   29.698,32.526 32.526,29.698 19.091,16.263 " fill="#FFFFFF"/>'+'</div></div>');var offersArr=window.sarafanSDK.getOffersForPicture(imageSrc),adOffersArr=window.sarafanSDK.getAdOffersForPicture(imageSrc);/* get complete the look cards */var completes=adOffersArr.filter(function(e){return e.type==='A';});/* get micromedia cards */var micromedia=adOffersArr.filter(function(e){return e.type==='adfox_mm';});/* get adfox cards */var ads=adOffersArr.filter(function(e){return!completes.includes(e);}).filter(function(e){return e.type==='adfox';}).filter(function(e){return e.insert_code_div.length>5;});/* get promo cards */var promo=adOffersArr.filter(function(e){return e.type==='adfox_p';});/* get offers count for current resolution */var cnt=getOffersCnt(parseInt(imgStyle.width));/* Merge arrays with offers, ADs and complete the look's at the end */if(typeof window.Ya!=='undefined'&&typeof window.Ya.adfoxCode!=='undefined'){micromedia=micromedia.concat(ads);}var totalArr=insertAdOffers(offersArr,micromedia,cnt-1).concat(completes);if(totalArr.length===1||totalArr.length===2&&cnt>2){offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}else if(totalArr.length===3&&cnt>3){offers.classList.remove('sf-2');offers.classList.remove('sf-4');offers.classList.add('sf-3');}else{switch(cnt){case 1:case 2:{offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}break;case 3:{offers.classList.remove('sf-2');offers.classList.remove('sf-4');offers.classList.add('sf-3');}break;default:{offers.classList.remove('sf-2');offers.classList.remove('sf-3');offers.classList.add('sf-4');}break;}}/* Split offers by elements count */var sliced=splitArray(totalArr,cnt);if(promo.length>0)sliced.splice(1,0,promo);var sarafanOffers=offers.querySelector('.sarafan-offers');// let max = Math.min(24, totalArr.length);
// sliced.forEach(function (e) {
//
//     /* generate slide with offers, ads, promo and mm*/
//
//     sarafanOffers.appendChild(generateSarafanSlide(e, cnt));
// });
var btnCoordinates=getCoords(btn);var clientWidth=window.innerWidth||document.documentElement.clientWidth;var clientHeight=window.innerHeight||document.documentElement.clientHeight;offers.style.display='inline-block';offers.classList.add('count-'+totalArr.length);offers.dataset.countOffers=totalArr.length;// initial position for initial rendering
offers.style.left=0;offers.style.top=0;var btnRect=button.getBoundingClientRect();var btnWidth=btnRect.right-btnRect.left,btnHeight=btnRect.bottom-btnRect.top;var offersRect=offers.getBoundingClientRect();var offersWidth=offersRect.right-offersRect.left,offersHeight=offersRect.bottom-offersRect.top;var fixLeft=0,fixTop=0,addTop=0;// special for Eva
if(window.sarafanSDK.site==='eva'){fixTop=bodyOffsets.top;fixLeft=bodyOffsets.left;}offers.style.left=parseInt(imgCoords.left+2)+'px';offers.style.top=parseInt(imgStyle.height)-330+parseInt(imgCoords.top)+'px';offers.style.width=parseInt(imgStyle.width)-2+'px';// offers.style.height = imgStyle.height;
offers.classList.add('sf-wip-mode');// checkElementPositionForViewport(offers, clientWidth, clientHeight);
if(test)console.log('_____________________________________________________  INPICTURE    ____________________');if(test)console.log(sarafanOffers);// sarafanOffers.innerHTML += "";
var slider=generateSliderNode(sliced,sarafanOffers,offers);// make listener for legacy information opener (button mode)
var legalOpener=offers.querySelector('.sarafan-offers-panel-footer');if(legalOpener){// legalOpener.addEventListener("click", () => { toggleLegacyOpened('.' + sarafanOffersPanelClass, 'legacy-opened'); event.stopPropagation(); });
legalOpener.addEventListener("click",function(){toggleLegacyOpened('.'+sarafanOffersPanelClass,'legacy-opened');checkCartIsClicked(event);event.stopPropagation();});}}/* generate block with offers and ads in pin */function showSarafanPinOffers(imageSrc,pinsOffers,pin,yPos,imageCoords,imageWidth,image,imageData){offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(imageSrc,"\"]"));hideAllPanels();if(test)console.log('Sarafan widget: view action on image '+imageSrc);window.sarafanSDK.view(imageSrc,'button',version);if(!offers){offers=document.createElement('sfandiv');offers.id=sarafanOffersPanelClass;offers.classList.add(sarafanOffersPanelClass);if(_theme){offers.classList.add('theme-'+_theme);}offers.innerHTML=offersPanelTemplate;offers.setAttribute('data-sarafan-src',imageSrc);offers.addEventListener('click',function(event){checkCartIsClicked(event);event.stopPropagation();// if (test) console.log('stop propogation');
});}else{offers.innerHTML=offersPanelTemplate;offers.classList.remove('legacy-opened');offers.setAttribute('data-sarafan-src',imageSrc);}offers.classList.add(sarafanPinPanelClass);document.querySelector('body').appendChild(offers);offers.insertAdjacentHTML('afterbegin','<div class="close-area" onclick="{'+'this.parentNode.style.display=\'none\'; '+'let buttonsForGlamour = document.getElementsByClassName(\'pin-div-glamour\');'+'        for (let i = 0; i< buttonsForGlamour.length; i++) {'+'            buttonsForGlamour[i].classList.remove(\'pin-div-glamour-active\');'+'        }}"><div class="close-btn">'+'  <svg style="top: -4px;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">'+'    <defs>'+'        <path id="a" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>'+'    </defs>'+'    <g fill="none" fill-rule="evenodd">'+'        <path d="M0 0h24v24H0z"/>'+'        <mask id="b" fill="#fff">'+'            <use xlink:href="#a"/>'+'        </mask>'+'        <use fill="#fff" xlink:href="#a"/>'+'        <g fill="#fff" mask="url(#b)">'+'            <path d="M0 0h24v24H0z"/>'+'        </g>'+'    </g>'+'</svg>'+'</div></div>');var adOffersArr=window.sarafanSDK.getAdOffersForPicture(imageSrc),elementsCounter=1;var offersArr=pinsOffers;if(offersArr.length>=4){elementsCounter=3;}else if(offersArr.length===3){elementsCounter=3;}else if(offersArr.length===2){elementsCounter=2;}else if(offersArr.length===1){}/* for mobile versions, when resolution less then mobileMinWidth 'px' slider shows 2 offers */if(checkMobileRes())elementsCounter=1;/* get complete the look cards */var completes=adOffersArr.filter(function(e){return e.type==='A';});/* get micromedia cards */var micromedia=adOffersArr.filter(function(e){return e.type==='adfox_mm';});/* get adfox cards */var ads=adOffersArr.filter(function(e){return!completes.includes(e);}).filter(function(e){return e.type==='adfox';}).filter(function(e){return e.insert_code_div.length>5;});/* get promo cards */var promo=adOffersArr.filter(function(e){return e.type==='adfox_p';});/* get offers count for current resolution */var cnt=getOffersCnt(document.documentElement.clientWidth);/* Merge arrays with offers, ADs and complete the look's at the end */if(typeof window.Ya!=='undefined'&&typeof window.Ya.adfoxCode!=='undefined'){micromedia=micromedia.concat(ads);}var totalArr=insertAdOffers(offersArr,micromedia,cnt-1).concat(completes);if(totalArr.length===1||totalArr.length===2&&cnt>2){offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}else if(totalArr.length===3&&cnt>3){offers.classList.remove('sf-2');offers.classList.remove('sf-4');offers.classList.add('sf-3');}else{switch(cnt){case 1:case 2:{offers.classList.remove('sf-4');offers.classList.remove('sf-3');offers.classList.add('sf-2');}break;case 3:{offers.classList.remove('sf-2');offers.classList.remove('sf-4');offers.classList.add('sf-3');}break;default:{offers.classList.remove('sf-2');offers.classList.remove('sf-3');offers.classList.add('sf-4');}break;}}/* Split offers by elements count */var sliced=splitArray(totalArr,cnt);if(promo.length>0)sliced.splice(1,0,promo);var sarafanOffers=offers.querySelector('.sarafan-offers');var pinCoordinates=getCoords(pin);var clientWidth=window.innerWidth||document.documentElement.clientWidth;var clientHeight=window.innerHeight||document.documentElement.clientHeight;offers.style.display='inline-block';offers.classList.add('count-'+totalArr.length);offers.dataset.countOffers=totalArr.length;// initial position for initial rendering
offers.style.left=0;offers.style.top=0;// var btnRect = button.getBoundingClientRect();
// var btnWidth = btnRect.right - btnRect.left, btnHeight = btnRect.bottom - btnRect.top;
// var offersRect = offers.getBoundingClientRect();
// var offersWidth = offersRect.right - offersRect.left, offersHeight = offersRect.bottom - offersRect.top;
var fixLeft=0,fixTop=0,addTop=0;// special for Eva
if(window.sarafanSDK.site==='eva'){fixTop=bodyOffsets.top;fixLeft=bodyOffsets.left;}var yOffset=0;if(yPos>70){yOffset=offers.offsetHeight+60;}offers.style.top=pinCoordinates.top-yOffset+50+'px';offers.style.left=pinCoordinates.left+'px';checkElementPositionForViewport(offers,clientWidth,clientHeight);if(test)console.log('_____________________________________________________      ____________________');if(test)console.log(sarafanOffers);var slider=generateSliderNode(sliced,sarafanOffers,offers,_objectSpread({media:image,tags:sarafanSDK.getTagsForPicture(imageSrc),component:offers},sarafanSDK.commonInfoCache[imageSrc],imageData,{mode:'pin'}));pin.classList.add('pin-div-glamour-active');// make listener for legacy information opener (button mode)
var legalOpener=offers.querySelector('.sarafan-offers-panel-footer');if(legalOpener){// legalOpener.addEventListener("click", () => { toggleLegacyOpened('.' + sarafanOffersPanelClass, 'legacy-opened'); event.stopPropagation(); });
legalOpener.addEventListener("click",function(){toggleLegacyOpened('.'+sarafanOffersPanelClass,'legacy-opened');checkCartIsClicked(event);event.stopPropagation();});}}/* generate widget under the photo */function showSarafanViewBlock(image,imageData){if(!_enableViewMode){if(test)console.log('Option enableViewMode is disabled. ');return false;}if(image.classList.contains('sarafan-hidden')){if(test)console.log('Class sarafan-hidden stopped rendering of widget on image '+image.src);return false;}var dataImageSrc=getImageSrc(image);if(!window.sarafanSDK.hasOffers(dataImageSrc)){return false;}var offers=document.querySelector('sfandiv[data-sarafan-src="'+dataImageSrc+'"]'),widgetWrapper;// if no SFANDIV try to get DIV. perhaps he has been added manually by moderator of site
if(!offers){offers=document.querySelector('div[data-sarafan-src="'+dataImageSrc+'"]');}if(offers){offers.classList.add(sarafanViewPanelClass);offers.innerHTML=offersPanelTemplate;if(_theme)offers.classList.add('theme-'+_theme);widgetWrapper=offers.parentNode;}else{offers=document.createElement('sfandiv');offers.classList.add(sarafanViewPanelClass);offers.setAttribute('data-sarafan-src',dataImageSrc);offers.innerHTML=offersPanelTemplate;widgetWrapper=document.createElement('sfandiv');widgetWrapper.style.display='block';widgetWrapper.classList.add('sarafan-view');widgetWrapper.appendChild(offers);//const cartImgBtn = imageWrapper.getElementsByClassName("sarafan-image__btn-container")[0];
if(viewsTitleText){var viewsTitleTextObject=document.createElement('sfandiv');viewsTitleTextObject.classList.add('sarafan-title');viewsTitleTextObject.innerText=viewsTitleText;widgetWrapper.prepend(viewsTitleTextObject);}var _imageWrapper2;// check rule existion & view-block position
if(imageData&&imageData.imageRule){insertElementIntoDom(widgetWrapper,image,imageData.imageRule);}else if(location.host==="www.brigitte.de"&&image.matches(".o-media-gallery-item img")){insertElementIntoDom(widgetWrapper,image,{parentSelector:".o-media-gallery-item",prevNeighbourSelector:".o-media-gallery-item__content-wrapper"});}else if(location.host==="www.arcor.de"&&image.matches(".image-slider-wrapper img")){insertElementIntoDom(widgetWrapper,image,{parentSelector:"li"});checkViewPanelVisibility(widgetWrapper);}else{// wrap image and append offersWrapper to imageWrapper
_imageWrapper2=image.closest("."+emptyWrapperClass);if(!_imageWrapper2){_imageWrapper2=document.createElement('sfandiv');_imageWrapper2.classList.add(emptyWrapperClass);var imageStyles=window.getComputedStyle(image);_imageWrapper2.style.height='100%';_imageWrapper2.style.width=imageStyles.width;_imageWrapper2.style.margin=imageStyles.margin;wrap(image,_imageWrapper2);}_imageWrapper2.appendChild(widgetWrapper);}if(_theme){if(_imageWrapper2)_imageWrapper2.classList.add('theme-'+_theme);offers.classList.add('theme-'+_theme);}offers.addEventListener('click',function(event){checkCartIsClicked(event);event.stopPropagation();if(test)console.log('stop propogation');});}var offersArr=window.sarafanSDK.getOffersForPicture(dataImageSrc),adOffersArr=window.sarafanSDK.getAdOffersForPicture(dataImageSrc),elementsCounter=3;offers.dataset.countOffers=offersArr.length;var sarafanOffers=offers.querySelector('.sarafan-offers');/* for mobile versions, when resolution less then mobileMinWidth 'px' slider shows 2 offers */if(checkMobileRes())elementsCounter=1;/* get complete the look cards */var completes=adOffersArr.filter(function(e){return e.type==='A';});/* get micromedia cards */var micromedia=adOffersArr.filter(function(e){return e.type==='adfox_mm';});/* get adfox cards */var ads=adOffersArr.filter(function(e){return!completes.includes(e);}).filter(function(e){return e.type==='adfox';}).filter(function(e){return e.insert_code_div.length>5;});/* get promo cards */var promo=adOffersArr.filter(function(e){return e.type==='adfox_p';});var imgWidth=window.getComputedStyle(image).width,wrapperWidth=window.getComputedStyle(widgetWrapper).width;/* get offers count for current resolution */var cnt=getOffersCnt(parseInt(wrapperWidth));/* Merge arrays with offers, ADs and complete the look's at the end */if(typeof window.Ya!=='undefined'&&typeof window.Ya.adfoxCode!=='undefined'){micromedia=micromedia.concat(ads);}var totalArr=insertAdOffers(offersArr,micromedia.concat(ads),cnt-1).concat(completes);/* Split offers by elements count */var sliced=splitArray(totalArr,cnt);if(promo.length>0)sliced.splice(1,0,promo);offers.style.width=imgWidth-2;var slider=generateSliderNode(sliced,sarafanOffers,offers,_objectSpread({media:image,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:offers},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{mode:'view'}));// make listener for legacy information opener (view mode)
var legalOpener=offers.querySelector('.sarafan-offers-panel-footer');if(legalOpener){legalOpener.addEventListener("click",function(){toggleLegacyOpened('sfandiv[data-sarafan-src="'+dataImageSrc+'"]','legacy-opened');checkCartIsClicked(event);event.stopPropagation();});}window.sarafanSDK.view(dataImageSrc,'view',version);// first viewport view mode showing
inView('.'+sarafanViewPanelClass+'['+'data-sarafan-src="'+offers.getAttribute('data-sarafan-src')+'"]').once('enter',function(){sarafanSDK.sendEvent(_objectSpread({type:"viewport.view",media:image,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:offers},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{mode:"view"}));});sarafanSDK.sendEvent(_objectSpread({type:"html.view",media:image,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:offers},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{mode:"view"}));}/* generate floor block */function populateNextFloor(){if(!nextFloor)return false;var floorWrapper=nextFloor.querySelector('.'+sarafanFloorPanelClass);var findFloor=true;if(!floorWrapper){floorWrapper=document.createElement('sfandiv');findFloor=false;}if(window.sarafanSDK.cacheQueueStatus==true){if(!findFloor){floorWrapper.classList.add(sarafanFloorPanelClass,sarafanViewPanelClass);floorWrapper.innerHTML=offersPanelTemplate;if(_theme){floorWrapper.classList.add('theme-'+_theme);nextFloor.classList.add('theme-'+_theme);}var floorWrapperTitle=document.createElement('sfandiv');floorWrapperTitle.classList.add('sarafan-title');floorWrapperTitle.textContent='   ';var cosmoTag=getLocationHref().indexOf('sex/')!==-1?'sex':'';if(optionsFromApiData.floorWrapperSubTitles&&optionsFromApiData.floorWrapperSubTitles.length!==0){optionsFromApiData.floorWrapperSubTitles.some(function(row){row.tags=row.tags?Object.values(row.tags):[];if(row.text){if(!row.language||row.language===_language){if(row.tags.length===0||row.tags.includes(cosmoTag)){_floorWrapperSubTitle=row.text;return true;}}}});}if(optionsFromApiData.floorWrapperDescriptions&&optionsFromApiData.floorWrapperDescriptions.length!==0){optionsFromApiData.floorWrapperDescriptions.some(function(row){row.tags=row.tags?Object.values(row.tags):[];if(row.text){if(!row.language||row.language===_language){if(row.tags.length===0||row.tags.includes(cosmoTag)){floorWrapperDescription=row.text;return true;}}}});}if(_floorWrapperSubTitle){floorWrapperTitle.textContent=_floorWrapperSubTitle;}if(window.sarafanSDK.site==='cosmo'){nextFloor.appendChild(floorWrapperTitle);if(floorWrapperDescription){nextFloor.insertAdjacentHTML('beforeend','<sfandiv class="sarafan-description">'+floorWrapperDescription+'</sfandiv>');}}else{floorWrapper.prepend(floorWrapperTitle);}nextFloor.style.display='block';nextFloor.appendChild(floorWrapper);floorWrapper.addEventListener('click',function(event){checkCartIsClicked(event);event.stopPropagation();if(test)console.log('stop propogation');});}var countOffers=floorWrapper.dataset.countOffers;if(!countOffers){countOffers=0;}var sarafanOffers=floorWrapper.querySelector('.sarafan-offers');var adBanners=[];var micromedias=[];var promos=[];var totalOffers=[];window.floorCount=window.floorCount?window.floorCount:1;while(Object.keys(window.sarafanSDK.cacheQueue).length>0){for(var src in window.sarafanSDK.cacheQueue){var rule=Object.keys(imagesDataArray).find(function(key){return imagesDataArray[key]['url']===src;})||false;var isHiddenOffer=false;if(rule){isHiddenOffer='imageRule'in imagesDataArray[rule]||false?imagesDataArray[rule]['imageRule']!=null&&'hidden'in imagesDataArray[rule]['imageRule']||false?imagesDataArray[rule]['imageRule']['hidden']:false:false;}if(Object.keys(window.sarafanSDK.cacheQueue[src]).length>0&&isHiddenOffer==false){var adOffersArr=window.sarafanSDK.getAdOffersForPicture(src);totalOffers.push(window.sarafanSDK.cacheQueue[src].shift());// sarafanOffers.appendChild(getSarafanOffer(item), 'floor');
/* get other ads cards */var ads=adOffersArr.filter(function(e){return e.type==='adfox'||e.type==='dblclick';}).filter(function(e){return e.insert_code_div.length>5;});/* get micromedia cards */var micromedia=adOffersArr.filter(function(e){return e.type==='adfox_mm';});/* get promo cards */var _promo=adOffersArr.filter(function(e){return e.type==='adfox_p';});if(ads.length>0){var _adBanners;(_adBanners=adBanners).push.apply(_adBanners,_toConsumableArray(ads));}if(micromedia.length>0){var _micromedias;(_micromedias=micromedias).push.apply(_micromedias,_toConsumableArray(micromedia));}if(_promo.length>0){promos.push.apply(promos,_toConsumableArray(_promo));}countOffers++;}else{delete window.sarafanSDK.cacheQueue[src];}}}window.sarafanSDK.clearCacheQueue();// for to be sure
if(!findFloor){window.sarafanSDK.incrementFloorId();}var elementsCounter=3;if(countOffers>=4){// floorWrapper.classList.add('max-size-4-offers');
}else if(countOffers===3){// floorWrapper.classList.add('max-size-3-offers');
}else if(countOffers===2){elementsCounter=2;// floorWrapper.classList.add('max-size-2-offers');
}else{elementsCounter=1;// floorWrapper.classList.add('max-size-1-offer');
}floorWrapper.dataset.countOffers=countOffers;/* for mobile versions, when resolution less then mobileMinWidth 'px' slider shows 2 offers */if(checkMobileRes())elementsCounter=1;/* get offers count for current resolution */var cnt=getOffersCnt(document.documentElement.clientWidth);micromedias=uniqueByProperty(micromedias,'url');adBanners=uniqueByProperty(adBanners,'insert_code_div');var promo=[];/* Merge arrays with offers, ADs and complete the look's at the end */if(typeof window.Ya!=='undefined'&&typeof window.Ya.adfoxCode!=='undefined'){micromedias=micromedias.concat(adBanners);}var totalArr;if(_enableDblClick){var item={type:'doubleclick',place:'ad'};totalArr=insertAfterEach(uniqueByProperty(totalOffers,'buyurl'),item,cnt-1);console.log(totalArr);promo=Object.assign({},item);promo.place='promo';if(totalArr.length<3){promo.size='sm';}else{if(cnt<3){promo.size='sm';}}}else{totalArr=insertAdOffers(uniqueByProperty(totalOffers,'buyurl'),micromedias,cnt-1);}if(totalArr.length===1||totalArr.length===2&&cnt>2){floorWrapper.classList.remove('sf-floor-4');floorWrapper.classList.remove('sf-floor-3');floorWrapper.classList.add('sf-floor-2');}else if(totalArr.length===3&&cnt>3){floorWrapper.classList.remove('sf-floor-2');floorWrapper.classList.remove('sf-floor-4');floorWrapper.classList.add('sf-floor-3');}else{switch(cnt){case 1:case 2:{floorWrapper.classList.remove('sf-floor-4');floorWrapper.classList.remove('sf-floor-3');floorWrapper.classList.add('sf-floor-2');}break;case 3:{floorWrapper.classList.remove('sf-floor-2');floorWrapper.classList.remove('sf-floor-4');floorWrapper.classList.add('sf-floor-3');}break;default:{floorWrapper.classList.remove('sf-floor-2');floorWrapper.classList.remove('sf-floor-3');floorWrapper.classList.add('sf-floor-4');}break;}}/* Split offers by elements count */var splice=splitArray(totalArr,cnt);if(_enableDblClick){if(promo)splice.splice(1,0,[promo]);// if (promo.length > 0) sliced.splice(1, 0, promo);
if(promo.length>0)sliced.splice(1,0,promo);if(splice[0].length===1){splice[0].push({type:'doubleclick',place:'ad'});}}// special for COSMO data sciencer
if(window.sarafanSDK.site==='cosmo'){sarafanOffers.querySelectorAll('[data-ga="SarafanButton"]').forEach(function(v){return v.setAttribute('data-ga','SarafanWidjet');});}// fix for mobile version and CPM
var slideWidth=130;if(!findFloor){sarafanSDK.getIncrementedWidgetId();}var slider=generateSliderNode(splice,sarafanOffers,floorWrapper,{mode:"floor",component:floorWrapper,widgetId:sarafanSDK.lastWidgetId});// make listener for legacy information opener (floor mode)
var legalOpener=floorWrapper.querySelector('.sarafan-offers-panel-footer');if(legalOpener){legalOpener.addEventListener("click",function(){toggleLegacyOpened(floorWrapper,'legacy-opened');checkCartIsClicked(event);event.stopPropagation();});}floorWrapper.dataset.floorId=sarafanSDK.nextFloorId;sarafanSDK.sendEvent({type:"html.floor",component:floorWrapper,widgetId:sarafanSDK.lastWidgetId,mode:"floor"});// first viewport floor
inView('.'+sarafanFloorPanelClass+'[data-floor-id="'+sarafanSDK.nextFloorId+'"]').once('enter',function(){sarafanSDK.sendEvent({type:"viewport.floor",component:floorWrapper,widgetId:sarafanSDK.lastWidgetId,mode:"floor"});});if(!findFloor){sarafanSDK.incrementFloorId();window.floorCount++;}nextFloor.classList.add('sarafan-loaded');nextFloor=null;}}var addPsToURL=function addPsToURL(url){var tempUrl=new URL(url);var params=new URLSearchParams(tempUrl.search);params.set('ps',window.sarafanSDK.pageSessionId);return tempUrl.protocol+'//'+tempUrl.host+tempUrl.pathname+'?'+params.toString();};/*
    * returns next floor Node
    * */function getNextFloor(){if(window.sarafanSDK.rulesFromApiData&&window.sarafanSDK.rulesFromApiData['floor']){// TODO make behaviour with rule. return first inserted sarafan rulepanel wrapper
}else{}var floor=document.querySelector('.'+floorClass+'[data-url="'+window.location.href+'"]');if(!floor){floor=document.querySelector('.'+floorClass+':not(.sarafan-loaded)');floor.setAttribute('data-url',window.location.href);}return floor;}/* generate one offer card, also with complete the look */function getSarafanOffer(offer,mode,player,dataForStat){var div=document.createElement('sfandiv');if(mode==='video'&&offer.type==='P'){div.innerHTML='<a class="offer-link" href="'+addPsToURL(offer.buyurl)+'" target="_blank"><img src="'+offer.picture+'" class="offer-image"></a>';div.classList.add('offer');div.classList.add('type-P');div.id='offer_'+offer.id;return div;}div.innerHTML=offerTemplate;div.classList.add('offer');div.id='offer_'+offer.offer_id;div.dataset.id=offer.product_id;var offerLink=div.querySelector('a.offer-link');if(offer.type){div.classList.add('type-'+offer.type);if(additionalOfferText&&offer.type=='A'){offerLink.insertAdjacentHTML('afterbegin','<sfandiv class="offer-title">'+additionalOfferText+'</sfandiv>');}}var cosmoAttr=window.sarafanSDK.site==='cosmo'?'data-ga="SarafanButton"':'';var percent=calculateSalePercent(offer);if(offerLink&&offer.buyurl){var clickListener=function clickListener(event){event.preventDefault();var mousePosition=[event.clientX,event.clientY];var component=div;sarafanSDK.sendEvent(_objectSpread({type:"click.offer"},dataForStat,{offersData:[offer],component:component,mousePosition:mousePosition}));window.open(addPsToURL(offer.buyurl),'_blank');};offerLink.setAttribute('href','javascript:void(0)');offerLink.addEventListener('click',clickListener,false);offerLink.addEventListener('auxclick',clickListener,false);}var img=div.querySelector('img');if(_enableLazyLoad&&!['button','video'].includes(mode)){img.setAttribute('sarafansrc',offer.picture);img.setAttribute('src','https://sarafan.tech/widget/img/loader.gif');}else{img.setAttribute('src',offer.picture);}if(_showPrice){var priceDiv=div.querySelector('.offer-price');var currentPriceDiv=document.createElement('sfanspan');currentPriceDiv.classList.add('offer-price-current');currentPriceDiv.innerHTML='<sfanspan class="offer-price-digit" '+cosmoAttr+'>'+offer.price+'</sfanspan>&nbsp;<sfanspan class="offer-currency" '+cosmoAttr+'>'+getCurrencyLetter(offer.currency)+'</sfanspan>';priceDiv.appendChild(currentPriceDiv);if(percent>0){var oldPriceDiv=document.createElement('sfanspan');oldPriceDiv.classList.add('offer-price-old');oldPriceDiv.innerHTML='<sfanspan class="offer-price-digit" '+cosmoAttr+'>'+offer.old_price+'</sfanspan>&nbsp;<sfanspan class="offer-currency" '+cosmoAttr+'>'+getCurrencyLetter(offer.currency)+'</sfanspan>';priceDiv.appendChild(oldPriceDiv);}}div.querySelector('sfandiv.offer-seller').innerHTML=offer.brand;div.querySelector('sfandiv.offer-name').innerHTML=offer.name;if(offer.legal_info){div.querySelector('sfandiv.offer-legal-info').innerHTML='<sfanspan>'+offer.legal_info+'</sfanspan>';}return div;}/* return offers for picture */function loadOffersForPictures(imagesDataArray){if(!baseApiUrl){if(test)console.log('Sarafan widget error: base API url is not defined.');return false;}if(window.sarafanSDK.site==='freundin'){if(test)console.log('_______________FREUNDIN_________________');imagesDataArray=imagesDataArray.map(function(v){return{imageRule:v.imageRule,mode:v.mode,url:v.url.replace('_mobile','').replace('product_single_s','product_single_l')};});}if(!imagesDataArray||!imagesDataArray.length){return false;}window.sarafanSDK.search(imagesDataArray,_pageMode,version,getPageTitle(),getPageHeader(),getLocationHref()).then(function(){// working for button & view mode
imagesDataArray.forEach(function(imageData){var dataImageSrc=imageData.url,image=imageData.node;showSarafanPins(dataImageSrc,image,imageData);var venom=getSarafanVenom(dataImageSrc);var venomImg=getSarafanVenomImg(dataImageSrc);if(venom.length>0){return showSarafanVenom(venom[0],image);}if(venomImg.length>0){return showSarafanVenom(venomImg[0],image);}if(window.sarafanSDK.site==='freundin'){var dataImageSrcFreundin=dataImageSrc.replace('_mobile','').replace('product_single_s','product_single_l');dataImageSrcFreundin=dataImageSrcFreundin.replace(window.location.origin,'');if(!window.sarafanSDK.hasOffers(dataImageSrcFreundin)){if(test){console.log('Resulsts for freundin'+dataImageSrcFreundin);}return false;}}else{if(!window.sarafanSDK.hasOffers(dataImageSrc)){if(test){console.log('Search '+dataImageSrc+' has not shown results. Show widget return false. ');}return false;}}var listener=function listener(event){if(test)console.log('Function "listener" on event load worked for image: '+dataImageSrc);if(!checkImageDimensions(image)){return false;}window.imagesDataArray=imagesDataArray;// console.log('imageData');
// console.log(imageData);
if(imageData['mode']==='button'||imageData['mode']==='inpicture'){showSarafanButton(image,imageData);}else if(imageData['mode']==='view'){showSarafanViewBlock(image,imageData);}};if(image.complete){if(test)console.log(' '+dataImageSrc+'   ');//for lazy load in elle, brigitte
if(/lazy/.test(image.className)&&image.clientWidth<=50&&image.naturalWidth<=50){image.addEventListener('load',listener,false);}else{listener();}}else if(_processImageObject&&image.hasAttribute('itemtype')){listener();}else{if(test)console.log('  load   '+dataImageSrc);image.addEventListener('load',listener,false);}});if(location.hostname==="www.ellegirl.ru"){var fBtn=document.querySelector('.swiper-slide-active .sarafan-button');var src=fBtn.getAttribute('data-sarafan-src');if(fBtn&&src){setTimeout(function(){var offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(src,"\"]"));if(!offers){fBtn.click();}},1500);setTimeout(function(){var offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(src,"\"]"));if(offers&&offers.style.display!=='none'){fBtn.click();}},6500);}}if(location.hostname==="www.woman.ru"){var _fBtn=document.querySelector('.sarafan-button');if(_fBtn){var _src=_fBtn.getAttribute('data-sarafan-src');var img=_fBtn.closest(".sarafan-empty-div").querySelector("img");if(img&&_src&&!img.matches(".gallery img")){setTimeout(function(){var offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(_src,"\"]"));if(!offers){_fBtn.click();}},100);setTimeout(function(){var offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(_src,"\"]"));if(offers&&offers.style.display!=='none'){_fBtn.click();}},5100);}}}if(location.hostname==="www.wday.ru"){var _fBtn2=document.querySelector('.sarafan-button');var _src2;if(_fBtn2.matches(".swiper-wrapper .sarafan-button")){_fBtn2=document.querySelectorAll('.sarafan-button')[1];}if(_fBtn2){_src2=_fBtn2.getAttribute('data-sarafan-src');}if(_fBtn2&&_src2){setTimeout(function(){var offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(_src2,"\"]"));if(!offers){_fBtn2.click();}},100);setTimeout(function(){var offers=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(_src2,"\"]"));if(offers&&offers.style.display!=='none'){_fBtn2.click();}},5100);}}// working for floor mode. getting nextFloor
// maybe it was added with new HTML by Mutation Observer
// if not empty nextFloor then it's already isset and not filled (no "sarafan-loaded" class)
if(_enableFloorMode){if(nextFloor)return false;nextFloor=getNextFloor();}}).then(function(){updateCart();});}function removeClassForGlamourPins(){var buttonsForGlamour=document.getElementsByClassName('pin-div-glamour');for(var i=0;i<buttonsForGlamour.length;i++){buttonsForGlamour[i].classList.remove('pin-div-glamour-active');}}// function calculateFirstPin(pin, pinDiv, pinObj) {
//     if (pinObj.middlePin === false) {
//         pinObj.middlePin = Math.abs(pin.y - 50);
//         pinObj.div = pinDiv;
//     } else if (Math.abs(pin.y - 50) < pinObj.middlePin) {
//         pinObj.middlePin = Math.abs(pin.y - 50);
//         pinObj.div = pinDiv;
//     }
//
//     return pinObj;
// }
function getSarafanVenom(imageSrc){var adOffers=window.sarafanSDK.getAdOffersForPicture(imageSrc);return adOffers.filter(function(e){return e.type==='adfox_venom';});}function getSarafanVenomImg(imageSrc){var adOffers=window.sarafanSDK.getAdOffersForPicture(imageSrc);return adOffers.filter(function(e){return e.type==='adfox_venom_img';});}function showSarafanVenom(adVenom,image){var imgStyle=window.getComputedStyle(image);var imgWidth=imgStyle.width,imgHeight=imgStyle.height;var wrapper=image.parentNode;var venomContainer=document.createElement('sfandiv');venomContainer.classList.add('sarafan-venom-container');wrapper.replaceChild(venomContainer,image);// wrapper.style.height = imgStyle.height;
var venom=document.createElement('sfandiv');// venom.style.width = imgWidth;
venom.classList.add('sarafan-venom');venom.innerHTML+=adVenom.insert_code_div;var adv=window.location.hostname.slice(-3)==='.de'?'Anzeige':'ADV';venom.innerHTML+="<sfandiv class=\"sarafan-offers-panel-footer\"><sfandiv class=\"legal-element sarafan-offers-panel-ads-opener\"><img src=\"https://sarafan.tech/widget/img/legal-info@2x.png\" class=\"legal-icon-element img-sarafan-icon-element\"></sfandiv>  <sfanspan class=\"legal-adv-element\">"+adv+"</sfanspan></sfandiv>";venom.innerHTML+='<sfandiv class="sarafan-offers-panel-ads" onclick="window.open(\'https://sarafan.tech\', \'_blank\');">POWERED BY SARAFAN</sfandiv>';var venomClose=document.createElement('sfandiv');venomClose.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">'+'    <defs>'+'        <path id="a" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>'+'    </defs>'+'    <g fill="none" fill-rule="evenodd" fill-opacity="0.4">'+'        <path d="M0 0h24v24H0z"/>'+'        <mask id="b" fill="#fff">'+'            <use xlink:href="#a"/>'+'        </mask>'+'        <use fill="#fff" xlink:href="#a"/>'+'        <g fill="#fff" mask="url(#b)">'+'            <path d="M0 0h24v24H0z"/>'+'        </g>'+'    </g>'+'</svg>';var venomOpen=document.createElement('sfandiv');venomOpen.innerHTML+='<span>open ads<i class="up"></i></span>';venomClose.classList.add('sarafan-venom-close');venomOpen.classList.add('sarafan-venom-open');venom.appendChild(venomClose);venomContainer.appendChild(venomOpen);venomContainer.appendChild(image);venomContainer.appendChild(venom);venomClose.addEventListener('click',function(){venom.style.display='none';},false);venomOpen.addEventListener('click',function(){venom.style.display='block';},false);setTimeout(function(){new Function(adVenom.insert_code_js)();},100);}function showSarafanPins(src,image,imageData){var pins=window.sarafanSDK.getPinsForPicture(src);if(pins.length>0){if(image.classList.contains('sarafan-hidden')){if(test)console.log('Class sarafan-hidden stopped rendering of widget on image '+image.src);return false;}var dataImageSrc=getImageSrc(image);var offersWrapper;//= document.querySelector('sfandiv[data-sarafan-src="' + dataImageSrc + '"]');
var pinObj=[];pinObj.middlePin=false;// if no SFANDIV try to get DIV. perhaps he has been added manually by moderator of site
if(!offersWrapper){//offersWrapper = document.querySelector('div[data-sarafan-src="' + dataImageSrc + '"]');
}if(offersWrapper){offersWrapper.classList.add(sarafanViewPanelClass);offersWrapper.innerHTML=offersPanelTemplate;if(_theme)offersWrapper.classList.add('theme-'+_theme);}else{offersWrapper=document.createElement('sfandiv');offersWrapper.classList.add(sarafanViewPanelClass);offersWrapper.setAttribute('data-sarafan-src',dataImageSrc);offersWrapper.innerHTML=offersPanelTemplate;var widgetWrapper=document.createElement('sfandiv');widgetWrapper.style.display='block';widgetWrapper.appendChild(offersWrapper);// wrap image and append offersWrapper to imageWrapper
var imageWrapper=document.createElement('sfandiv');imageWrapper.classList.add('sarafan-pin-div');imageWrapper.setAttribute('data-sarafan-src',dataImageSrc);var imageStyles=window.getComputedStyle(image);if(!location.hostname==="www.ellegirl.ru"){imageWrapper.style.height='100%';}imageWrapper.style.width=imageStyles.width;imageWrapper.style.margin=imageStyles.margin;wrap(image,imageWrapper);var firstPin=pins[0];pins.forEach(function(pin,pinIndex){var currentIMG=image;var pinDiv=document.createElement('span');pinDiv.classList.add('pin-div-glamour','pin-div-element');var pinDivSign=document.createElement('div');pinDivSign.classList.add('pin-div-glamour-sign');pinDiv.appendChild(pinDivSign);pinDiv.setAttribute('style','top:'+pin.y+"%; left:"+pin.x+"%;");pinDiv.setAttribute('pin-index',pinIndex);if(currentIMG){var currentComponent=imageWrapper.insertBefore(pinDiv,currentIMG);sarafanSDK.sendEvent(_objectSpread({type:"html.pin",media:currentIMG,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:currentComponent},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{offersData:pin.offers,mode:"pin"// override!!!
}));// first viewport pin showing
inView('.sarafan-pin-div['+'data-sarafan-src="'+imageWrapper.getAttribute('data-sarafan-src')+'"] .pin-div-element[pin-index="'+pinIndex+'"]').once('enter',function(){sarafanSDK.sendEvent(_objectSpread({type:"viewport.pin",media:currentIMG,tags:sarafanSDK.getTagsForPicture(dataImageSrc),component:currentComponent},sarafanSDK.commonInfoCache[dataImageSrc],imageData,{offersData:pin.offers,mode:"pin"// override!!!
}));});}pinDiv.addEventListener('click',function(event){event=event||window.event;event.preventDefault();var mousePosition=[event.clientX,event.clientY];var component=this;if(pinDiv.classList.contains('pin-div-glamour-active')==false){removeClassForGlamourPins();pinDiv.classList.add('pin-div-glamour-active');checkCartIsClicked(event);event.stopPropagation();if(!pinDiv.classList.contains('sfn-first-clicked')){pinDiv.classList.add('sfn-first-clicked');sarafanSDK.sendEvent(_objectSpread({type:"click.pin",component:component},sarafanSDK.commonInfoCache[dataImageSrc],{media:image,tags:sarafanSDK.getTagsForPicture(dataImageSrc),mousePosition:mousePosition},imageData,{mode:"pin"}));}showSarafanPinOffers(dataImageSrc,pin.offers,pinDiv,pin.y,getCoords(image),imageStyles.width,image,imageData);}else{checkCartIsClicked(event);event.stopPropagation();removeClassForGlamourPins();var sliderPanel=document.querySelector(".sarafan-offers-panel[data-sarafan-src=\"".concat(dataImageSrc,"\"] div[class=\"close-area\"]"));if(sliderPanel!=null){sliderPanel.click();}}});if(_showFirstPin&&window.openedPin!==true){if(pin.y<=firstPin.y){firstPin=pin;pinObj.div=pinDiv;}// pinObj = calculateFirstPin(pin, pinWrapper, pinObj);
}});var timeOut=500;if(location.hostname==="www.ellegirl.ru"){timeOut=2200;}if(_showFirstPin&&window.openedPin!==true){setTimeout(function(){// pinObj.div.click();
showSarafanPinOffers(dataImageSrc,firstPin.offers,pinObj.div,firstPin.y,getCoords(image),imageStyles.width,image,imageData);},timeOut);window.openedPin=true;}}}}/* * * END * * */ /* OFFERS, ADS, PROMO .. etc ORDER FUNCTIONS BLOCK */ /* insert elements from array2 into array1 per each n elements */function insertAdOffers(array1,array2,n){var temp=array1.slice();array2.forEach(function(v,i){return temp.splice((i+1)*n+i,0,v);});return temp;}/*
 * Splits array into subarrays.
 * count parameter indicates that how many item per subarray contains.
 * Example usage: splitIntoSubArray([1,2,3,4,5], 2) -> [[1, 2], [3, 4], [5]]
 */function splitArray(arr,count){var newArray=[];arr=arr.map(function(el,index){el.position=index+1;return el;});while(arr.length>0){newArray.push(arr.splice(0,count));}return newArray;}/* get offer count per each slide */function getOffersCnt(w){var c=4;if(w<480){c=2;}else if(w<680){c=3;}return c;}/* get offer count per each slide */function getOffersCntDbl(w){var c=3;if(w<480){c=2;}else if(w<768){c=3;}return c;}/* get unique objects from array by they properties */function uniqueByProperty(array,propertyName){return array.filter(function(e,i){return array.findIndex(function(a){return a[propertyName]===e[propertyName];})===i;});}/* get promo banner media, x2, x3, x4 sizes */function getPromo(promo,size){var div=document.createElement('sfandiv');div.insertAdjacentHTML('afterbegin','<a href="'+promo.url+'" target="_blank"><img src="'+promo['x'+size]+'"></a>');div.classList.add('promo');return div;}/* get micromedia banner (x1) */function getMicromedia(mm){var div=document.createElement('sfandiv');div.insertAdjacentHTML('afterbegin','<a href="'+mm.url+'" target="_blank"><img src="'+mm.x1+'"></a>');div.classList.add('micromedia');return div;}function randomStr(){// Math.random should be unique because of its seeding algorithm.
// Convert it to base 36 (numbers + letters), and grab the first 9 characters
// after the decimal.
return Math.random().toString(36).substr(2,12);}function getDoubleClickDiv(e,i){var id=Math.random().toString().slice(5);var div=document.createElement('sfandiv');div.classList.add('offer');var placement=e.place+'-'+i;var resolutions=[130,280];if(e.place==='promo'){div.style.display='block';//calc(100% + 2px)
div.style.width='100%';//   div.style.height = '280px';
placement=e.place;resolutions=[[580,280],[430,280],[280,280]];// TODO make md (560, 280), lg(570, 280)
if(e.size==='sm'){resolutions=[280,280];}}div.insertAdjacentHTML('afterbegin','<div id=\'div-gpt-ad-'+id+'-0\'></div>');return{div:div,str:_dblClickCampaign,placement:placement,resolutions:resolutions,id:id};}function dblClickRenderSlot(str,placement,resolutions,id,timeout){if(str&&placement&&resolutions&&id){setTimeout(function(){var googletag=window.googletag;var slot=googletag.defineSlot(str+'/sarafan-'+placement,resolutions,'div-gpt-ad-'+id+'-0').addService(googletag.pubads());googletag.pubads().collapseEmptyDivs();googletag.pubads().enableSingleRequest();googletag.enableServices();googletag.display('div-gpt-ad-'+id+'-0');googletag.pubads().refresh([slot]);},timeout);}}/* * * END * * */ /* ADDITIONAL FUNCTIONS, PAGE, IMAGE ETC */ /* currency letter*/function getCurrencyLetter(currency){return currencies[currency]||currency;}/* page title */function getPageTitle(){var title;if(window.sarafanSDK.site==='cosmo'){var articles=document.querySelectorAll('.article-title');title=articles[articles.length-1].value.trim()||'';}else{if(document.getElementsByTagName("title").length>0){title=document.getElementsByTagName("title")[0].innerHTML.trim()||'';}else{title='';}}return title.trim().replace(/\r?\n/g," ");}/* page header */function getHeader(el){var header=null;var h1=el.getElementsByTagName('h1');var h2=el.getElementsByTagName('h2');if(h2.length>0){header=h2[h2.length-1];}if(h1.length>0){header=h1[h1.length-1];}return header;}function getPageHeader(){var header=null;if(_border){var areasPack=_border.replace(" ","").split(",");//TODO exclude :not and others
for(var ap=0;ap<areasPack.length;ap++){var el=document.body.querySelectorAll(areasPack[ap]);el=el[el.length-1];if(el){header=getHeader(el);if(header){break;}}}}else{header=getHeader(area[area.length-1]);}try{header=header.innerText;}catch(e){header='n/a';}return header.trim().replace(/\r?\n/g," ");}/* location href*/function getLocationHref(){return window.location.href||document.URL||document.documentURI||'';}/*
    pre-tag the picture before make api calls
    Note: we mark all images even if the sizes do not approach for api
    */function markImageAsLoaded(image){image.classList.add('sarafan-loaded');}function calculateSalePercent(offer){return parseInt((1-offer.price/offer.old_price)*100);}function getImageSrc(image){var imageSrc=image.src||'';if(location.host==="www.gala.de"){return image.src;}/*if (location.host === "www.wday.ru") {
        	return image.src.replace(/(\d+)x(.*?)@/, '');
		}*/ // Choose src attribute for lazy loading
if(image.getAttribute('sarafansrc')){return image.getAttribute('sarafansrc');}if(image.getAttribute('data-lazy-src')){return image.getAttribute('data-lazy-src');}if(image.getAttribute('data-original')){return image.getAttribute('data-original');}if(image.getAttribute('data-src')){var src=image.getAttribute('data-src');if(location.href==="https://sarafan.tech/widget/mydemo/alt.html"&&/.aspx/.test(src)){src="https://www.alt.dk"+src;}return src;}if(_processImageObject&&image.getAttribute('itemtype')&&image.getAttribute('itemtype').indexOf('ImageObject')!==-1){var el=image.querySelector('[itemprop="contentUrl"]');if(el){return el.getAttribute('href');}}return imageSrc;}//Where el is the DOM element you'd like to test for visibility
function isHidden(el){var style=window.getComputedStyle(el);return style.display==='none';}/**
     * check if element no more than -1 page back or +1 page forward
     */function isVisible(elem){var coords=elem.getBoundingClientRect();var windowHeight=document.documentElement.clientHeight;var extendedTop=-windowHeight;var extendedBottom=2*windowHeight;//   elem       
var topVisible=coords.top>extendedTop&&coords.top<extendedBottom;var bottomVisible=coords.bottom<extendedBottom&&coords.bottom>extendedTop;return topVisible||bottomVisible;}function showVisibleImages(){var imgs=document.querySelectorAll('.offer.tns-slide-active img.img-sarafan-offer-image:not(.sarafan-loaded)');if(!imgs)return false;for(var i=0;i<imgs.length;i++){var img=imgs[i];var sarafansrc=img.getAttribute('sarafansrc');if(!sarafansrc)continue;if(isVisible(img)){img.src=sarafansrc;img.setAttribute('sarafansrc','');img.classList.add('sarafan-loaded');}}}// make logic of showing legacy info and toggling icon of opener
// @param elementSelector - Node or CSS selector string
// @param classStr - string
function toggleLegacyOpened(elementSeletor,classStr){var element,opener;element=typeof elementSeletor==='string'||elementSeletor instanceof String?document.querySelector(elementSeletor):elementSeletor;if(element)opener=element.querySelector('.sarafan-offers-panel-ads-opener img');if(opener){if(element.classList.contains(classStr)){// to hide
if(test)console.log('to hide');element.classList.remove(classStr);opener.src='https://sarafan.tech/widget/img/legal-info@2x.png';}else{// to open
if(test)console.log('to open');element.classList.add(classStr);opener.src='https://sarafan.tech/widget/img/legal-close@2x.png';}return true;}else{return false;}}// coordinates relative to document
function getCoords(elem){// excepted IE8-
try{var box=elem.getBoundingClientRect();return{top:box.top+pageYOffset,left:box.left+pageXOffset};}catch(e){return{top:pageYOffset,left:pageXOffset};}}/**
     * Insert elements into DOM relative to relativeElement with usage special rule
     *
     * @param {HTMLElement} relativeElement - for example, our image
     * @param {HTMLElement} element - element to insert
     * @param {object} imageRule - object rules for insertion. Params: prevNeighbourSelector - after which element selector to do an insert,
     *      parentSelector - common selector for element and relativeElement
     *
     */function insertElementIntoDom(element,relativeElement,imageRule){if(!imageRule)return false;var prevElement=null;if(!imageRule.parentSelector){if(!imageRule.prevNeighbourSelector){prevElement=relativeElement;}else{prevElement=relativeElement.parentElement.querySelector(imageRule.prevNeighbourSelector);if(!prevElement){if(test)console.log('Sarafan: there are no any sibling with selector '+imageRule.prevNeighbourSelector);prevElement=relativeElement;}}prevElement.insertAdjacentElement('afterend',element);}else{var parentElement=relativeElement.closest(imageRule.parentSelector);if(!parentElement){if(test)console.log('Sarafan: there are no any parent with selector '+imageRule.parentSelector);parentElement=relativeElement.parentElement;}if(!imageRule.prevNeighbourSelector){parentElement.insertAdjacentElement('beforeend',element);}else{if(imageRule.prevNeighbourSelector==='parent'){parentElement.insertAdjacentElement('afterend',element);}else{prevElement=parentElement.querySelector(imageRule.prevNeighbourSelector);if(!prevElement){if(test)console.log('Sarafan: there are no any element with selector "'+imageRule.prevNeighbourSelector+'" in parent ',parentElement);parentElement.insertAdjacentElement('beforeend',element);}else{prevElement.insertAdjacentElement('afterend',element);}}}}element.style.display='block';element.style.position='relative';}/*
    * checks if element in viewport
    */function checkElementPositionForViewport(el,clientWidth,clientHeight){//special bonus for those using jQuery
if(typeof jQuery==="function"&&el instanceof jQuery){el=el[0];}var rect=el.getBoundingClientRect();var result=rect.left>=0&&rect.right<=clientWidth&&rect.top>=0&&rect.bottom<=clientHeight;var rd=clientWidth-rect.right,bd=clientHeight-rect.bottom;if(rect.left<0){el.style.left=getCoords(el).left+Math.abs(rect.left)+'px';}else if(rd<0){el.style.left=getCoords(el).left+rd+'px';}//          ,        
//   -  ,  - 
if(rect.top<0){el.style.top=parseInt(el.style.top)-rect.top+'px';}else if(rect.bottom<0){el.style.bottom=parseInt(el.style.bottom)-rect.bottom+'px';}return result;}function wrap(el,wrapper){var parent=el.parentNode;if(location.host==='www.elle.ro'&&el.matches('.gallery img')){parent=parent.parentNode;wrapper.style.width='auto';parent.insertBefore(wrapper,el.parentNode);}else{parent.insertBefore(wrapper,el);}wrapper.appendChild(el);}function querySelectorInArea(query){for(var i=0;i<area.length;i++){var result=area[i].querySelector(query);if(result){return result;}}}function querySelectorAllInArea(query){var nodes=[];for(var i=0;i<area.length;i++){var result=area[i].querySelectorAll(query);for(var j=0;j<result.length;j++){nodes.push(result[j]);}}return nodes;}function processNewInstagramFrames(){return _processNewInstagramFrames.apply(this,arguments);}function _processNewInstagramFrames(){_processNewInstagramFrames=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(){var frames,data,_offers,medias;return regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:frames=querySelectorAllInArea('iframe.instagram-media');if(!(frames.length>0)){_context4.next=14;break;}data={embeds:extractInstagramHashes(frames)};_context4.next=5;return window.sarafanSDK.frameSearch(data);case 5:_offers=_context4.sent;if(!(_offers&&_offers.map)){_context4.next=13;break;}medias=_offers.map(function(v){return{mode:'floor',url:v.src,qid:sarafanSDK.lastQueryId+1,wid:sarafanSDK.getIncrementedWidgetId()};});if(!(!medias||!medias.length)){_context4.next=10;break;}return _context4.abrupt("return",false);case 10:window.sarafanSDK.search(medias,_pageMode,version,getPageTitle(),getPageHeader(),getLocationHref()).then(function(){window.imagesDataArray=medias;if(_enableFloorMode){if(nextFloor)return false;nextFloor=getNextFloor();}});_context4.next=14;break;case 13:if(test){console.log("No offers found for instagram frames");}case 14:case"end":return _context4.stop();}}},_callee3);}));return _processNewInstagramFrames.apply(this,arguments);}function processNewFrames(){return _processNewFrames.apply(this,arguments);}function _processNewFrames(){_processNewFrames=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee4(){var hashes,instagramData;return regeneratorRuntime.wrap(function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:hashes={instagram:[]};_context5.next=3;return processNewInstagramFrames();case 3:instagramData=_context5.sent;// hashes.instagram.push(...instagramData.medias);
hashes.instagram.push(instagramData);/* can add some another pushes */case 5:case"end":return _context5.stop();}}},_callee4);}));return _processNewFrames.apply(this,arguments);}function extractInstagramHashes(frames){if(frames.length>0){var hs=[];frames.forEach(function(f){hs.push(f.src.substring(f.src.lastIndexOf("/p/")+3,f.src.lastIndexOf("/embed/")));});return hs;}return null;}/*
    * 1. Get all already not processed images. We should remember that images were not loading already in DOM
    * 2. Set mode for all of them
    * 3. Create array of image data for sending to API search
    */function processNewImages(){var imgsSarafan=querySelectNewSarafanImages(true);var imagesDataArray=[],mode,position='absolute';// default
if(test)console.log('Sarafan widjet: found new '+imgsSarafan.length);if(test)console.log('Sarafan widjet: founded images: '+imgsSarafan);if(!imgsSarafan.length)return false;var rulesFromApiData=window.sarafanSDK.rulesFromApiData;for(var i=0,len=imgsSarafan.length;i<len;i++){// pre-tag the picture before make api calls
if(location.host==="www.wday.ru"){if(imgsSarafan[i].src.match(/\/12x(.*?)@/))continue;}markImageAsLoaded(imgsSarafan[i]);var src=getImageSrc(imgsSarafan[i]);if(!src)continue;// we need filter data images (inline images)
if(!checkImageSrc(src)){continue;}if(imgsSarafan[i].classList.contains(modeButtonClass)){mode='button';}else if(imgsSarafan[i].classList.contains(modeViewClass)){mode='view';}else if(imgsSarafan[i].classList.contains(modeInPictureClass)){mode='inpicture';}else if(imgsSarafan[i].classList.contains('sarafan-hidden')){mode='hidden';}else if(_pageMode==='view'){mode='view';}else{mode='button';}// if we need check probability for reducing of showing view blocks
if(mode==='view'&&_viewModeType==='load-view-simply'&&!probability(_viewModeProbability/100)){mode='button';}// it fix situation then where are not added any rules for site yet and maybe not show any widgets
// TODO remove this logic in future
if(!rulesFromApiData||typeof rulesFromApiData==='undefined'){imagesDataArray.push({url:src,mode:mode,imageRule:null,// empty for default behaviour
wid:sarafanSDK.getIncrementedWidgetId(),qid:sarafanSDK.lastQueryId+1,node:imgsSarafan[i]});continue;}var imageRule=null;for(var ruleSelector in rulesFromApiData){// if rule was founded for current image
if(imgsSarafan[i].matches(ruleSelector)){imageRule=rulesFromApiData[ruleSelector];break;}}// if mode exists then override it
if(imageRule&&imageRule.mode)mode=imageRule.mode;imagesDataArray.push({url:src,mode:mode,imageRule:imageRule,wid:sarafanSDK.getIncrementedWidgetId(),qid:sarafanSDK.lastQueryId+1,node:imgsSarafan[i]});}imagesDataArray=optionsFromApiData.allImages?imagesDataArray:uniqueByProperty(imagesDataArray,'url');var filteredImgsArray=imagesDataArray.filter(function(v){return!(v.imageRule?parseInt(v.imageRule.hidden)===1:false);});loadOffersForPictures(filteredImgsArray);}function checkNewOffers(){return document.body.querySelector(".type-C:not(.in-sarafan-cart), .type-T:not(.in-sarafan-cart)");}function onReady(){//alert("widget");
window.sarafanSDK.setSystemIsReady();if(test)console.log('DOMContentLoaded');currentLocationHref=location.href;if(location.hostname==="www.ellegirl.ru"||location.hostname==="www.myself.de"||location.hostname==="www.wday.ru"){setInterval(function(){if(currentLocationHref!==location.href){currentLocationHref=location.href;sarafan.restart();}},500);}if(_border){area=document.querySelectorAll(_border);}initializeYandexPixel();document.body.addEventListener('click',function(e){if(test)console.log('document click');if(offers&&!isHidden(offers)){offers.style.display='none';removeClassForGlamourPins();}checkCartIsClicked(e);});if(_enableLazyLoad){window.addEventListener('scroll',throttle(showVisibleImages,200));}processNewImages();if(_enableFrames&&_enableFloorMode){processNewFrames();}MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;observer=new MutationObserver(function(mutations,observer){for(var i=0;i<mutations.length;i++){var mutation=mutations[i];if(mutation.type==='childList'&&mutation.addedNodes.length>=1){var checkImgSarafan=querySelectNewSarafanImages(false);if(checkImgSarafan){if(test)console.log('On page was finded new sarafan image!');// console.log(checkImgSarafan.classList);
observer.disconnect();processNewImages();observer.observe(targetNode,observerConfig);}break;}}});observer.observe(targetNode,observerConfig);if(_enableFloorMode){window.addEventListener('scroll',throttle(checkNextFloorReadiness,2000));}if(location.host==="www.arcor.de"){var lis=document.querySelectorAll(".slides li");for(var i=0;i<lis.length;i++){lis[i].addEventListener("click",function(){return setTimeout(function(){return checkViewPanelsVisibility();},1000);});}}}function checkNextFloorReadiness(){if(!nextFloor)return false;if(Object.keys(window.sarafanSDK.cacheQueue).length===0)return false;//if we need lazy load to floor wrapper
var scrolled=window.pageYOffset||document.documentElement.scrollTop;var floorY=nextFloor.getBoundingClientRect().top+scrolled;if(scrolled+document.documentElement.clientHeight+nextFloorOffset>=floorY){populateNextFloor();}// to load floor at once when loading the page
// populateNextFloor();
}function querySelectNewSarafanImages(useQuerySelectorAll){var query;var queryImageObject=_processImageObject?',[itemtype*="ImageObject"]:not(.sarafan-loaded):not(.img-sarafan-offer-image):not(.img-sarafan-icon-element)':'';if(location.href==="https://sarafan.tech/widget/mydemo/alt.html"){_imagesSearchType='all-classes';}if(_imagesSearchType==='all-classes'){query="img:not(.sarafan-loaded):not(.img-sarafan-offer-image):not(.img-sarafan-icon-element)"+queryImageObject;}else{query="img.sarafan:not(.sarafan-loaded):not(.img-sarafan-offer-image):not(.img-sarafan-icon-element)"+queryImageObject;}if(useQuerySelectorAll){return querySelectorAllInArea(query);}else{return querySelectorInArea(query);}}function throttle(fn,wait){var time=Date.now();return function(){if(time+wait-Date.now()<0){fn();time=Date.now();}};}/*
    * check if dimensions of image allow sending to api & showing results
    * depends on minWidthOfImageForDisplayBottomOffersWrapper & minHeightOfImageForDisplayBottomOffersWrapper parameters
    */function checkImageDimensions(image){if(test)console.log(image.src+" ; state:"+image.complete+":n w h:"+image.naturalWidth+" "+image.naturalHeight+";w h:"+image.clientWidth+" "+image.clientHeight);if(image.clientWidth>0){if(image.clientWidth<minWidthOfImageForDisplayBottomOffersWrapper){if(test)console.log(' '+image.src+'        '+image.naturalWidth+'('+_typeof(image.naturalWidth)+')   '+image.naturalHeight+'('+_typeof(image.naturalHeight)+')');return false;}else return true;}else if(image.naturalWidth<minWidthOfImageForDisplayBottomOffersWrapper){if(test)console.log(image.naturalHeight);return false;}return true;}/*
    * check if image in normal HTML DOM position:
    * 1. without wrapping in <a> tag
    */function checkImageInDOM(image){var parent=image.parentNode;if(parent.tagName==='A'){if(test)console.log(' '+image.src+'     HTML,        ');return false;}else return true;}function checkImageType(src){return /\.jpe?g$/i.test(src);}function checkMobileRes(){return document.documentElement.clientWidth<mobileMinWidth;}function checkImageSrc(src){src=src.toLowerCase();if(src.includes('.gif?')||RegExp(/.html$/).test(src))return false;if(src.substring(0,4)==='http')return true;// good link
if(src.indexOf(':')>=0){// maybe it is bad link
var splittedSrc=src.split(':');if(!splittedSrc[0]){return false;// link can not starts from ':'
}else if(splittedSrc[0].indexOf('/')===-1){return false;// there are no '/' symbol in first split. it is inline link. return false.
}else return true;// there is symbol '/' in first split. maybe link like "www.yandex.ru/?user=:". return true.
}else return true;// good link
}function probability(n){return!!n&&Math.random()<=n;}function getCurrentScript(){if(document.currentScript){return document.currentScript;}else if(document._currentScript){return document._currentScript;}else{var me=document.querySelector('script[src*="sarafan.min.js"]');if(me){return me;}else{console.log('Sarafan Widget: sorry, we can not work with your version of browser. ');}}}function initializeYandexPixel(){// yandex pixel
var YApixel=document.createElement('img');YApixel.src='https://mc.yandex.ru/watch/45068210';YApixel.classList.add('sarafan-pixel');document.body.appendChild(YApixel);}function hideAllPanels(){document.querySelectorAll('sfandiv.sarafan-offers-panel').forEach(function(v){v.style.display='none';});}/* * * END * * */SarafanParent.prototype.restart=function(){if(test){console.log('Sarafan widget restart');console.log('new release!');}window.sarafanSDK.options(version).then(function(){rewriteOptionsFromApiResponse();if(_border){var sections=document.querySelectorAll(_border);area=sections;}processNewImages();if(_enableFrames&&_enableFloorMode){processNewFrames();}if(observer){observer.observe(targetNode,observerConfig);}}).catch(function(reason){if(test)console.log('Sarafan widget error: '+reason);rewriteOptionsFromApiResponse();});};SarafanParent.prototype.stop=function(){if(observer){observer.disconnect();}};function isParentsAreVisible(el){if(el.parentNode){if(el.parentNode.tagName==="BODY"){return false;}if(el.parentNode.style.opacity==="0"||el.parentNode.style.visibility==="hidden"){return true;}else{return isParentsAreVisible(el.parentNode);}}}checkViewPanelsVisibility=function checkViewPanelsVisibility(){var viewPanels=document.body.getElementsByClassName("sarafan-view");for(var i=0;i<viewPanels.length;i++){checkViewPanelVisibility(viewPanels[i]);}};function checkViewPanelVisibility(viewPanel){if(isParentsAreVisible(viewPanel)){// viewPanel.style.height = "auto";
//viewPanel.style.display = "none";
viewPanel.style.height="0px";viewPanel.style.visibility="hidden";}else{viewPanel.style.height="auto";viewPanel.style.visibility="visible";// viewPanel.style.display = "block";
}}SarafanParent.prototype.start=function(){// must do rewriting of options and generating of templates anyway
window.sarafanSDK.options(version).then(function(){if(test)console.log('Sarafan widget: options have come from API');rewriteOptionsFromApiResponse();if(document.readyState==="complete"||document.readyState==="loaded"||document.readyState==="interactive"){// document has at least been parsed
if(test)console.log('Sarafan widget: running onLoad from readyState: '+document.readyState);onReady();}else{document.addEventListener("DOMContentLoaded",function(event){if(test)console.log('Sarafan widget: running onLoad from DOMContentLoaded');onReady();});}}).catch(function(reason){if(test)console.log('Sarafan widget error: '+reason);rewriteOptionsFromApiResponse();});};// Determine constructor of global object
window.Sarafan=function(options){SarafanParent.call(this,options);this.options=options;if(test)console.log('Sarafan: options from HTML page: ',options);};// create object Sarafan.prototype, which is inherited from SarafanParent.prototype
window.Sarafan.prototype=Object.create(SarafanParent.prototype);// Set property "constructor" for link on Sarafan class
window.Sarafan.prototype.constructor=window.Sarafan;})();
